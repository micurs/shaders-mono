(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();function kp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $f={exports:{}},el={},Hf={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ao=Symbol.for("react.element"),Np=Symbol.for("react.portal"),Sp=Symbol.for("react.fragment"),Mp=Symbol.for("react.strict_mode"),_p=Symbol.for("react.profiler"),Pp=Symbol.for("react.provider"),Lp=Symbol.for("react.context"),Ip=Symbol.for("react.forward_ref"),Vp=Symbol.for("react.suspense"),Cp=Symbol.for("react.memo"),bp=Symbol.for("react.lazy"),Nc=Symbol.iterator;function Ep(t){return t===null||typeof t!="object"?null:(t=Nc&&t[Nc]||t["@@iterator"],typeof t=="function"?t:null)}var Wf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qf=Object.assign,Gf={};function Dr(t,e,s){this.props=t,this.context=e,this.refs=Gf,this.updater=s||Wf}Dr.prototype.isReactComponent={};Dr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qf(){}Qf.prototype=Dr.prototype;function mu(t,e,s){this.props=t,this.context=e,this.refs=Gf,this.updater=s||Wf}var yu=mu.prototype=new Qf;yu.constructor=mu;qf(yu,Dr.prototype);yu.isPureReactComponent=!0;var Sc=Array.isArray,Xf=Object.prototype.hasOwnProperty,vu={current:null},Yf={key:!0,ref:!0,__self:!0,__source:!0};function Kf(t,e,s){var n,r={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Xf.call(e,n)&&!Yf.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var h=Array(l),u=0;u<l;u++)h[u]=arguments[u+2];r.children=h}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:Ao,type:t,key:o,ref:a,props:r,_owner:vu.current}}function Tp(t,e){return{$$typeof:Ao,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ao}function Ap(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Mc=/\/+/g;function Nl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ap(""+t.key):e.toString(36)}function ua(t,e,s,n,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ao:case Np:a=!0}}if(a)return a=t,r=r(a),t=n===""?"."+Nl(a,0):n,Sc(r)?(s="",t!=null&&(s=t.replace(Mc,"$&/")+"/"),ua(r,e,s,"",function(u){return u})):r!=null&&(xu(r)&&(r=Tp(r,s+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Mc,"$&/")+"/")+t)),e.push(r)),1;if(a=0,n=n===""?".":n+":",Sc(t))for(var l=0;l<t.length;l++){o=t[l];var h=n+Nl(o,l);a+=ua(o,e,s,h,r)}else if(h=Ep(t),typeof h=="function")for(t=h.call(t),l=0;!(o=t.next()).done;)o=o.value,h=n+Nl(o,l++),a+=ua(o,e,s,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Bo(t,e,s){if(t==null)return t;var n=[],r=0;return ua(t,n,"","",function(o){return e.call(s,o,r++)}),n}function Dp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qi={current:null},ca={transition:null},Op={ReactCurrentDispatcher:Qi,ReactCurrentBatchConfig:ca,ReactCurrentOwner:vu};Jt.Children={map:Bo,forEach:function(t,e,s){Bo(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Bo(t,function(){e++}),e},toArray:function(t){return Bo(t,function(e){return e})||[]},only:function(t){if(!xu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Jt.Component=Dr;Jt.Fragment=Sp;Jt.Profiler=_p;Jt.PureComponent=mu;Jt.StrictMode=Mp;Jt.Suspense=Vp;Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Op;Jt.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=qf({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=vu.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(h in e)Xf.call(e,h)&&!Yf.hasOwnProperty(h)&&(n[h]=e[h]===void 0&&l!==void 0?l[h]:e[h])}var h=arguments.length-2;if(h===1)n.children=s;else if(1<h){l=Array(h);for(var u=0;u<h;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ao,type:t.type,key:r,ref:o,props:n,_owner:a}};Jt.createContext=function(t){return t={$$typeof:Lp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pp,_context:t},t.Consumer=t};Jt.createElement=Kf;Jt.createFactory=function(t){var e=Kf.bind(null,t);return e.type=t,e};Jt.createRef=function(){return{current:null}};Jt.forwardRef=function(t){return{$$typeof:Ip,render:t}};Jt.isValidElement=xu;Jt.lazy=function(t){return{$$typeof:bp,_payload:{_status:-1,_result:t},_init:Dp}};Jt.memo=function(t,e){return{$$typeof:Cp,type:t,compare:e===void 0?null:e}};Jt.startTransition=function(t){var e=ca.transition;ca.transition={};try{t()}finally{ca.transition=e}};Jt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Jt.useCallback=function(t,e){return Qi.current.useCallback(t,e)};Jt.useContext=function(t){return Qi.current.useContext(t)};Jt.useDebugValue=function(){};Jt.useDeferredValue=function(t){return Qi.current.useDeferredValue(t)};Jt.useEffect=function(t,e){return Qi.current.useEffect(t,e)};Jt.useId=function(){return Qi.current.useId()};Jt.useImperativeHandle=function(t,e,s){return Qi.current.useImperativeHandle(t,e,s)};Jt.useInsertionEffect=function(t,e){return Qi.current.useInsertionEffect(t,e)};Jt.useLayoutEffect=function(t,e){return Qi.current.useLayoutEffect(t,e)};Jt.useMemo=function(t,e){return Qi.current.useMemo(t,e)};Jt.useReducer=function(t,e,s){return Qi.current.useReducer(t,e,s)};Jt.useRef=function(t){return Qi.current.useRef(t)};Jt.useState=function(t){return Qi.current.useState(t)};Jt.useSyncExternalStore=function(t,e,s){return Qi.current.useSyncExternalStore(t,e,s)};Jt.useTransition=function(){return Qi.current.useTransition()};Jt.version="18.2.0";Hf.exports=Jt;var gu=Hf.exports;const Zs=kp(gu);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp=gu,Rp=Symbol.for("react.element"),Up=Symbol.for("react.fragment"),jp=Object.prototype.hasOwnProperty,Bp=Fp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$p={key:!0,ref:!0,__self:!0,__source:!0};function Jf(t,e,s){var n,r={},o=null,a=null;s!==void 0&&(o=""+s),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)jp.call(e,n)&&!$p.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Rp,type:t,key:o,ref:a,props:r,_owner:Bp.current}}el.Fragment=Up;el.jsx=Jf;el.jsxs=Jf;$f.exports=el;var se=$f.exports,Kl={},Zf={exports:{}},ps={},t1={exports:{}},e1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,q){var I=L.length;L.push(q);t:for(;0<I;){var G=I-1>>>1,W=L[G];if(0<r(W,q))L[G]=q,L[I]=W,I=G;else break t}}function s(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var q=L[0],I=L.pop();if(I!==q){L[0]=I;t:for(var G=0,W=L.length,Q=W>>>1;G<Q;){var yt=2*(G+1)-1,Tt=L[yt],Lt=yt+1,K=L[Lt];if(0>r(Tt,I))Lt<W&&0>r(K,Tt)?(L[G]=K,L[Lt]=I,G=Lt):(L[G]=Tt,L[yt]=I,G=yt);else if(Lt<W&&0>r(K,I))L[G]=K,L[Lt]=I,G=Lt;else break t}}return q}function r(L,q){var I=L.sortIndex-q.sortIndex;return I!==0?I:L.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var h=[],u=[],c=1,f=null,p=3,g=!1,v=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function d(L){for(var q=s(u);q!==null;){if(q.callback===null)n(u);else if(q.startTime<=L)n(u),q.sortIndex=q.expirationTime,e(h,q);else break;q=s(u)}}function z(L){if(m=!1,d(L),!v)if(s(h)!==null)v=!0,Mt(k);else{var q=s(u);q!==null&&tt(z,q.startTime-L)}}function k(L,q){v=!1,m&&(m=!1,x(U),U=-1),g=!0;var I=p;try{for(d(q),f=s(h);f!==null&&(!(f.expirationTime>q)||L&&!F());){var G=f.callback;if(typeof G=="function"){f.callback=null,p=f.priorityLevel;var W=G(f.expirationTime<=q);q=t.unstable_now(),typeof W=="function"?f.callback=W:f===s(h)&&n(h),d(q)}else n(h);f=s(h)}if(f!==null)var Q=!0;else{var yt=s(u);yt!==null&&tt(z,yt.startTime-q),Q=!1}return Q}finally{f=null,p=I,g=!1}}var N=!1,S=null,U=-1,O=5,M=-1;function F(){return!(t.unstable_now()-M<O)}function A(){if(S!==null){var L=t.unstable_now();M=L;var q=!0;try{q=S(!0,L)}finally{q?D():(N=!1,S=null)}}else N=!1}var D;if(typeof y=="function")D=function(){y(A)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ot=P.port2;P.port1.onmessage=A,D=function(){ot.postMessage(null)}}else D=function(){w(A,0)};function Mt(L){S=L,N||(N=!0,D())}function tt(L,q){U=w(function(){L(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Mt(k))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return s(h)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var I=p;p=q;try{return L()}finally{p=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var I=p;p=L;try{return q()}finally{p=I}},t.unstable_scheduleCallback=function(L,q,I){var G=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?G+I:G):I=G,L){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=I+W,L={id:c++,callback:q,priorityLevel:L,startTime:I,expirationTime:W,sortIndex:-1},I>G?(L.sortIndex=I,e(u,L),s(h)===null&&L===s(u)&&(m?(x(U),U=-1):m=!0,tt(z,I-G))):(L.sortIndex=W,e(h,L),v||g||(v=!0,Mt(k))),L},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(L){var q=p;return function(){var I=p;p=q;try{return L.apply(this,arguments)}finally{p=I}}}})(e1);t1.exports=e1;var Hp=t1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1=gu,ds=Hp;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s1=new Set,vo={};function sr(t,e){Ir(t,e),Ir(t+"Capture",e)}function Ir(t,e){for(vo[t]=e,t=0;t<e.length;t++)s1.add(e[t])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jl=Object.prototype.hasOwnProperty,Wp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_c={},Pc={};function qp(t){return Jl.call(Pc,t)?!0:Jl.call(_c,t)?!1:Wp.test(t)?Pc[t]=!0:(_c[t]=!0,!1)}function Gp(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Qp(t,e,s,n){if(e===null||typeof e>"u"||Gp(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xi(t,e,s,n,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mi[t]=new Xi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mi[e]=new Xi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mi[t]=new Xi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mi[t]=new Xi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mi[t]=new Xi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mi[t]=new Xi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mi[t]=new Xi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mi[t]=new Xi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mi[t]=new Xi(t,5,!1,t.toLowerCase(),null,!1,!1)});var wu=/[\-:]([a-z])/g;function zu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wu,zu);Mi[e]=new Xi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wu,zu);Mi[e]=new Xi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wu,zu);Mi[e]=new Xi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mi[t]=new Xi(t,1,!1,t.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new Xi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mi[t]=new Xi(t,1,!1,t.toLowerCase(),null,!0,!0)});function ku(t,e,s,n){var r=Mi.hasOwnProperty(e)?Mi[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Qp(e,s,r,n)&&(s=null),n||r===null?qp(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var xn=i1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$o=Symbol.for("react.element"),ur=Symbol.for("react.portal"),cr=Symbol.for("react.fragment"),Nu=Symbol.for("react.strict_mode"),Zl=Symbol.for("react.profiler"),n1=Symbol.for("react.provider"),r1=Symbol.for("react.context"),Su=Symbol.for("react.forward_ref"),th=Symbol.for("react.suspense"),eh=Symbol.for("react.suspense_list"),Mu=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),o1=Symbol.for("react.offscreen"),Lc=Symbol.iterator;function Br(t){return t===null||typeof t!="object"?null:(t=Lc&&t[Lc]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Sl;function to(t){if(Sl===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);Sl=e&&e[1]||""}return`
`+Sl+t}var Ml=!1;function _l(t,e){if(!t||Ml)return"";Ml=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),o=n.stack.split(`
`),a=r.length-1,l=o.length-1;1<=a&&0<=l&&r[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==o[l]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=l);break}}}finally{Ml=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?to(t):""}function Xp(t){switch(t.tag){case 5:return to(t.type);case 16:return to("Lazy");case 13:return to("Suspense");case 19:return to("SuspenseList");case 0:case 2:case 15:return t=_l(t.type,!1),t;case 11:return t=_l(t.type.render,!1),t;case 1:return t=_l(t.type,!0),t;default:return""}}function ih(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cr:return"Fragment";case ur:return"Portal";case Zl:return"Profiler";case Nu:return"StrictMode";case th:return"Suspense";case eh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r1:return(t.displayName||"Context")+".Consumer";case n1:return(t._context.displayName||"Context")+".Provider";case Su:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mu:return e=t.displayName||null,e!==null?e:ih(t.type)||"Memo";case zn:e=t._payload,t=t._init;try{return ih(t(e))}catch{}}return null}function Yp(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ih(e);case 8:return e===Nu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function An(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function a1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Kp(t){var e=a1(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,o=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ho(t){t._valueTracker||(t._valueTracker=Kp(t))}function l1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=a1(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function Sa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sh(t,e){var s=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Ic(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=An(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function h1(t,e){e=e.checked,e!=null&&ku(t,"checked",e,!1)}function nh(t,e){h1(t,e);var s=An(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rh(t,e.type,s):e.hasOwnProperty("defaultValue")&&rh(t,e.type,An(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vc(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function rh(t,e,s){(e!=="number"||Sa(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var eo=Array.isArray;function Nr(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+An(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function oh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cc(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(Y(92));if(eo(s)){if(1<s.length)throw Error(Y(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:An(s)}}function u1(t,e){var s=An(e.value),n=An(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function bc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function c1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ah(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?c1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wo,f1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wo=Wo||document.createElement("div"),Wo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xo(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jp=["Webkit","ms","Moz","O"];Object.keys(oo).forEach(function(t){Jp.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oo[e]=oo[t]})});function d1(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||oo.hasOwnProperty(t)&&oo[t]?(""+e).trim():e+"px"}function p1(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=d1(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var Zp=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lh(t,e){if(e){if(Zp[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function hh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uh=null;function _u(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ch=null,Sr=null,Mr=null;function Ec(t){if(t=Fo(t)){if(typeof ch!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=ol(e),ch(t.stateNode,t.type,e))}}function m1(t){Sr?Mr?Mr.push(t):Mr=[t]:Sr=t}function y1(){if(Sr){var t=Sr,e=Mr;if(Mr=Sr=null,Ec(t),e)for(t=0;t<e.length;t++)Ec(e[t])}}function v1(t,e){return t(e)}function x1(){}var Pl=!1;function g1(t,e,s){if(Pl)return t(e,s);Pl=!0;try{return v1(t,e,s)}finally{Pl=!1,(Sr!==null||Mr!==null)&&(x1(),y1())}}function go(t,e){var s=t.stateNode;if(s===null)return null;var n=ol(s);if(n===null)return null;s=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break t;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(Y(231,e,typeof s));return s}var fh=!1;if(pn)try{var $r={};Object.defineProperty($r,"passive",{get:function(){fh=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{fh=!1}function tm(t,e,s,n,r,o,a,l,h){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(c){this.onError(c)}}var ao=!1,Ma=null,_a=!1,dh=null,em={onError:function(t){ao=!0,Ma=t}};function im(t,e,s,n,r,o,a,l,h){ao=!1,Ma=null,tm.apply(em,arguments)}function sm(t,e,s,n,r,o,a,l,h){if(im.apply(this,arguments),ao){if(ao){var u=Ma;ao=!1,Ma=null}else throw Error(Y(198));_a||(_a=!0,dh=u)}}function nr(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function w1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tc(t){if(nr(t)!==t)throw Error(Y(188))}function nm(t){var e=t.alternate;if(!e){if(e=nr(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var o=r.alternate;if(o===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===s)return Tc(r),t;if(o===n)return Tc(r),e;o=o.sibling}throw Error(Y(188))}if(s.return!==n.return)s=r,n=o;else{for(var a=!1,l=r.child;l;){if(l===s){a=!0,s=r,n=o;break}if(l===n){a=!0,n=r,s=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===s){a=!0,s=o,n=r;break}if(l===n){a=!0,n=o,s=r;break}l=l.sibling}if(!a)throw Error(Y(189))}}if(s.alternate!==n)throw Error(Y(190))}if(s.tag!==3)throw Error(Y(188));return s.stateNode.current===s?t:e}function z1(t){return t=nm(t),t!==null?k1(t):null}function k1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=k1(t);if(e!==null)return e;t=t.sibling}return null}var N1=ds.unstable_scheduleCallback,Ac=ds.unstable_cancelCallback,rm=ds.unstable_shouldYield,om=ds.unstable_requestPaint,ti=ds.unstable_now,am=ds.unstable_getCurrentPriorityLevel,Pu=ds.unstable_ImmediatePriority,S1=ds.unstable_UserBlockingPriority,Pa=ds.unstable_NormalPriority,lm=ds.unstable_LowPriority,M1=ds.unstable_IdlePriority,il=null,sn=null;function hm(t){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(il,t,void 0,(t.current.flags&128)===128)}catch{}}var Os=Math.clz32?Math.clz32:fm,um=Math.log,cm=Math.LN2;function fm(t){return t>>>=0,t===0?32:31-(um(t)/cm|0)|0}var qo=64,Go=4194304;function io(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function La(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,o=t.pingedLanes,a=s&268435455;if(a!==0){var l=a&~r;l!==0?n=io(l):(o&=a,o!==0&&(n=io(o)))}else a=s&~r,a!==0?n=io(a):o!==0&&(n=io(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-Os(e),r=1<<s,n|=t[s],e&=~r;return n}function dm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pm(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Os(o),l=1<<a,h=r[a];h===-1?(!(l&s)||l&n)&&(r[a]=dm(l,e)):h<=e&&(t.expiredLanes|=l),o&=~l}}function ph(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _1(){var t=qo;return qo<<=1,!(qo&4194240)&&(qo=64),t}function Ll(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Do(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Os(e),t[e]=s}function mm(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-Os(s),o=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~o}}function Lu(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-Os(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var xe=0;function P1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var L1,Iu,I1,V1,C1,mh=!1,Qo=[],Pn=null,Ln=null,In=null,wo=new Map,zo=new Map,Nn=[],ym="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dc(t,e){switch(t){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":wo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(e.pointerId)}}function Hr(t,e,s,n,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Fo(e),e!==null&&Iu(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function vm(t,e,s,n,r){switch(e){case"focusin":return Pn=Hr(Pn,t,e,s,n,r),!0;case"dragenter":return Ln=Hr(Ln,t,e,s,n,r),!0;case"mouseover":return In=Hr(In,t,e,s,n,r),!0;case"pointerover":var o=r.pointerId;return wo.set(o,Hr(wo.get(o)||null,t,e,s,n,r)),!0;case"gotpointercapture":return o=r.pointerId,zo.set(o,Hr(zo.get(o)||null,t,e,s,n,r)),!0}return!1}function b1(t){var e=qn(t.target);if(e!==null){var s=nr(e);if(s!==null){if(e=s.tag,e===13){if(e=w1(s),e!==null){t.blockedOn=e,C1(t.priority,function(){I1(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=yh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);uh=n,s.target.dispatchEvent(n),uh=null}else return e=Fo(s),e!==null&&Iu(e),t.blockedOn=s,!1;e.shift()}return!0}function Oc(t,e,s){fa(t)&&s.delete(e)}function xm(){mh=!1,Pn!==null&&fa(Pn)&&(Pn=null),Ln!==null&&fa(Ln)&&(Ln=null),In!==null&&fa(In)&&(In=null),wo.forEach(Oc),zo.forEach(Oc)}function Wr(t,e){t.blockedOn===e&&(t.blockedOn=null,mh||(mh=!0,ds.unstable_scheduleCallback(ds.unstable_NormalPriority,xm)))}function ko(t){function e(r){return Wr(r,t)}if(0<Qo.length){Wr(Qo[0],t);for(var s=1;s<Qo.length;s++){var n=Qo[s];n.blockedOn===t&&(n.blockedOn=null)}}for(Pn!==null&&Wr(Pn,t),Ln!==null&&Wr(Ln,t),In!==null&&Wr(In,t),wo.forEach(e),zo.forEach(e),s=0;s<Nn.length;s++)n=Nn[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Nn.length&&(s=Nn[0],s.blockedOn===null);)b1(s),s.blockedOn===null&&Nn.shift()}var _r=xn.ReactCurrentBatchConfig,Ia=!0;function gm(t,e,s,n){var r=xe,o=_r.transition;_r.transition=null;try{xe=1,Vu(t,e,s,n)}finally{xe=r,_r.transition=o}}function wm(t,e,s,n){var r=xe,o=_r.transition;_r.transition=null;try{xe=4,Vu(t,e,s,n)}finally{xe=r,_r.transition=o}}function Vu(t,e,s,n){if(Ia){var r=yh(t,e,s,n);if(r===null)Fl(t,e,n,Va,s),Dc(t,n);else if(vm(r,t,e,s,n))n.stopPropagation();else if(Dc(t,n),e&4&&-1<ym.indexOf(t)){for(;r!==null;){var o=Fo(r);if(o!==null&&L1(o),o=yh(t,e,s,n),o===null&&Fl(t,e,n,Va,s),o===r)break;r=o}r!==null&&n.stopPropagation()}else Fl(t,e,n,null,s)}}var Va=null;function yh(t,e,s,n){if(Va=null,t=_u(n),t=qn(t),t!==null)if(e=nr(t),e===null)t=null;else if(s=e.tag,s===13){if(t=w1(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Va=t,null}function E1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(am()){case Pu:return 1;case S1:return 4;case Pa:case lm:return 16;case M1:return 536870912;default:return 16}default:return 16}}var Mn=null,Cu=null,da=null;function T1(){if(da)return da;var t,e=Cu,s=e.length,n,r="value"in Mn?Mn.value:Mn.textContent,o=r.length;for(t=0;t<s&&e[t]===r[t];t++);var a=s-t;for(n=1;n<=a&&e[s-n]===r[o-n];n++);return da=r.slice(t,1<n?1-n:void 0)}function pa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xo(){return!0}function Fc(){return!1}function ms(t){function e(s,n,r,o,a){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xo:Fc,this.isPropagationStopped=Fc,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),e}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bu=ms(Or),Oo=Ye({},Or,{view:0,detail:0}),zm=ms(Oo),Il,Vl,qr,sl=Ye({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qr&&(qr&&t.type==="mousemove"?(Il=t.screenX-qr.screenX,Vl=t.screenY-qr.screenY):Vl=Il=0,qr=t),Il)},movementY:function(t){return"movementY"in t?t.movementY:Vl}}),Rc=ms(sl),km=Ye({},sl,{dataTransfer:0}),Nm=ms(km),Sm=Ye({},Oo,{relatedTarget:0}),Cl=ms(Sm),Mm=Ye({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),_m=ms(Mm),Pm=Ye({},Or,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lm=ms(Pm),Im=Ye({},Or,{data:0}),Uc=ms(Im),Vm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Em(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bm[t])?!!e[t]:!1}function Eu(){return Em}var Tm=Ye({},Oo,{key:function(t){if(t.key){var e=Vm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(t){return t.type==="keypress"?pa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Am=ms(Tm),Dm=Ye({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jc=ms(Dm),Om=Ye({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),Fm=ms(Om),Rm=Ye({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),Um=ms(Rm),jm=Ye({},sl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bm=ms(jm),$m=[9,13,27,32],Tu=pn&&"CompositionEvent"in window,lo=null;pn&&"documentMode"in document&&(lo=document.documentMode);var Hm=pn&&"TextEvent"in window&&!lo,A1=pn&&(!Tu||lo&&8<lo&&11>=lo),Bc=String.fromCharCode(32),$c=!1;function D1(t,e){switch(t){case"keyup":return $m.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fr=!1;function Wm(t,e){switch(t){case"compositionend":return O1(e);case"keypress":return e.which!==32?null:($c=!0,Bc);case"textInput":return t=e.data,t===Bc&&$c?null:t;default:return null}}function qm(t,e){if(fr)return t==="compositionend"||!Tu&&D1(t,e)?(t=T1(),da=Cu=Mn=null,fr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return A1&&e.locale!=="ko"?null:e.data;default:return null}}var Gm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Gm[t.type]:e==="textarea"}function F1(t,e,s,n){m1(n),e=Ca(e,"onChange"),0<e.length&&(s=new bu("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var ho=null,No=null;function Qm(t){X1(t,0)}function nl(t){var e=mr(t);if(l1(e))return t}function Xm(t,e){if(t==="change")return e}var R1=!1;if(pn){var bl;if(pn){var El="oninput"in document;if(!El){var Wc=document.createElement("div");Wc.setAttribute("oninput","return;"),El=typeof Wc.oninput=="function"}bl=El}else bl=!1;R1=bl&&(!document.documentMode||9<document.documentMode)}function qc(){ho&&(ho.detachEvent("onpropertychange",U1),No=ho=null)}function U1(t){if(t.propertyName==="value"&&nl(No)){var e=[];F1(e,No,t,_u(t)),g1(Qm,e)}}function Ym(t,e,s){t==="focusin"?(qc(),ho=e,No=s,ho.attachEvent("onpropertychange",U1)):t==="focusout"&&qc()}function Km(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nl(No)}function Jm(t,e){if(t==="click")return nl(e)}function Zm(t,e){if(t==="input"||t==="change")return nl(e)}function t0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rs=typeof Object.is=="function"?Object.is:t0;function So(t,e){if(Rs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!Jl.call(e,r)||!Rs(t[r],e[r]))return!1}return!0}function Gc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qc(t,e){var s=Gc(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=Gc(s)}}function j1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?j1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function B1(){for(var t=window,e=Sa();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=Sa(t.document)}return e}function Au(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function e0(t){var e=B1(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&j1(s.ownerDocument.documentElement,s)){if(n!==null&&Au(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,o=Math.min(n.start,r);n=n.end===void 0?o:Math.min(n.end,r),!t.extend&&o>n&&(r=n,n=o,o=r),r=Qc(s,o);var a=Qc(s,n);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i0=pn&&"documentMode"in document&&11>=document.documentMode,dr=null,vh=null,uo=null,xh=!1;function Xc(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;xh||dr==null||dr!==Sa(n)||(n=dr,"selectionStart"in n&&Au(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),uo&&So(uo,n)||(uo=n,n=Ca(vh,"onSelect"),0<n.length&&(e=new bu("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=dr)))}function Yo(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var pr={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},Tl={},$1={};pn&&($1=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function rl(t){if(Tl[t])return Tl[t];if(!pr[t])return t;var e=pr[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in $1)return Tl[t]=e[s];return t}var H1=rl("animationend"),W1=rl("animationiteration"),q1=rl("animationstart"),G1=rl("transitionend"),Q1=new Map,Yc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(t,e){Q1.set(t,e),sr(e,[t])}for(var Al=0;Al<Yc.length;Al++){var Dl=Yc[Al],s0=Dl.toLowerCase(),n0=Dl[0].toUpperCase()+Dl.slice(1);On(s0,"on"+n0)}On(H1,"onAnimationEnd");On(W1,"onAnimationIteration");On(q1,"onAnimationStart");On("dblclick","onDoubleClick");On("focusin","onFocus");On("focusout","onBlur");On(G1,"onTransitionEnd");Ir("onMouseEnter",["mouseout","mouseover"]);Ir("onMouseLeave",["mouseout","mouseover"]);Ir("onPointerEnter",["pointerout","pointerover"]);Ir("onPointerLeave",["pointerout","pointerover"]);sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sr("onBeforeInput",["compositionend","keypress","textInput","paste"]);sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var so="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r0=new Set("cancel close invalid load scroll toggle".split(" ").concat(so));function Kc(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,sm(n,e,void 0,t),t.currentTarget=null}function X1(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;t:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],h=l.instance,u=l.currentTarget;if(l=l.listener,h!==o&&r.isPropagationStopped())break t;Kc(r,l,u),o=h}else for(a=0;a<n.length;a++){if(l=n[a],h=l.instance,u=l.currentTarget,l=l.listener,h!==o&&r.isPropagationStopped())break t;Kc(r,l,u),o=h}}}if(_a)throw t=dh,_a=!1,dh=null,t}function Oe(t,e){var s=e[Nh];s===void 0&&(s=e[Nh]=new Set);var n=t+"__bubble";s.has(n)||(Y1(e,t,2,!1),s.add(n))}function Ol(t,e,s){var n=0;e&&(n|=4),Y1(s,t,n,e)}var Ko="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){if(!t[Ko]){t[Ko]=!0,s1.forEach(function(s){s!=="selectionchange"&&(r0.has(s)||Ol(s,!1,t),Ol(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ko]||(e[Ko]=!0,Ol("selectionchange",!1,e))}}function Y1(t,e,s,n){switch(E1(e)){case 1:var r=gm;break;case 4:r=wm;break;default:r=Vu}s=r.bind(null,e,s,t),r=void 0,!fh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function Fl(t,e,s,n,r){var o=n;if(!(e&1)&&!(e&2)&&n!==null)t:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;l!==null;){if(a=qn(l),a===null)return;if(h=a.tag,h===5||h===6){n=o=a;continue t}l=l.parentNode}}n=n.return}g1(function(){var u=o,c=_u(s),f=[];t:{var p=Q1.get(t);if(p!==void 0){var g=bu,v=t;switch(t){case"keypress":if(pa(s)===0)break t;case"keydown":case"keyup":g=Am;break;case"focusin":v="focus",g=Cl;break;case"focusout":v="blur",g=Cl;break;case"beforeblur":case"afterblur":g=Cl;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Nm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Fm;break;case H1:case W1:case q1:g=_m;break;case G1:g=Um;break;case"scroll":g=zm;break;case"wheel":g=Bm;break;case"copy":case"cut":case"paste":g=Lm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=jc}var m=(e&4)!==0,w=!m&&t==="scroll",x=m?p!==null?p+"Capture":null:p;m=[];for(var y=u,d;y!==null;){d=y;var z=d.stateNode;if(d.tag===5&&z!==null&&(d=z,x!==null&&(z=go(y,x),z!=null&&m.push(_o(y,z,d)))),w)break;y=y.return}0<m.length&&(p=new g(p,v,null,s,c),f.push({event:p,listeners:m}))}}if(!(e&7)){t:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&s!==uh&&(v=s.relatedTarget||s.fromElement)&&(qn(v)||v[mn]))break t;if((g||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=s.relatedTarget||s.toElement,g=u,v=v?qn(v):null,v!==null&&(w=nr(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(m=Rc,z="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=jc,z="onPointerLeave",x="onPointerEnter",y="pointer"),w=g==null?p:mr(g),d=v==null?p:mr(v),p=new m(z,y+"leave",g,s,c),p.target=w,p.relatedTarget=d,z=null,qn(c)===u&&(m=new m(x,y+"enter",v,s,c),m.target=d,m.relatedTarget=w,z=m),w=z,g&&v)e:{for(m=g,x=v,y=0,d=m;d;d=ar(d))y++;for(d=0,z=x;z;z=ar(z))d++;for(;0<y-d;)m=ar(m),y--;for(;0<d-y;)x=ar(x),d--;for(;y--;){if(m===x||x!==null&&m===x.alternate)break e;m=ar(m),x=ar(x)}m=null}else m=null;g!==null&&Jc(f,p,g,m,!1),v!==null&&w!==null&&Jc(f,w,v,m,!0)}}t:{if(p=u?mr(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var k=Xm;else if(Hc(p))if(R1)k=Zm;else{k=Km;var N=Ym}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=Jm);if(k&&(k=k(t,u))){F1(f,k,s,c);break t}N&&N(t,p,u),t==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&rh(p,"number",p.value)}switch(N=u?mr(u):window,t){case"focusin":(Hc(N)||N.contentEditable==="true")&&(dr=N,vh=u,uo=null);break;case"focusout":uo=vh=dr=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,Xc(f,s,c);break;case"selectionchange":if(i0)break;case"keydown":case"keyup":Xc(f,s,c)}var S;if(Tu)t:{switch(t){case"compositionstart":var U="onCompositionStart";break t;case"compositionend":U="onCompositionEnd";break t;case"compositionupdate":U="onCompositionUpdate";break t}U=void 0}else fr?D1(t,s)&&(U="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(U="onCompositionStart");U&&(A1&&s.locale!=="ko"&&(fr||U!=="onCompositionStart"?U==="onCompositionEnd"&&fr&&(S=T1()):(Mn=c,Cu="value"in Mn?Mn.value:Mn.textContent,fr=!0)),N=Ca(u,U),0<N.length&&(U=new Uc(U,t,null,s,c),f.push({event:U,listeners:N}),S?U.data=S:(S=O1(s),S!==null&&(U.data=S)))),(S=Hm?Wm(t,s):qm(t,s))&&(u=Ca(u,"onBeforeInput"),0<u.length&&(c=new Uc("onBeforeInput","beforeinput",null,s,c),f.push({event:c,listeners:u}),c.data=S))}X1(f,e)})}function _o(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Ca(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=go(t,s),o!=null&&n.unshift(_o(t,o,r)),o=go(t,e),o!=null&&n.push(_o(t,o,r))),t=t.return}return n}function ar(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jc(t,e,s,n,r){for(var o=e._reactName,a=[];s!==null&&s!==n;){var l=s,h=l.alternate,u=l.stateNode;if(h!==null&&h===n)break;l.tag===5&&u!==null&&(l=u,r?(h=go(s,o),h!=null&&a.unshift(_o(s,h,l))):r||(h=go(s,o),h!=null&&a.push(_o(s,h,l)))),s=s.return}a.length!==0&&t.push({event:e,listeners:a})}var o0=/\r\n?/g,a0=/\u0000|\uFFFD/g;function Zc(t){return(typeof t=="string"?t:""+t).replace(o0,`
`).replace(a0,"")}function Jo(t,e,s){if(e=Zc(e),Zc(t)!==e&&s)throw Error(Y(425))}function ba(){}var gh=null,wh=null;function zh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kh=typeof setTimeout=="function"?setTimeout:void 0,l0=typeof clearTimeout=="function"?clearTimeout:void 0,tf=typeof Promise=="function"?Promise:void 0,h0=typeof queueMicrotask=="function"?queueMicrotask:typeof tf<"u"?function(t){return tf.resolve(null).then(t).catch(u0)}:kh;function u0(t){setTimeout(function(){throw t})}function Rl(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),ko(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);ko(e)}function Vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ef(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Fr=Math.random().toString(36).slice(2),en="__reactFiber$"+Fr,Po="__reactProps$"+Fr,mn="__reactContainer$"+Fr,Nh="__reactEvents$"+Fr,c0="__reactListeners$"+Fr,f0="__reactHandles$"+Fr;function qn(t){var e=t[en];if(e)return e;for(var s=t.parentNode;s;){if(e=s[mn]||s[en]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=ef(t);t!==null;){if(s=t[en])return s;t=ef(t)}return e}t=s,s=t.parentNode}return null}function Fo(t){return t=t[en]||t[mn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function ol(t){return t[Po]||null}var Sh=[],yr=-1;function Fn(t){return{current:t}}function Fe(t){0>yr||(t.current=Sh[yr],Sh[yr]=null,yr--)}function Pe(t,e){yr++,Sh[yr]=t.current,t.current=e}var Dn={},Vi=Fn(Dn),os=Fn(!1),Kn=Dn;function Vr(t,e){var s=t.type.contextTypes;if(!s)return Dn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in s)r[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function as(t){return t=t.childContextTypes,t!=null}function Ea(){Fe(os),Fe(Vi)}function sf(t,e,s){if(Vi.current!==Dn)throw Error(Y(168));Pe(Vi,e),Pe(os,s)}function K1(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(Y(108,Yp(t)||"Unknown",r));return Ye({},s,n)}function Ta(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dn,Kn=Vi.current,Pe(Vi,t),Pe(os,os.current),!0}function nf(t,e,s){var n=t.stateNode;if(!n)throw Error(Y(169));s?(t=K1(t,e,Kn),n.__reactInternalMemoizedMergedChildContext=t,Fe(os),Fe(Vi),Pe(Vi,t)):Fe(os),Pe(os,s)}var hn=null,al=!1,Ul=!1;function J1(t){hn===null?hn=[t]:hn.push(t)}function d0(t){al=!0,J1(t)}function Rn(){if(!Ul&&hn!==null){Ul=!0;var t=0,e=xe;try{var s=hn;for(xe=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}hn=null,al=!1}catch(r){throw hn!==null&&(hn=hn.slice(t+1)),N1(Pu,Rn),r}finally{xe=e,Ul=!1}}return null}var vr=[],xr=0,Aa=null,Da=0,ws=[],zs=0,Jn=null,cn=1,fn="";function jn(t,e){vr[xr++]=Da,vr[xr++]=Aa,Aa=t,Da=e}function Z1(t,e,s){ws[zs++]=cn,ws[zs++]=fn,ws[zs++]=Jn,Jn=t;var n=cn;t=fn;var r=32-Os(n)-1;n&=~(1<<r),s+=1;var o=32-Os(e)+r;if(30<o){var a=r-r%5;o=(n&(1<<a)-1).toString(32),n>>=a,r-=a,cn=1<<32-Os(e)+r|s<<r|n,fn=o+t}else cn=1<<o|s<<r|n,fn=t}function Du(t){t.return!==null&&(jn(t,1),Z1(t,1,0))}function Ou(t){for(;t===Aa;)Aa=vr[--xr],vr[xr]=null,Da=vr[--xr],vr[xr]=null;for(;t===Jn;)Jn=ws[--zs],ws[zs]=null,fn=ws[--zs],ws[zs]=null,cn=ws[--zs],ws[zs]=null}var fs=null,cs=null,He=!1,Ds=null;function td(t,e){var s=ks(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function rf(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fs=t,cs=Vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fs=t,cs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Jn!==null?{id:cn,overflow:fn}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=ks(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,fs=t,cs=null,!0):!1;default:return!1}}function Mh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _h(t){if(He){var e=cs;if(e){var s=e;if(!rf(t,e)){if(Mh(t))throw Error(Y(418));e=Vn(s.nextSibling);var n=fs;e&&rf(t,e)?td(n,s):(t.flags=t.flags&-4097|2,He=!1,fs=t)}}else{if(Mh(t))throw Error(Y(418));t.flags=t.flags&-4097|2,He=!1,fs=t}}}function of(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fs=t}function Zo(t){if(t!==fs)return!1;if(!He)return of(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zh(t.type,t.memoizedProps)),e&&(e=cs)){if(Mh(t))throw ed(),Error(Y(418));for(;e;)td(t,e),e=Vn(e.nextSibling)}if(of(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));t:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){cs=Vn(t.nextSibling);break t}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}cs=null}}else cs=fs?Vn(t.stateNode.nextSibling):null;return!0}function ed(){for(var t=cs;t;)t=Vn(t.nextSibling)}function Cr(){cs=fs=null,He=!1}function Fu(t){Ds===null?Ds=[t]:Ds.push(t)}var p0=xn.ReactCurrentBatchConfig;function Ts(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}var Oa=Fn(null),Fa=null,gr=null,Ru=null;function Uu(){Ru=gr=Fa=null}function ju(t){var e=Oa.current;Fe(Oa),t._currentValue=e}function Ph(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function Pr(t,e){Fa=t,Ru=gr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(rs=!0),t.firstContext=null)}function Ms(t){var e=t._currentValue;if(Ru!==t)if(t={context:t,memoizedValue:e,next:null},gr===null){if(Fa===null)throw Error(Y(308));gr=t,Fa.dependencies={lanes:0,firstContext:t}}else gr=gr.next=t;return e}var Gn=null;function Bu(t){Gn===null?Gn=[t]:Gn.push(t)}function id(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,Bu(e)):(s.next=r.next,r.next=s),e.interleaved=s,yn(t,n)}function yn(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var kn=!1;function $u(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cn(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ne&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,yn(t,s)}return r=n.interleaved,r===null?(e.next=e,Bu(n)):(e.next=r.next,r.next=e),n.interleaved=e,yn(t,s)}function ma(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Lu(t,s)}}function af(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,o=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};o===null?r=o=a:o=o.next=a,s=s.next}while(s!==null);o===null?r=o=e:o=o.next=e}else r=o=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Ra(t,e,s,n){var r=t.updateQueue;kn=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var h=l,u=h.next;h.next=null,a===null?o=u:a.next=u,a=h;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==a&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=h))}if(o!==null){var f=r.baseState;a=0,c=u=h=null,l=o;do{var p=l.lane,g=l.eventTime;if((n&p)===p){c!==null&&(c=c.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var v=t,m=l;switch(p=e,g=s,m.tag){case 1:if(v=m.payload,typeof v=="function"){f=v.call(g,f,p);break t}f=v;break t;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,p=typeof v=="function"?v.call(g,f,p):v,p==null)break t;f=Ye({},f,p);break t;case 2:kn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=g,h=f):c=c.next=g,a|=p;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;p=l,l=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(c===null&&(h=f),r.baseState=h,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);tr|=a,t.lanes=a,t.memoizedState=f}}function lf(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(Y(191,r));r.call(n)}}}var nd=new i1.Component().refs;function Lh(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:Ye({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var ll={isMounted:function(t){return(t=t._reactInternals)?nr(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=qi(),r=En(t),o=dn(n,r);o.payload=e,s!=null&&(o.callback=s),e=Cn(t,o,r),e!==null&&(Fs(e,t,r,n),ma(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=qi(),r=En(t),o=dn(n,r);o.tag=1,o.payload=e,s!=null&&(o.callback=s),e=Cn(t,o,r),e!==null&&(Fs(e,t,r,n),ma(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=qi(),n=En(t),r=dn(s,n);r.tag=2,e!=null&&(r.callback=e),e=Cn(t,r,n),e!==null&&(Fs(e,t,n,s),ma(e,t,n))}};function hf(t,e,s,n,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!So(s,n)||!So(r,o):!0}function rd(t,e,s){var n=!1,r=Dn,o=e.contextType;return typeof o=="object"&&o!==null?o=Ms(o):(r=as(e)?Kn:Vi.current,n=e.contextTypes,o=(n=n!=null)?Vr(t,r):Dn),e=new e(s,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ll,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function uf(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&ll.enqueueReplaceState(e,e.state,null)}function Ih(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs=nd,$u(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Ms(o):(o=as(e)?Kn:Vi.current,r.context=Vr(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Lh(t,e,o,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ll.enqueueReplaceState(r,r.state,null),Ra(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Gr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Y(309));var n=s.stateNode}if(!n)throw Error(Y(147,t));var r=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=r.refs;l===nd&&(l=r.refs={}),a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!s._owner)throw Error(Y(290,t))}return t}function ta(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cf(t){var e=t._init;return e(t._payload)}function od(t){function e(x,y){if(t){var d=x.deletions;d===null?(x.deletions=[y],x.flags|=16):d.push(y)}}function s(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function r(x,y){return x=Tn(x,y),x.index=0,x.sibling=null,x}function o(x,y,d){return x.index=d,t?(d=x.alternate,d!==null?(d=d.index,d<y?(x.flags|=2,y):d):(x.flags|=2,y)):(x.flags|=1048576,y)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,d,z){return y===null||y.tag!==6?(y=Gl(d,x.mode,z),y.return=x,y):(y=r(y,d),y.return=x,y)}function h(x,y,d,z){var k=d.type;return k===cr?c(x,y,d.props.children,z,d.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===zn&&cf(k)===y.type)?(z=r(y,d.props),z.ref=Gr(x,y,d),z.return=x,z):(z=za(d.type,d.key,d.props,null,x.mode,z),z.ref=Gr(x,y,d),z.return=x,z)}function u(x,y,d,z){return y===null||y.tag!==4||y.stateNode.containerInfo!==d.containerInfo||y.stateNode.implementation!==d.implementation?(y=Ql(d,x.mode,z),y.return=x,y):(y=r(y,d.children||[]),y.return=x,y)}function c(x,y,d,z,k){return y===null||y.tag!==7?(y=Yn(d,x.mode,z,k),y.return=x,y):(y=r(y,d),y.return=x,y)}function f(x,y,d){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Gl(""+y,x.mode,d),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case $o:return d=za(y.type,y.key,y.props,null,x.mode,d),d.ref=Gr(x,null,y),d.return=x,d;case ur:return y=Ql(y,x.mode,d),y.return=x,y;case zn:var z=y._init;return f(x,z(y._payload),d)}if(eo(y)||Br(y))return y=Yn(y,x.mode,d,null),y.return=x,y;ta(x,y)}return null}function p(x,y,d,z){var k=y!==null?y.key:null;if(typeof d=="string"&&d!==""||typeof d=="number")return k!==null?null:l(x,y,""+d,z);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case $o:return d.key===k?h(x,y,d,z):null;case ur:return d.key===k?u(x,y,d,z):null;case zn:return k=d._init,p(x,y,k(d._payload),z)}if(eo(d)||Br(d))return k!==null?null:c(x,y,d,z,null);ta(x,d)}return null}function g(x,y,d,z,k){if(typeof z=="string"&&z!==""||typeof z=="number")return x=x.get(d)||null,l(y,x,""+z,k);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case $o:return x=x.get(z.key===null?d:z.key)||null,h(y,x,z,k);case ur:return x=x.get(z.key===null?d:z.key)||null,u(y,x,z,k);case zn:var N=z._init;return g(x,y,d,N(z._payload),k)}if(eo(z)||Br(z))return x=x.get(d)||null,c(y,x,z,k,null);ta(y,z)}return null}function v(x,y,d,z){for(var k=null,N=null,S=y,U=y=0,O=null;S!==null&&U<d.length;U++){S.index>U?(O=S,S=null):O=S.sibling;var M=p(x,S,d[U],z);if(M===null){S===null&&(S=O);break}t&&S&&M.alternate===null&&e(x,S),y=o(M,y,U),N===null?k=M:N.sibling=M,N=M,S=O}if(U===d.length)return s(x,S),He&&jn(x,U),k;if(S===null){for(;U<d.length;U++)S=f(x,d[U],z),S!==null&&(y=o(S,y,U),N===null?k=S:N.sibling=S,N=S);return He&&jn(x,U),k}for(S=n(x,S);U<d.length;U++)O=g(S,x,U,d[U],z),O!==null&&(t&&O.alternate!==null&&S.delete(O.key===null?U:O.key),y=o(O,y,U),N===null?k=O:N.sibling=O,N=O);return t&&S.forEach(function(F){return e(x,F)}),He&&jn(x,U),k}function m(x,y,d,z){var k=Br(d);if(typeof k!="function")throw Error(Y(150));if(d=k.call(d),d==null)throw Error(Y(151));for(var N=k=null,S=y,U=y=0,O=null,M=d.next();S!==null&&!M.done;U++,M=d.next()){S.index>U?(O=S,S=null):O=S.sibling;var F=p(x,S,M.value,z);if(F===null){S===null&&(S=O);break}t&&S&&F.alternate===null&&e(x,S),y=o(F,y,U),N===null?k=F:N.sibling=F,N=F,S=O}if(M.done)return s(x,S),He&&jn(x,U),k;if(S===null){for(;!M.done;U++,M=d.next())M=f(x,M.value,z),M!==null&&(y=o(M,y,U),N===null?k=M:N.sibling=M,N=M);return He&&jn(x,U),k}for(S=n(x,S);!M.done;U++,M=d.next())M=g(S,x,U,M.value,z),M!==null&&(t&&M.alternate!==null&&S.delete(M.key===null?U:M.key),y=o(M,y,U),N===null?k=M:N.sibling=M,N=M);return t&&S.forEach(function(A){return e(x,A)}),He&&jn(x,U),k}function w(x,y,d,z){if(typeof d=="object"&&d!==null&&d.type===cr&&d.key===null&&(d=d.props.children),typeof d=="object"&&d!==null){switch(d.$$typeof){case $o:t:{for(var k=d.key,N=y;N!==null;){if(N.key===k){if(k=d.type,k===cr){if(N.tag===7){s(x,N.sibling),y=r(N,d.props.children),y.return=x,x=y;break t}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===zn&&cf(k)===N.type){s(x,N.sibling),y=r(N,d.props),y.ref=Gr(x,N,d),y.return=x,x=y;break t}s(x,N);break}else e(x,N);N=N.sibling}d.type===cr?(y=Yn(d.props.children,x.mode,z,d.key),y.return=x,x=y):(z=za(d.type,d.key,d.props,null,x.mode,z),z.ref=Gr(x,y,d),z.return=x,x=z)}return a(x);case ur:t:{for(N=d.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===d.containerInfo&&y.stateNode.implementation===d.implementation){s(x,y.sibling),y=r(y,d.children||[]),y.return=x,x=y;break t}else{s(x,y);break}else e(x,y);y=y.sibling}y=Ql(d,x.mode,z),y.return=x,x=y}return a(x);case zn:return N=d._init,w(x,y,N(d._payload),z)}if(eo(d))return v(x,y,d,z);if(Br(d))return m(x,y,d,z);ta(x,d)}return typeof d=="string"&&d!==""||typeof d=="number"?(d=""+d,y!==null&&y.tag===6?(s(x,y.sibling),y=r(y,d),y.return=x,x=y):(s(x,y),y=Gl(d,x.mode,z),y.return=x,x=y),a(x)):s(x,y)}return w}var br=od(!0),ad=od(!1),Ro={},nn=Fn(Ro),Lo=Fn(Ro),Io=Fn(Ro);function Qn(t){if(t===Ro)throw Error(Y(174));return t}function Hu(t,e){switch(Pe(Io,e),Pe(Lo,t),Pe(nn,Ro),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ah(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ah(e,t)}Fe(nn),Pe(nn,e)}function Er(){Fe(nn),Fe(Lo),Fe(Io)}function ld(t){Qn(Io.current);var e=Qn(nn.current),s=ah(e,t.type);e!==s&&(Pe(Lo,t),Pe(nn,s))}function Wu(t){Lo.current===t&&(Fe(nn),Fe(Lo))}var Qe=Fn(0);function Ua(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jl=[];function qu(){for(var t=0;t<jl.length;t++)jl[t]._workInProgressVersionPrimary=null;jl.length=0}var ya=xn.ReactCurrentDispatcher,Bl=xn.ReactCurrentBatchConfig,Zn=0,Xe=null,ri=null,vi=null,ja=!1,co=!1,Vo=0,m0=0;function Pi(){throw Error(Y(321))}function Gu(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!Rs(t[s],e[s]))return!1;return!0}function Qu(t,e,s,n,r,o){if(Zn=o,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ya.current=t===null||t.memoizedState===null?g0:w0,t=s(n,r),co){o=0;do{if(co=!1,Vo=0,25<=o)throw Error(Y(301));o+=1,vi=ri=null,e.updateQueue=null,ya.current=z0,t=s(n,r)}while(co)}if(ya.current=Ba,e=ri!==null&&ri.next!==null,Zn=0,vi=ri=Xe=null,ja=!1,e)throw Error(Y(300));return t}function Xu(){var t=Vo!==0;return Vo=0,t}function Js(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?Xe.memoizedState=vi=t:vi=vi.next=t,vi}function _s(){if(ri===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=ri.next;var e=vi===null?Xe.memoizedState:vi.next;if(e!==null)vi=e,ri=t;else{if(t===null)throw Error(Y(310));ri=t,t={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},vi===null?Xe.memoizedState=vi=t:vi=vi.next=t}return vi}function Co(t,e){return typeof e=="function"?e(t):e}function $l(t){var e=_s(),s=e.queue;if(s===null)throw Error(Y(311));s.lastRenderedReducer=t;var n=ri,r=n.baseQueue,o=s.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}n.baseQueue=r=o,s.pending=null}if(r!==null){o=r.next,n=n.baseState;var l=a=null,h=null,u=o;do{var c=u.lane;if((Zn&c)===c)h!==null&&(h=h.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};h===null?(l=h=f,a=n):h=h.next=f,Xe.lanes|=c,tr|=c}u=u.next}while(u!==null&&u!==o);h===null?a=n:h.next=l,Rs(n,e.memoizedState)||(rs=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=h,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do o=r.lane,Xe.lanes|=o,tr|=o,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Hl(t){var e=_s(),s=e.queue;if(s===null)throw Error(Y(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,o=e.memoizedState;if(r!==null){s.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Rs(o,e.memoizedState)||(rs=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),s.lastRenderedState=o}return[o,n]}function hd(){}function ud(t,e){var s=Xe,n=_s(),r=e(),o=!Rs(n.memoizedState,r);if(o&&(n.memoizedState=r,rs=!0),n=n.queue,Yu(dd.bind(null,s,n,t),[t]),n.getSnapshot!==e||o||vi!==null&&vi.memoizedState.tag&1){if(s.flags|=2048,bo(9,fd.bind(null,s,n,r,e),void 0,null),gi===null)throw Error(Y(349));Zn&30||cd(s,e,r)}return r}function cd(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function fd(t,e,s,n){e.value=s,e.getSnapshot=n,pd(e)&&md(t)}function dd(t,e,s){return s(function(){pd(e)&&md(t)})}function pd(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Rs(t,s)}catch{return!0}}function md(t){var e=yn(t,1);e!==null&&Fs(e,t,1,-1)}function ff(t){var e=Js();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=x0.bind(null,Xe,t),[e.memoizedState,t]}function bo(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function yd(){return _s().memoizedState}function va(t,e,s,n){var r=Js();Xe.flags|=t,r.memoizedState=bo(1|e,s,void 0,n===void 0?null:n)}function hl(t,e,s,n){var r=_s();n=n===void 0?null:n;var o=void 0;if(ri!==null){var a=ri.memoizedState;if(o=a.destroy,n!==null&&Gu(n,a.deps)){r.memoizedState=bo(e,s,o,n);return}}Xe.flags|=t,r.memoizedState=bo(1|e,s,o,n)}function df(t,e){return va(8390656,8,t,e)}function Yu(t,e){return hl(2048,8,t,e)}function vd(t,e){return hl(4,2,t,e)}function xd(t,e){return hl(4,4,t,e)}function gd(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wd(t,e,s){return s=s!=null?s.concat([t]):null,hl(4,4,gd.bind(null,e,t),s)}function Ku(){}function zd(t,e){var s=_s();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&Gu(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function kd(t,e){var s=_s();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&Gu(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function Nd(t,e,s){return Zn&21?(Rs(s,e)||(s=_1(),Xe.lanes|=s,tr|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,rs=!0),t.memoizedState=s)}function y0(t,e){var s=xe;xe=s!==0&&4>s?s:4,t(!0);var n=Bl.transition;Bl.transition={};try{t(!1),e()}finally{xe=s,Bl.transition=n}}function Sd(){return _s().memoizedState}function v0(t,e,s){var n=En(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Md(t))_d(e,s);else if(s=id(t,e,s,n),s!==null){var r=qi();Fs(s,t,n,r),Pd(s,e,n)}}function x0(t,e,s){var n=En(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Md(t))_d(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,s);if(r.hasEagerState=!0,r.eagerState=l,Rs(l,a)){var h=e.interleaved;h===null?(r.next=r,Bu(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}s=id(t,e,r,n),s!==null&&(r=qi(),Fs(s,t,n,r),Pd(s,e,n))}}function Md(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function _d(t,e){co=ja=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function Pd(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Lu(t,s)}}var Ba={readContext:Ms,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useInsertionEffect:Pi,useLayoutEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useMutableSource:Pi,useSyncExternalStore:Pi,useId:Pi,unstable_isNewReconciler:!1},g0={readContext:Ms,useCallback:function(t,e){return Js().memoizedState=[t,e===void 0?null:e],t},useContext:Ms,useEffect:df,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,va(4194308,4,gd.bind(null,e,t),s)},useLayoutEffect:function(t,e){return va(4194308,4,t,e)},useInsertionEffect:function(t,e){return va(4,2,t,e)},useMemo:function(t,e){var s=Js();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=Js();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=v0.bind(null,Xe,t),[n.memoizedState,t]},useRef:function(t){var e=Js();return t={current:t},e.memoizedState=t},useState:ff,useDebugValue:Ku,useDeferredValue:function(t){return Js().memoizedState=t},useTransition:function(){var t=ff(!1),e=t[0];return t=y0.bind(null,t[1]),Js().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=Xe,r=Js();if(He){if(s===void 0)throw Error(Y(407));s=s()}else{if(s=e(),gi===null)throw Error(Y(349));Zn&30||cd(n,e,s)}r.memoizedState=s;var o={value:s,getSnapshot:e};return r.queue=o,df(dd.bind(null,n,o,t),[t]),n.flags|=2048,bo(9,fd.bind(null,n,o,s,e),void 0,null),s},useId:function(){var t=Js(),e=gi.identifierPrefix;if(He){var s=fn,n=cn;s=(n&~(1<<32-Os(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Vo++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=m0++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},w0={readContext:Ms,useCallback:zd,useContext:Ms,useEffect:Yu,useImperativeHandle:wd,useInsertionEffect:vd,useLayoutEffect:xd,useMemo:kd,useReducer:$l,useRef:yd,useState:function(){return $l(Co)},useDebugValue:Ku,useDeferredValue:function(t){var e=_s();return Nd(e,ri.memoizedState,t)},useTransition:function(){var t=$l(Co)[0],e=_s().memoizedState;return[t,e]},useMutableSource:hd,useSyncExternalStore:ud,useId:Sd,unstable_isNewReconciler:!1},z0={readContext:Ms,useCallback:zd,useContext:Ms,useEffect:Yu,useImperativeHandle:wd,useInsertionEffect:vd,useLayoutEffect:xd,useMemo:kd,useReducer:Hl,useRef:yd,useState:function(){return Hl(Co)},useDebugValue:Ku,useDeferredValue:function(t){var e=_s();return ri===null?e.memoizedState=t:Nd(e,ri.memoizedState,t)},useTransition:function(){var t=Hl(Co)[0],e=_s().memoizedState;return[t,e]},useMutableSource:hd,useSyncExternalStore:ud,useId:Sd,unstable_isNewReconciler:!1};function Tr(t,e){try{var s="",n=e;do s+=Xp(n),n=n.return;while(n);var r=s}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Wl(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Vh(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var k0=typeof WeakMap=="function"?WeakMap:Map;function Ld(t,e,s){s=dn(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Ha||(Ha=!0,Uh=n),Vh(t,e)},s}function Id(t,e,s){s=dn(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){Vh(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(s.callback=function(){Vh(t,e),typeof n!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),s}function pf(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new k0;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=D0.bind(null,t,e,s),e.then(t,t))}function mf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yf(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=dn(-1,1),e.tag=2,Cn(s,e,1))),s.lanes|=1),t)}var N0=xn.ReactCurrentOwner,rs=!1;function Wi(t,e,s,n){e.child=t===null?ad(e,null,s,n):br(e,t.child,s,n)}function vf(t,e,s,n,r){s=s.render;var o=e.ref;return Pr(e,r),n=Qu(t,e,s,n,o,r),s=Xu(),t!==null&&!rs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,vn(t,e,r)):(He&&s&&Du(e),e.flags|=1,Wi(t,e,n,r),e.child)}function xf(t,e,s,n,r){if(t===null){var o=s.type;return typeof o=="function"&&!rc(o)&&o.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=o,Vd(t,e,o,n,r)):(t=za(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(s=s.compare,s=s!==null?s:So,s(a,n)&&t.ref===e.ref)return vn(t,e,r)}return e.flags|=1,t=Tn(o,n),t.ref=e.ref,t.return=e,e.child=t}function Vd(t,e,s,n,r){if(t!==null){var o=t.memoizedProps;if(So(o,n)&&t.ref===e.ref)if(rs=!1,e.pendingProps=n=o,(t.lanes&r)!==0)t.flags&131072&&(rs=!0);else return e.lanes=t.lanes,vn(t,e,r)}return Ch(t,e,s,n,r)}function Cd(t,e,s){var n=e.pendingProps,r=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(zr,us),us|=s;else{if(!(s&1073741824))return t=o!==null?o.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(zr,us),us|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:s,Pe(zr,us),us|=n}else o!==null?(n=o.baseLanes|s,e.memoizedState=null):n=s,Pe(zr,us),us|=n;return Wi(t,e,r,s),e.child}function bd(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function Ch(t,e,s,n,r){var o=as(s)?Kn:Vi.current;return o=Vr(e,o),Pr(e,r),s=Qu(t,e,s,n,o,r),n=Xu(),t!==null&&!rs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,vn(t,e,r)):(He&&n&&Du(e),e.flags|=1,Wi(t,e,s,r),e.child)}function gf(t,e,s,n,r){if(as(s)){var o=!0;Ta(e)}else o=!1;if(Pr(e,r),e.stateNode===null)xa(t,e),rd(e,s,n),Ih(e,s,n,r),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var h=a.context,u=s.contextType;typeof u=="object"&&u!==null?u=Ms(u):(u=as(s)?Kn:Vi.current,u=Vr(e,u));var c=s.getDerivedStateFromProps,f=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||h!==u)&&uf(e,a,n,u),kn=!1;var p=e.memoizedState;a.state=p,Ra(e,n,a,r),h=e.memoizedState,l!==n||p!==h||os.current||kn?(typeof c=="function"&&(Lh(e,s,c,n),h=e.memoizedState),(l=kn||hf(e,s,l,n,p,h,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=h),a.props=n,a.state=h,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,sd(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ts(e.type,l),a.props=u,f=e.pendingProps,p=a.context,h=s.contextType,typeof h=="object"&&h!==null?h=Ms(h):(h=as(s)?Kn:Vi.current,h=Vr(e,h));var g=s.getDerivedStateFromProps;(c=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==h)&&uf(e,a,n,h),kn=!1,p=e.memoizedState,a.state=p,Ra(e,n,a,r);var v=e.memoizedState;l!==f||p!==v||os.current||kn?(typeof g=="function"&&(Lh(e,s,g,n),v=e.memoizedState),(u=kn||hf(e,s,u,n,p,v,h)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=h,n=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return bh(t,e,s,n,o,r)}function bh(t,e,s,n,r,o){bd(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return r&&nf(e,s,!1),vn(t,e,o);n=e.stateNode,N0.current=e;var l=a&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=br(e,t.child,null,o),e.child=br(e,null,l,o)):Wi(t,e,l,o),e.memoizedState=n.state,r&&nf(e,s,!0),e.child}function Ed(t){var e=t.stateNode;e.pendingContext?sf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sf(t,e.context,!1),Hu(t,e.containerInfo)}function wf(t,e,s,n,r){return Cr(),Fu(r),e.flags|=256,Wi(t,e,s,n),e.child}var Eh={dehydrated:null,treeContext:null,retryLane:0};function Th(t){return{baseLanes:t,cachePool:null,transitions:null}}function Td(t,e,s){var n=e.pendingProps,r=Qe.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Pe(Qe,r&1),t===null)return _h(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,o?(n=e.mode,o=e.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=fl(a,n,0,null),t=Yn(t,n,s,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Th(s),e.memoizedState=Eh,t):Ju(e,a));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return S0(t,e,a,n,l,r,s);if(o){o=n.fallback,a=e.mode,r=t.child,l=r.sibling;var h={mode:"hidden",children:n.children};return!(a&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=h,e.deletions=null):(n=Tn(r,h),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?o=Tn(l,o):(o=Yn(o,a,s,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,a=t.child.memoizedState,a=a===null?Th(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~s,e.memoizedState=Eh,n}return o=t.child,t=o.sibling,n=Tn(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function Ju(t,e){return e=fl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ea(t,e,s,n){return n!==null&&Fu(n),br(e,t.child,null,s),t=Ju(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function S0(t,e,s,n,r,o,a){if(s)return e.flags&256?(e.flags&=-257,n=Wl(Error(Y(422))),ea(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,r=e.mode,n=fl({mode:"visible",children:n.children},r,0,null),o=Yn(o,r,a,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&br(e,t.child,null,a),e.child.memoizedState=Th(a),e.memoizedState=Eh,o);if(!(e.mode&1))return ea(t,e,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(Y(419)),n=Wl(o,n,void 0),ea(t,e,a,n)}if(l=(a&t.childLanes)!==0,rs||l){if(n=gi,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,yn(t,r),Fs(n,t,r,-1))}return nc(),n=Wl(Error(Y(421))),ea(t,e,a,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=O0.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,cs=Vn(r.nextSibling),fs=e,He=!0,Ds=null,t!==null&&(ws[zs++]=cn,ws[zs++]=fn,ws[zs++]=Jn,cn=t.id,fn=t.overflow,Jn=e),e=Ju(e,n.children),e.flags|=4096,e)}function zf(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ph(t.return,e,s)}function ql(t,e,s,n,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=s,o.tailMode=r)}function Ad(t,e,s){var n=e.pendingProps,r=n.revealOrder,o=n.tail;if(Wi(t,e,n.children,s),n=Qe.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zf(t,s,e);else if(t.tag===19)zf(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Pe(Qe,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&Ua(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),ql(e,!1,r,s,o);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ua(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}ql(e,!0,s,null,o);break;case"together":ql(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vn(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),tr|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,s=Tn(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Tn(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function M0(t,e,s){switch(e.tag){case 3:Ed(e),Cr();break;case 5:ld(e);break;case 1:as(e.type)&&Ta(e);break;case 4:Hu(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;Pe(Oa,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Pe(Qe,Qe.current&1),e.flags|=128,null):s&e.child.childLanes?Td(t,e,s):(Pe(Qe,Qe.current&1),t=vn(t,e,s),t!==null?t.sibling:null);Pe(Qe,Qe.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Ad(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Pe(Qe,Qe.current),n)break;return null;case 22:case 23:return e.lanes=0,Cd(t,e,s)}return vn(t,e,s)}var Dd,Ah,Od,Fd;Dd=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Ah=function(){};Od=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,Qn(nn.current);var o=null;switch(s){case"input":r=sh(t,r),n=sh(t,n),o=[];break;case"select":r=Ye({},r,{value:void 0}),n=Ye({},n,{value:void 0}),o=[];break;case"textarea":r=oh(t,r),n=oh(t,n),o=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ba)}lh(s,n);var a;s=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vo.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var h=n[u];if(l=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&h!==l&&(h!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in h)h.hasOwnProperty(a)&&l[a]!==h[a]&&(s||(s={}),s[a]=h[a])}else s||(o||(o=[]),o.push(u,s)),s=h;else u==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,l=l?l.__html:void 0,h!=null&&l!==h&&(o=o||[]).push(u,h)):u==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(u,""+h):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vo.hasOwnProperty(u)?(h!=null&&u==="onScroll"&&Oe("scroll",t),o||l===h||(o=[])):(o=o||[]).push(u,h))}s&&(o=o||[]).push("style",s);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};Fd=function(t,e,s,n){s!==n&&(e.flags|=4)};function Qr(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Li(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function _0(t,e,s){var n=e.pendingProps;switch(Ou(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(e),null;case 1:return as(e.type)&&Ea(),Li(e),null;case 3:return n=e.stateNode,Er(),Fe(os),Fe(Vi),qu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Zo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ds!==null&&($h(Ds),Ds=null))),Ah(t,e),Li(e),null;case 5:Wu(e);var r=Qn(Io.current);if(s=e.type,t!==null&&e.stateNode!=null)Od(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Y(166));return Li(e),null}if(t=Qn(nn.current),Zo(e)){n=e.stateNode,s=e.type;var o=e.memoizedProps;switch(n[en]=e,n[Po]=o,t=(e.mode&1)!==0,s){case"dialog":Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":case"embed":Oe("load",n);break;case"video":case"audio":for(r=0;r<so.length;r++)Oe(so[r],n);break;case"source":Oe("error",n);break;case"img":case"image":case"link":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"input":Ic(n,o),Oe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Oe("invalid",n);break;case"textarea":Cc(n,o),Oe("invalid",n)}lh(s,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&Jo(n.textContent,l,t),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Jo(n.textContent,l,t),r=["children",""+l]):vo.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Oe("scroll",n)}switch(s){case"input":Ho(n),Vc(n,o,!0);break;case"textarea":Ho(n),bc(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=ba)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c1(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(s,{is:n.is}):(t=a.createElement(s),s==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,s),t[en]=e,t[Po]=n,Dd(t,e,!1,!1),e.stateNode=t;t:{switch(a=hh(s,n),s){case"dialog":Oe("cancel",t),Oe("close",t),r=n;break;case"iframe":case"object":case"embed":Oe("load",t),r=n;break;case"video":case"audio":for(r=0;r<so.length;r++)Oe(so[r],t);r=n;break;case"source":Oe("error",t),r=n;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),r=n;break;case"details":Oe("toggle",t),r=n;break;case"input":Ic(t,n),r=sh(t,n),Oe("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=Ye({},n,{value:void 0}),Oe("invalid",t);break;case"textarea":Cc(t,n),r=oh(t,n),Oe("invalid",t);break;default:r=n}lh(s,r),l=r;for(o in l)if(l.hasOwnProperty(o)){var h=l[o];o==="style"?p1(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&f1(t,h)):o==="children"?typeof h=="string"?(s!=="textarea"||h!=="")&&xo(t,h):typeof h=="number"&&xo(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vo.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Oe("scroll",t):h!=null&&ku(t,o,h,a))}switch(s){case"input":Ho(t),Vc(t,n,!1);break;case"textarea":Ho(t),bc(t);break;case"option":n.value!=null&&t.setAttribute("value",""+An(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Nr(t,!!n.multiple,o,!1):n.defaultValue!=null&&Nr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ba)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Li(e),null;case 6:if(t&&e.stateNode!=null)Fd(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Y(166));if(s=Qn(Io.current),Qn(nn.current),Zo(e)){if(n=e.stateNode,s=e.memoizedProps,n[en]=e,(o=n.nodeValue!==s)&&(t=fs,t!==null))switch(t.tag){case 3:Jo(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jo(n.nodeValue,s,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[en]=e,e.stateNode=n}return Li(e),null;case 13:if(Fe(Qe),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&cs!==null&&e.mode&1&&!(e.flags&128))ed(),Cr(),e.flags|=98560,o=!1;else if(o=Zo(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[en]=e}else Cr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Li(e),o=!1}else Ds!==null&&($h(Ds),Ds=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?ai===0&&(ai=3):nc())),e.updateQueue!==null&&(e.flags|=4),Li(e),null);case 4:return Er(),Ah(t,e),t===null&&Mo(e.stateNode.containerInfo),Li(e),null;case 10:return ju(e.type._context),Li(e),null;case 17:return as(e.type)&&Ea(),Li(e),null;case 19:if(Fe(Qe),o=e.memoizedState,o===null)return Li(e),null;if(n=(e.flags&128)!==0,a=o.rendering,a===null)if(n)Qr(o,!1);else{if(ai!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ua(t),a!==null){for(e.flags|=128,Qr(o,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)o=s,t=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Pe(Qe,Qe.current&1|2),e.child}t=t.sibling}o.tail!==null&&ti()>Ar&&(e.flags|=128,n=!0,Qr(o,!1),e.lanes=4194304)}else{if(!n)if(t=Ua(a),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Qr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!He)return Li(e),null}else 2*ti()-o.renderingStartTime>Ar&&s!==1073741824&&(e.flags|=128,n=!0,Qr(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(s=o.last,s!==null?s.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ti(),e.sibling=null,s=Qe.current,Pe(Qe,n?s&1|2:s&1),e):(Li(e),null);case 22:case 23:return sc(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?us&1073741824&&(Li(e),e.subtreeFlags&6&&(e.flags|=8192)):Li(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function P0(t,e){switch(Ou(e),e.tag){case 1:return as(e.type)&&Ea(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Er(),Fe(os),Fe(Vi),qu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wu(e),null;case 13:if(Fe(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Cr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(Qe),null;case 4:return Er(),null;case 10:return ju(e.type._context),null;case 22:case 23:return sc(),null;case 24:return null;default:return null}}var ia=!1,Ii=!1,L0=typeof WeakSet=="function"?WeakSet:Set,ct=null;function wr(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ke(t,e,n)}else s.current=null}function Dh(t,e,s){try{s()}catch(n){Ke(t,e,n)}}var kf=!1;function I0(t,e){if(gh=Ia,t=B1(),Au(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else t:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{s.nodeType,o.nodeType}catch{s=null;break t}var a=0,l=-1,h=-1,u=0,c=0,f=t,p=null;e:for(;;){for(var g;f!==s||r!==0&&f.nodeType!==3||(l=a+r),f!==o||n!==0&&f.nodeType!==3||(h=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break e;if(p===s&&++u===r&&(l=a),p===o&&++c===n&&(h=a),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}s=l===-1||h===-1?null:{start:l,end:h}}else s=null}s=s||{start:0,end:0}}else s=null;for(wh={focusedElem:t,selectionRange:s},Ia=!1,ct=e;ct!==null;)if(e=ct,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ct=t;else for(;ct!==null;){e=ct;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,w=v.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ts(e.type,m),w);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var d=e.stateNode.containerInfo;d.nodeType===1?d.textContent="":d.nodeType===9&&d.documentElement&&d.removeChild(d.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(z){Ke(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,ct=t;break}ct=e.return}return v=kf,kf=!1,v}function fo(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Dh(e,s,o)}r=r.next}while(r!==n)}}function ul(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function Oh(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Rd(t){var e=t.alternate;e!==null&&(t.alternate=null,Rd(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[en],delete e[Po],delete e[Nh],delete e[c0],delete e[f0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ud(t){return t.tag===5||t.tag===3||t.tag===4}function Nf(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Ud(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fh(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=ba));else if(n!==4&&(t=t.child,t!==null))for(Fh(t,e,s),t=t.sibling;t!==null;)Fh(t,e,s),t=t.sibling}function Rh(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Rh(t,e,s),t=t.sibling;t!==null;)Rh(t,e,s),t=t.sibling}var wi=null,As=!1;function gn(t,e,s){for(s=s.child;s!==null;)jd(t,e,s),s=s.sibling}function jd(t,e,s){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(il,s)}catch{}switch(s.tag){case 5:Ii||wr(s,e);case 6:var n=wi,r=As;wi=null,gn(t,e,s),wi=n,As=r,wi!==null&&(As?(t=wi,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):wi.removeChild(s.stateNode));break;case 18:wi!==null&&(As?(t=wi,s=s.stateNode,t.nodeType===8?Rl(t.parentNode,s):t.nodeType===1&&Rl(t,s),ko(t)):Rl(wi,s.stateNode));break;case 4:n=wi,r=As,wi=s.stateNode.containerInfo,As=!0,gn(t,e,s),wi=n,As=r;break;case 0:case 11:case 14:case 15:if(!Ii&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Dh(s,e,a),r=r.next}while(r!==n)}gn(t,e,s);break;case 1:if(!Ii&&(wr(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Ke(s,e,l)}gn(t,e,s);break;case 21:gn(t,e,s);break;case 22:s.mode&1?(Ii=(n=Ii)||s.memoizedState!==null,gn(t,e,s),Ii=n):gn(t,e,s);break;default:gn(t,e,s)}}function Sf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new L0),e.forEach(function(n){var r=F0.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function bs(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var o=t,a=e,l=a;t:for(;l!==null;){switch(l.tag){case 5:wi=l.stateNode,As=!1;break t;case 3:wi=l.stateNode.containerInfo,As=!0;break t;case 4:wi=l.stateNode.containerInfo,As=!0;break t}l=l.return}if(wi===null)throw Error(Y(160));jd(o,a,r),wi=null,As=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(u){Ke(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bd(e,t),e=e.sibling}function Bd(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bs(e,t),Ys(t),n&4){try{fo(3,t,t.return),ul(3,t)}catch(m){Ke(t,t.return,m)}try{fo(5,t,t.return)}catch(m){Ke(t,t.return,m)}}break;case 1:bs(e,t),Ys(t),n&512&&s!==null&&wr(s,s.return);break;case 5:if(bs(e,t),Ys(t),n&512&&s!==null&&wr(s,s.return),t.flags&32){var r=t.stateNode;try{xo(r,"")}catch(m){Ke(t,t.return,m)}}if(n&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=s!==null?s.memoizedProps:o,l=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&h1(r,o),hh(l,a);var u=hh(l,o);for(a=0;a<h.length;a+=2){var c=h[a],f=h[a+1];c==="style"?p1(r,f):c==="dangerouslySetInnerHTML"?f1(r,f):c==="children"?xo(r,f):ku(r,c,f,u)}switch(l){case"input":nh(r,o);break;case"textarea":u1(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Nr(r,!!o.multiple,g,!1):p!==!!o.multiple&&(o.defaultValue!=null?Nr(r,!!o.multiple,o.defaultValue,!0):Nr(r,!!o.multiple,o.multiple?[]:"",!1))}r[Po]=o}catch(m){Ke(t,t.return,m)}}break;case 6:if(bs(e,t),Ys(t),n&4){if(t.stateNode===null)throw Error(Y(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(m){Ke(t,t.return,m)}}break;case 3:if(bs(e,t),Ys(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{ko(e.containerInfo)}catch(m){Ke(t,t.return,m)}break;case 4:bs(e,t),Ys(t);break;case 13:bs(e,t),Ys(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(ec=ti())),n&4&&Sf(t);break;case 22:if(c=s!==null&&s.memoizedState!==null,t.mode&1?(Ii=(u=Ii)||c,bs(e,t),Ii=u):bs(e,t),Ys(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ct=t,c=t.child;c!==null;){for(f=ct=c;ct!==null;){switch(p=ct,g=p.child,p.tag){case 0:case 11:case 14:case 15:fo(4,p,p.return);break;case 1:wr(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,s=p.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(m){Ke(n,s,m)}}break;case 5:wr(p,p.return);break;case 22:if(p.memoizedState!==null){_f(f);continue}}g!==null?(g.return=p,ct=g):_f(f)}c=c.sibling}t:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{r=f.stateNode,u?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,h=f.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,l.style.display=d1("display",a))}catch(m){Ke(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Ke(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break t;for(;f.sibling===null;){if(f.return===null||f.return===t)break t;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:bs(e,t),Ys(t),n&4&&Sf(t);break;case 21:break;default:bs(e,t),Ys(t)}}function Ys(t){var e=t.flags;if(e&2){try{t:{for(var s=t.return;s!==null;){if(Ud(s)){var n=s;break t}s=s.return}throw Error(Y(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(xo(r,""),n.flags&=-33);var o=Nf(t);Rh(t,o,r);break;case 3:case 4:var a=n.stateNode.containerInfo,l=Nf(t);Fh(t,l,a);break;default:throw Error(Y(161))}}catch(h){Ke(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function V0(t,e,s){ct=t,$d(t)}function $d(t,e,s){for(var n=(t.mode&1)!==0;ct!==null;){var r=ct,o=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||ia;if(!a){var l=r.alternate,h=l!==null&&l.memoizedState!==null||Ii;l=ia;var u=Ii;if(ia=a,(Ii=h)&&!u)for(ct=r;ct!==null;)a=ct,h=a.child,a.tag===22&&a.memoizedState!==null?Pf(r):h!==null?(h.return=a,ct=h):Pf(r);for(;o!==null;)ct=o,$d(o),o=o.sibling;ct=r,ia=l,Ii=u}Mf(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ct=o):Mf(t)}}function Mf(t){for(;ct!==null;){var e=ct;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ii||ul(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ii)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:Ts(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&lf(e,o,n);break;case 3:var a=e.updateQueue;if(a!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}lf(e,a,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&s.focus();break;case"img":h.src&&(s.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&ko(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Ii||e.flags&512&&Oh(e)}catch(p){Ke(e,e.return,p)}}if(e===t){ct=null;break}if(s=e.sibling,s!==null){s.return=e.return,ct=s;break}ct=e.return}}function _f(t){for(;ct!==null;){var e=ct;if(e===t){ct=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ct=s;break}ct=e.return}}function Pf(t){for(;ct!==null;){var e=ct;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{ul(4,e)}catch(h){Ke(e,s,h)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(h){Ke(e,r,h)}}var o=e.return;try{Oh(e)}catch(h){Ke(e,o,h)}break;case 5:var a=e.return;try{Oh(e)}catch(h){Ke(e,a,h)}}}catch(h){Ke(e,e.return,h)}if(e===t){ct=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ct=l;break}ct=e.return}}var C0=Math.ceil,$a=xn.ReactCurrentDispatcher,Zu=xn.ReactCurrentOwner,Ss=xn.ReactCurrentBatchConfig,ne=0,gi=null,ii=null,Si=0,us=0,zr=Fn(0),ai=0,Eo=null,tr=0,cl=0,tc=0,po=null,ns=null,ec=0,Ar=1/0,ln=null,Ha=!1,Uh=null,bn=null,sa=!1,_n=null,Wa=0,mo=0,jh=null,ga=-1,wa=0;function qi(){return ne&6?ti():ga!==-1?ga:ga=ti()}function En(t){return t.mode&1?ne&2&&Si!==0?Si&-Si:p0.transition!==null?(wa===0&&(wa=_1()),wa):(t=xe,t!==0||(t=window.event,t=t===void 0?16:E1(t.type)),t):1}function Fs(t,e,s,n){if(50<mo)throw mo=0,jh=null,Error(Y(185));Do(t,s,n),(!(ne&2)||t!==gi)&&(t===gi&&(!(ne&2)&&(cl|=s),ai===4&&Sn(t,Si)),ls(t,n),s===1&&ne===0&&!(e.mode&1)&&(Ar=ti()+500,al&&Rn()))}function ls(t,e){var s=t.callbackNode;pm(t,e);var n=La(t,t===gi?Si:0);if(n===0)s!==null&&Ac(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&Ac(s),e===1)t.tag===0?d0(Lf.bind(null,t)):J1(Lf.bind(null,t)),h0(function(){!(ne&6)&&Rn()}),s=null;else{switch(P1(n)){case 1:s=Pu;break;case 4:s=S1;break;case 16:s=Pa;break;case 536870912:s=M1;break;default:s=Pa}s=Kd(s,Hd.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function Hd(t,e){if(ga=-1,wa=0,ne&6)throw Error(Y(327));var s=t.callbackNode;if(Lr()&&t.callbackNode!==s)return null;var n=La(t,t===gi?Si:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=qa(t,n);else{e=n;var r=ne;ne|=2;var o=qd();(gi!==t||Si!==e)&&(ln=null,Ar=ti()+500,Xn(t,e));do try{T0();break}catch(l){Wd(t,l)}while(1);Uu(),$a.current=o,ne=r,ii!==null?e=0:(gi=null,Si=0,e=ai)}if(e!==0){if(e===2&&(r=ph(t),r!==0&&(n=r,e=Bh(t,r))),e===1)throw s=Eo,Xn(t,0),Sn(t,n),ls(t,ti()),s;if(e===6)Sn(t,n);else{if(r=t.current.alternate,!(n&30)&&!b0(r)&&(e=qa(t,n),e===2&&(o=ph(t),o!==0&&(n=o,e=Bh(t,o))),e===1))throw s=Eo,Xn(t,0),Sn(t,n),ls(t,ti()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(Y(345));case 2:Bn(t,ns,ln);break;case 3:if(Sn(t,n),(n&130023424)===n&&(e=ec+500-ti(),10<e)){if(La(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){qi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=kh(Bn.bind(null,t,ns,ln),e);break}Bn(t,ns,ln);break;case 4:if(Sn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var a=31-Os(n);o=1<<a,a=e[a],a>r&&(r=a),n&=~o}if(n=r,n=ti()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*C0(n/1960))-n,10<n){t.timeoutHandle=kh(Bn.bind(null,t,ns,ln),n);break}Bn(t,ns,ln);break;case 5:Bn(t,ns,ln);break;default:throw Error(Y(329))}}}return ls(t,ti()),t.callbackNode===s?Hd.bind(null,t):null}function Bh(t,e){var s=po;return t.current.memoizedState.isDehydrated&&(Xn(t,e).flags|=256),t=qa(t,e),t!==2&&(e=ns,ns=s,e!==null&&$h(e)),t}function $h(t){ns===null?ns=t:ns.push.apply(ns,t)}function b0(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],o=r.getSnapshot;r=r.value;try{if(!Rs(o(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sn(t,e){for(e&=~tc,e&=~cl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-Os(e),n=1<<s;t[s]=-1,e&=~n}}function Lf(t){if(ne&6)throw Error(Y(327));Lr();var e=La(t,0);if(!(e&1))return ls(t,ti()),null;var s=qa(t,e);if(t.tag!==0&&s===2){var n=ph(t);n!==0&&(e=n,s=Bh(t,n))}if(s===1)throw s=Eo,Xn(t,0),Sn(t,e),ls(t,ti()),s;if(s===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bn(t,ns,ln),ls(t,ti()),null}function ic(t,e){var s=ne;ne|=1;try{return t(e)}finally{ne=s,ne===0&&(Ar=ti()+500,al&&Rn())}}function er(t){_n!==null&&_n.tag===0&&!(ne&6)&&Lr();var e=ne;ne|=1;var s=Ss.transition,n=xe;try{if(Ss.transition=null,xe=1,t)return t()}finally{xe=n,Ss.transition=s,ne=e,!(ne&6)&&Rn()}}function sc(){us=zr.current,Fe(zr)}function Xn(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,l0(s)),ii!==null)for(s=ii.return;s!==null;){var n=s;switch(Ou(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ea();break;case 3:Er(),Fe(os),Fe(Vi),qu();break;case 5:Wu(n);break;case 4:Er();break;case 13:Fe(Qe);break;case 19:Fe(Qe);break;case 10:ju(n.type._context);break;case 22:case 23:sc()}s=s.return}if(gi=t,ii=t=Tn(t.current,null),Si=us=e,ai=0,Eo=null,tc=cl=tr=0,ns=po=null,Gn!==null){for(e=0;e<Gn.length;e++)if(s=Gn[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,o=s.pending;if(o!==null){var a=o.next;o.next=r,n.next=a}s.pending=n}Gn=null}return t}function Wd(t,e){do{var s=ii;try{if(Uu(),ya.current=Ba,ja){for(var n=Xe.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ja=!1}if(Zn=0,vi=ri=Xe=null,co=!1,Vo=0,Zu.current=null,s===null||s.return===null){ai=1,Eo=e,ii=null;break}t:{var o=t,a=s.return,l=s,h=e;if(e=Si,l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var u=h,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=mf(a);if(g!==null){g.flags&=-257,yf(g,a,l,o,e),g.mode&1&&pf(o,u,e),e=g,h=u;var v=e.updateQueue;if(v===null){var m=new Set;m.add(h),e.updateQueue=m}else v.add(h);break t}else{if(!(e&1)){pf(o,u,e),nc();break t}h=Error(Y(426))}}else if(He&&l.mode&1){var w=mf(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),yf(w,a,l,o,e),Fu(Tr(h,l));break t}}o=h=Tr(h,l),ai!==4&&(ai=2),po===null?po=[o]:po.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=Ld(o,h,e);af(o,x);break t;case 1:l=h;var y=o.type,d=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(bn===null||!bn.has(d)))){o.flags|=65536,e&=-e,o.lanes|=e;var z=Id(o,l,e);af(o,z);break t}}o=o.return}while(o!==null)}Qd(s)}catch(k){e=k,ii===s&&s!==null&&(ii=s=s.return);continue}break}while(1)}function qd(){var t=$a.current;return $a.current=Ba,t===null?Ba:t}function nc(){(ai===0||ai===3||ai===2)&&(ai=4),gi===null||!(tr&268435455)&&!(cl&268435455)||Sn(gi,Si)}function qa(t,e){var s=ne;ne|=2;var n=qd();(gi!==t||Si!==e)&&(ln=null,Xn(t,e));do try{E0();break}catch(r){Wd(t,r)}while(1);if(Uu(),ne=s,$a.current=n,ii!==null)throw Error(Y(261));return gi=null,Si=0,ai}function E0(){for(;ii!==null;)Gd(ii)}function T0(){for(;ii!==null&&!rm();)Gd(ii)}function Gd(t){var e=Yd(t.alternate,t,us);t.memoizedProps=t.pendingProps,e===null?Qd(t):ii=e,Zu.current=null}function Qd(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=P0(s,e),s!==null){s.flags&=32767,ii=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ai=6,ii=null;return}}else if(s=_0(s,e,us),s!==null){ii=s;return}if(e=e.sibling,e!==null){ii=e;return}ii=e=t}while(e!==null);ai===0&&(ai=5)}function Bn(t,e,s){var n=xe,r=Ss.transition;try{Ss.transition=null,xe=1,A0(t,e,s,n)}finally{Ss.transition=r,xe=n}return null}function A0(t,e,s,n){do Lr();while(_n!==null);if(ne&6)throw Error(Y(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=s.lanes|s.childLanes;if(mm(t,o),t===gi&&(ii=gi=null,Si=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||sa||(sa=!0,Kd(Pa,function(){return Lr(),null})),o=(s.flags&15990)!==0,s.subtreeFlags&15990||o){o=Ss.transition,Ss.transition=null;var a=xe;xe=1;var l=ne;ne|=4,Zu.current=null,I0(t,s),Bd(s,t),e0(wh),Ia=!!gh,wh=gh=null,t.current=s,V0(s),om(),ne=l,xe=a,Ss.transition=o}else t.current=s;if(sa&&(sa=!1,_n=t,Wa=r),o=t.pendingLanes,o===0&&(bn=null),hm(s.stateNode),ls(t,ti()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(Ha)throw Ha=!1,t=Uh,Uh=null,t;return Wa&1&&t.tag!==0&&Lr(),o=t.pendingLanes,o&1?t===jh?mo++:(mo=0,jh=t):mo=0,Rn(),null}function Lr(){if(_n!==null){var t=P1(Wa),e=Ss.transition,s=xe;try{if(Ss.transition=null,xe=16>t?16:t,_n===null)var n=!1;else{if(t=_n,_n=null,Wa=0,ne&6)throw Error(Y(331));var r=ne;for(ne|=4,ct=t.current;ct!==null;){var o=ct,a=o.child;if(ct.flags&16){var l=o.deletions;if(l!==null){for(var h=0;h<l.length;h++){var u=l[h];for(ct=u;ct!==null;){var c=ct;switch(c.tag){case 0:case 11:case 15:fo(8,c,o)}var f=c.child;if(f!==null)f.return=c,ct=f;else for(;ct!==null;){c=ct;var p=c.sibling,g=c.return;if(Rd(c),c===u){ct=null;break}if(p!==null){p.return=g,ct=p;break}ct=g}}}var v=o.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}ct=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ct=a;else t:for(;ct!==null;){if(o=ct,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fo(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ct=x;break t}ct=o.return}}var y=t.current;for(ct=y;ct!==null;){a=ct;var d=a.child;if(a.subtreeFlags&2064&&d!==null)d.return=a,ct=d;else t:for(a=y;ct!==null;){if(l=ct,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ul(9,l)}}catch(k){Ke(l,l.return,k)}if(l===a){ct=null;break t}var z=l.sibling;if(z!==null){z.return=l.return,ct=z;break t}ct=l.return}}if(ne=r,Rn(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(il,t)}catch{}n=!0}return n}finally{xe=s,Ss.transition=e}}return!1}function If(t,e,s){e=Tr(s,e),e=Ld(t,e,1),t=Cn(t,e,1),e=qi(),t!==null&&(Do(t,1,e),ls(t,e))}function Ke(t,e,s){if(t.tag===3)If(t,t,s);else for(;e!==null;){if(e.tag===3){If(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(bn===null||!bn.has(n))){t=Tr(s,t),t=Id(e,t,1),e=Cn(e,t,1),t=qi(),e!==null&&(Do(e,1,t),ls(e,t));break}}e=e.return}}function D0(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=qi(),t.pingedLanes|=t.suspendedLanes&s,gi===t&&(Si&s)===s&&(ai===4||ai===3&&(Si&130023424)===Si&&500>ti()-ec?Xn(t,0):tc|=s),ls(t,e)}function Xd(t,e){e===0&&(t.mode&1?(e=Go,Go<<=1,!(Go&130023424)&&(Go=4194304)):e=1);var s=qi();t=yn(t,e),t!==null&&(Do(t,e,s),ls(t,s))}function O0(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Xd(t,s)}function F0(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Y(314))}n!==null&&n.delete(e),Xd(t,s)}var Yd;Yd=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||os.current)rs=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return rs=!1,M0(t,e,s);rs=!!(t.flags&131072)}else rs=!1,He&&e.flags&1048576&&Z1(e,Da,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;xa(t,e),t=e.pendingProps;var r=Vr(e,Vi.current);Pr(e,s),r=Qu(null,e,n,t,r,s);var o=Xu();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,as(n)?(o=!0,Ta(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,$u(e),r.updater=ll,e.stateNode=r,r._reactInternals=e,Ih(e,n,t,s),e=bh(null,e,n,!0,o,s)):(e.tag=0,He&&o&&Du(e),Wi(null,e,r,s),e=e.child),e;case 16:n=e.elementType;t:{switch(xa(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=U0(n),t=Ts(n,t),r){case 0:e=Ch(null,e,n,t,s);break t;case 1:e=gf(null,e,n,t,s);break t;case 11:e=vf(null,e,n,t,s);break t;case 14:e=xf(null,e,n,Ts(n.type,t),s);break t}throw Error(Y(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ts(n,r),Ch(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ts(n,r),gf(t,e,n,r,s);case 3:t:{if(Ed(e),t===null)throw Error(Y(387));n=e.pendingProps,o=e.memoizedState,r=o.element,sd(t,e),Ra(e,n,null,s);var a=e.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Tr(Error(Y(423)),e),e=wf(t,e,n,s,r);break t}else if(n!==r){r=Tr(Error(Y(424)),e),e=wf(t,e,n,s,r);break t}else for(cs=Vn(e.stateNode.containerInfo.firstChild),fs=e,He=!0,Ds=null,s=ad(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Cr(),n===r){e=vn(t,e,s);break t}Wi(t,e,n,s)}e=e.child}return e;case 5:return ld(e),t===null&&_h(e),n=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,zh(n,r)?a=null:o!==null&&zh(n,o)&&(e.flags|=32),bd(t,e),Wi(t,e,a,s),e.child;case 6:return t===null&&_h(e),null;case 13:return Td(t,e,s);case 4:return Hu(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=br(e,null,n,s):Wi(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ts(n,r),vf(t,e,n,r,s);case 7:return Wi(t,e,e.pendingProps,s),e.child;case 8:return Wi(t,e,e.pendingProps.children,s),e.child;case 12:return Wi(t,e,e.pendingProps.children,s),e.child;case 10:t:{if(n=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Pe(Oa,n._currentValue),n._currentValue=a,o!==null)if(Rs(o.value,a)){if(o.children===r.children&&!os.current){e=vn(t,e,s);break t}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var h=l.firstContext;h!==null;){if(h.context===n){if(o.tag===1){h=dn(-1,s&-s),h.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?h.next=h:(h.next=c.next,c.next=h),u.pending=h}}o.lanes|=s,h=o.alternate,h!==null&&(h.lanes|=s),Ph(o.return,s,e),l.lanes|=s;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Y(341));a.lanes|=s,l=a.alternate,l!==null&&(l.lanes|=s),Ph(a,s,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Wi(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,Pr(e,s),r=Ms(r),n=n(r),e.flags|=1,Wi(t,e,n,s),e.child;case 14:return n=e.type,r=Ts(n,e.pendingProps),r=Ts(n.type,r),xf(t,e,n,r,s);case 15:return Vd(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ts(n,r),xa(t,e),e.tag=1,as(n)?(t=!0,Ta(e)):t=!1,Pr(e,s),rd(e,n,r),Ih(e,n,r,s),bh(null,e,n,!0,t,s);case 19:return Ad(t,e,s);case 22:return Cd(t,e,s)}throw Error(Y(156,e.tag))};function Kd(t,e){return N1(t,e)}function R0(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(t,e,s,n){return new R0(t,e,s,n)}function rc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function U0(t){if(typeof t=="function")return rc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Su)return 11;if(t===Mu)return 14}return 2}function Tn(t,e){var s=t.alternate;return s===null?(s=ks(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function za(t,e,s,n,r,o){var a=2;if(n=t,typeof t=="function")rc(t)&&(a=1);else if(typeof t=="string")a=5;else t:switch(t){case cr:return Yn(s.children,r,o,e);case Nu:a=8,r|=8;break;case Zl:return t=ks(12,s,e,r|2),t.elementType=Zl,t.lanes=o,t;case th:return t=ks(13,s,e,r),t.elementType=th,t.lanes=o,t;case eh:return t=ks(19,s,e,r),t.elementType=eh,t.lanes=o,t;case o1:return fl(s,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case n1:a=10;break t;case r1:a=9;break t;case Su:a=11;break t;case Mu:a=14;break t;case zn:a=16,n=null;break t}throw Error(Y(130,t==null?t:typeof t,""))}return e=ks(a,s,e,r),e.elementType=t,e.type=n,e.lanes=o,e}function Yn(t,e,s,n){return t=ks(7,t,n,e),t.lanes=s,t}function fl(t,e,s,n){return t=ks(22,t,n,e),t.elementType=o1,t.lanes=s,t.stateNode={isHidden:!1},t}function Gl(t,e,s){return t=ks(6,t,null,e),t.lanes=s,t}function Ql(t,e,s){return e=ks(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function j0(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ll(0),this.expirationTimes=Ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function oc(t,e,s,n,r,o,a,l,h){return t=new j0(t,e,s,l,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ks(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},$u(o),t}function B0(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ur,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Jd(t){if(!t)return Dn;t=t._reactInternals;t:{if(nr(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(as(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var s=t.type;if(as(s))return K1(t,s,e)}return e}function Zd(t,e,s,n,r,o,a,l,h){return t=oc(s,n,!0,t,r,o,a,l,h),t.context=Jd(null),s=t.current,n=qi(),r=En(s),o=dn(n,r),o.callback=e??null,Cn(s,o,r),t.current.lanes=r,Do(t,r,n),ls(t,n),t}function dl(t,e,s,n){var r=e.current,o=qi(),a=En(r);return s=Jd(s),e.context===null?e.context=s:e.pendingContext=s,e=dn(o,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Cn(r,e,a),t!==null&&(Fs(t,r,a,o),ma(t,r,a)),a}function Ga(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function ac(t,e){Vf(t,e),(t=t.alternate)&&Vf(t,e)}function $0(){return null}var tp=typeof reportError=="function"?reportError:function(t){console.error(t)};function lc(t){this._internalRoot=t}pl.prototype.render=lc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));dl(t,e,null,null)};pl.prototype.unmount=lc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;er(function(){dl(null,t,null,null)}),e[mn]=null}};function pl(t){this._internalRoot=t}pl.prototype.unstable_scheduleHydration=function(t){if(t){var e=V1();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Nn.length&&e!==0&&e<Nn[s].priority;s++);Nn.splice(s,0,t),s===0&&b1(t)}};function hc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ml(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cf(){}function H0(t,e,s,n,r){if(r){if(typeof n=="function"){var o=n;n=function(){var u=Ga(a);o.call(u)}}var a=Zd(e,n,t,0,null,!1,!1,"",Cf);return t._reactRootContainer=a,t[mn]=a.current,Mo(t.nodeType===8?t.parentNode:t),er(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var u=Ga(h);l.call(u)}}var h=oc(t,0,!1,null,null,!1,!1,"",Cf);return t._reactRootContainer=h,t[mn]=h.current,Mo(t.nodeType===8?t.parentNode:t),er(function(){dl(e,h,s,n)}),h}function yl(t,e,s,n,r){var o=s._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var l=r;r=function(){var h=Ga(a);l.call(h)}}dl(e,a,t,r)}else a=H0(s,e,t,r,n);return Ga(a)}L1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=io(e.pendingLanes);s!==0&&(Lu(e,s|1),ls(e,ti()),!(ne&6)&&(Ar=ti()+500,Rn()))}break;case 13:er(function(){var n=yn(t,1);if(n!==null){var r=qi();Fs(n,t,1,r)}}),ac(t,1)}};Iu=function(t){if(t.tag===13){var e=yn(t,134217728);if(e!==null){var s=qi();Fs(e,t,134217728,s)}ac(t,134217728)}};I1=function(t){if(t.tag===13){var e=En(t),s=yn(t,e);if(s!==null){var n=qi();Fs(s,t,e,n)}ac(t,e)}};V1=function(){return xe};C1=function(t,e){var s=xe;try{return xe=t,e()}finally{xe=s}};ch=function(t,e,s){switch(e){case"input":if(nh(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=ol(n);if(!r)throw Error(Y(90));l1(n),nh(n,r)}}}break;case"textarea":u1(t,s);break;case"select":e=s.value,e!=null&&Nr(t,!!s.multiple,e,!1)}};v1=ic;x1=er;var W0={usingClientEntryPoint:!1,Events:[Fo,mr,ol,m1,y1,ic]},Xr={findFiberByHostInstance:qn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},q0={bundleType:Xr.bundleType,version:Xr.version,rendererPackageName:Xr.rendererPackageName,rendererConfig:Xr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=z1(t),t===null?null:t.stateNode},findFiberByHostInstance:Xr.findFiberByHostInstance||$0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!na.isDisabled&&na.supportsFiber)try{il=na.inject(q0),sn=na}catch{}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W0;ps.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hc(e))throw Error(Y(200));return B0(t,e,null,s)};ps.createRoot=function(t,e){if(!hc(t))throw Error(Y(299));var s=!1,n="",r=tp;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=oc(t,1,!1,null,null,s,!1,n,r),t[mn]=e.current,Mo(t.nodeType===8?t.parentNode:t),new lc(e)};ps.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=z1(e),t=t===null?null:t.stateNode,t};ps.flushSync=function(t){return er(t)};ps.hydrate=function(t,e,s){if(!ml(e))throw Error(Y(200));return yl(null,t,e,!0,s)};ps.hydrateRoot=function(t,e,s){if(!hc(t))throw Error(Y(405));var n=s!=null&&s.hydratedSources||null,r=!1,o="",a=tp;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),e=Zd(e,null,t,1,s??null,r,!1,o,a),t[mn]=e.current,Mo(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new pl(e)};ps.render=function(t,e,s){if(!ml(e))throw Error(Y(200));return yl(null,t,e,!1,s)};ps.unmountComponentAtNode=function(t){if(!ml(t))throw Error(Y(40));return t._reactRootContainer?(er(function(){yl(null,null,t,!1,function(){t._reactRootContainer=null,t[mn]=null})}),!0):!1};ps.unstable_batchedUpdates=ic;ps.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!ml(s))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return yl(t,e,s,!1,n)};ps.version="18.2.0-next-9e3b772b8-20220608";function ep(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ep)}catch(t){console.error(t)}}ep(),Zf.exports=ps;var G0=Zf.exports,bf=G0;Kl.createRoot=bf.createRoot,Kl.hydrateRoot=bf.hydrateRoot;var Q0=Object.defineProperty,X0=(t,e,s)=>e in t?Q0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,xi=(t,e,s)=>(X0(t,typeof e!="symbol"?e+"":e,s),s),ka=1e-6,Gi=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function ip(){var t=new Gi(9);return Gi!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Y0(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function un(){var t=new Gi(16);return Gi!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function tn(t){var e=new Gi(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function K0(t,e,s,n,r,o,a,l,h,u,c,f,p,g,v,m){var w=new Gi(16);return w[0]=t,w[1]=e,w[2]=s,w[3]=n,w[4]=r,w[5]=o,w[6]=a,w[7]=l,w[8]=h,w[9]=u,w[10]=c,w[11]=f,w[12]=p,w[13]=g,w[14]=v,w[15]=m,w}function Hh(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function J0(t,e){if(t===e){var s=e[1],n=e[2],r=e[3],o=e[6],a=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=s,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=r,t[13]=a,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Ze(t,e){var s=e[0],n=e[1],r=e[2],o=e[3],a=e[4],l=e[5],h=e[6],u=e[7],c=e[8],f=e[9],p=e[10],g=e[11],v=e[12],m=e[13],w=e[14],x=e[15],y=s*l-n*a,d=s*h-r*a,z=s*u-o*a,k=n*h-r*l,N=n*u-o*l,S=r*u-o*h,U=c*m-f*v,O=c*w-p*v,M=c*x-g*v,F=f*w-p*m,A=f*x-g*m,D=p*x-g*w,P=y*D-d*A+z*F+k*M-N*O+S*U;return P?(P=1/P,t[0]=(l*D-h*A+u*F)*P,t[1]=(r*A-n*D-o*F)*P,t[2]=(m*S-w*N+x*k)*P,t[3]=(p*N-f*S-g*k)*P,t[4]=(h*M-a*D-u*O)*P,t[5]=(s*D-r*M+o*O)*P,t[6]=(w*z-v*S-x*d)*P,t[7]=(c*S-p*z+g*d)*P,t[8]=(a*A-l*M+u*U)*P,t[9]=(n*M-s*A-o*U)*P,t[10]=(v*N-m*z+x*y)*P,t[11]=(f*z-c*N-g*y)*P,t[12]=(l*O-a*F-h*U)*P,t[13]=(s*F-n*O+r*U)*P,t[14]=(m*d-v*k-w*y)*P,t[15]=(c*k-f*d+p*y)*P,t):null}function Wh(t,e,s){var n=e[0],r=e[1],o=e[2],a=e[3],l=e[4],h=e[5],u=e[6],c=e[7],f=e[8],p=e[9],g=e[10],v=e[11],m=e[12],w=e[13],x=e[14],y=e[15],d=s[0],z=s[1],k=s[2],N=s[3];return t[0]=d*n+z*l+k*f+N*m,t[1]=d*r+z*h+k*p+N*w,t[2]=d*o+z*u+k*g+N*x,t[3]=d*a+z*c+k*v+N*y,d=s[4],z=s[5],k=s[6],N=s[7],t[4]=d*n+z*l+k*f+N*m,t[5]=d*r+z*h+k*p+N*w,t[6]=d*o+z*u+k*g+N*x,t[7]=d*a+z*c+k*v+N*y,d=s[8],z=s[9],k=s[10],N=s[11],t[8]=d*n+z*l+k*f+N*m,t[9]=d*r+z*h+k*p+N*w,t[10]=d*o+z*u+k*g+N*x,t[11]=d*a+z*c+k*v+N*y,d=s[12],z=s[13],k=s[14],N=s[15],t[12]=d*n+z*l+k*f+N*m,t[13]=d*r+z*h+k*p+N*w,t[14]=d*o+z*u+k*g+N*x,t[15]=d*a+z*c+k*v+N*y,t}function kr(t,e,s){var n=s[0],r=s[1],o=s[2],a,l,h,u,c,f,p,g,v,m,w,x;return e===t?(t[12]=e[0]*n+e[4]*r+e[8]*o+e[12],t[13]=e[1]*n+e[5]*r+e[9]*o+e[13],t[14]=e[2]*n+e[6]*r+e[10]*o+e[14],t[15]=e[3]*n+e[7]*r+e[11]*o+e[15]):(a=e[0],l=e[1],h=e[2],u=e[3],c=e[4],f=e[5],p=e[6],g=e[7],v=e[8],m=e[9],w=e[10],x=e[11],t[0]=a,t[1]=l,t[2]=h,t[3]=u,t[4]=c,t[5]=f,t[6]=p,t[7]=g,t[8]=v,t[9]=m,t[10]=w,t[11]=x,t[12]=a*n+c*r+v*o+e[12],t[13]=l*n+f*r+m*o+e[13],t[14]=h*n+p*r+w*o+e[14],t[15]=u*n+g*r+x*o+e[15]),t}function Z0(t,e,s){var n=s[0],r=s[1],o=s[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function sp(t,e,s){var n=Math.sin(s),r=Math.cos(s),o=e[4],a=e[5],l=e[6],h=e[7],u=e[8],c=e[9],f=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+u*n,t[5]=a*r+c*n,t[6]=l*r+f*n,t[7]=h*r+p*n,t[8]=u*r-o*n,t[9]=c*r-a*n,t[10]=f*r-l*n,t[11]=p*r-h*n,t}function np(t,e,s){var n=Math.sin(s),r=Math.cos(s),o=e[0],a=e[1],l=e[2],h=e[3],u=e[8],c=e[9],f=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-u*n,t[1]=a*r-c*n,t[2]=l*r-f*n,t[3]=h*r-p*n,t[8]=o*n+u*r,t[9]=a*n+c*r,t[10]=l*n+f*r,t[11]=h*n+p*r,t}function rp(t,e,s){var n=Math.sin(s),r=Math.cos(s),o=e[0],a=e[1],l=e[2],h=e[3],u=e[4],c=e[5],f=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+u*n,t[1]=a*r+c*n,t[2]=l*r+f*n,t[3]=h*r+p*n,t[4]=u*r-o*n,t[5]=c*r-a*n,t[6]=f*r-l*n,t[7]=p*r-h*n,t}function t2(t,e,s){var n=e[0],r=e[1],o=e[2],a=e[3],l=n+n,h=r+r,u=o+o,c=n*l,f=n*h,p=n*u,g=r*h,v=r*u,m=o*u,w=a*l,x=a*h,y=a*u;return t[0]=1-(g+m),t[1]=f+y,t[2]=p-x,t[3]=0,t[4]=f-y,t[5]=1-(c+m),t[6]=v+w,t[7]=0,t[8]=p+x,t[9]=v-w,t[10]=1-(c+g),t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}function e2(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function i2(t,e){var s=e[0],n=e[1],r=e[2],o=e[4],a=e[5],l=e[6],h=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(s,n,r),t[1]=Math.hypot(o,a,l),t[2]=Math.hypot(h,u,c),t}function s2(t,e,s,n){var r=e[0],o=e[1],a=e[2],l=e[3],h=r+r,u=o+o,c=a+a,f=r*h,p=r*u,g=r*c,v=o*u,m=o*c,w=a*c,x=l*h,y=l*u,d=l*c,z=n[0],k=n[1],N=n[2];return t[0]=(1-(v+w))*z,t[1]=(p+d)*z,t[2]=(g-y)*z,t[3]=0,t[4]=(p-d)*k,t[5]=(1-(f+w))*k,t[6]=(m+x)*k,t[7]=0,t[8]=(g+y)*N,t[9]=(m-x)*N,t[10]=(1-(f+v))*N,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}function n2(t,e){var s=e[0],n=e[1],r=e[2],o=e[3],a=s+s,l=n+n,h=r+r,u=s*a,c=n*a,f=n*l,p=r*a,g=r*l,v=r*h,m=o*a,w=o*l,x=o*h;return t[0]=1-f-v,t[1]=c+x,t[2]=p-w,t[3]=0,t[4]=c-x,t[5]=1-u-v,t[6]=g+m,t[7]=0,t[8]=p+w,t[9]=g-m,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function r2(t,e,s,n,r){var o=1/Math.tan(e/2),a;return t[0]=o/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(a=1/(n-r),t[10]=(r+n)*a,t[14]=2*r*n*a):(t[10]=-1,t[14]=-2*n),t}var o2=r2;function op(t,e,s,n){var r,o,a,l,h,u,c,f,p,g,v=e[0],m=e[1],w=e[2],x=n[0],y=n[1],d=n[2],z=s[0],k=s[1],N=s[2];return Math.abs(v-z)<ka&&Math.abs(m-k)<ka&&Math.abs(w-N)<ka?Hh(t):(c=v-z,f=m-k,p=w-N,g=1/Math.hypot(c,f,p),c*=g,f*=g,p*=g,r=y*p-d*f,o=d*c-x*p,a=x*f-y*c,g=Math.hypot(r,o,a),g?(g=1/g,r*=g,o*=g,a*=g):(r=0,o=0,a=0),l=f*a-p*o,h=p*r-c*a,u=c*o-f*r,g=Math.hypot(l,h,u),g?(g=1/g,l*=g,h*=g,u*=g):(l=0,h=0,u=0),t[0]=r,t[1]=l,t[2]=c,t[3]=0,t[4]=o,t[5]=h,t[6]=f,t[7]=0,t[8]=a,t[9]=u,t[10]=p,t[11]=0,t[12]=-(r*v+o*m+a*w),t[13]=-(l*v+h*m+u*w),t[14]=-(c*v+f*m+p*w),t[15]=1,t)}function ir(){var t=new Gi(3);return Gi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function a2(t){var e=t[0],s=t[1],n=t[2];return Math.hypot(e,s,n)}function To(t,e,s){var n=new Gi(3);return n[0]=t,n[1]=e,n[2]=s,n}function l2(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function h2(t,e){var s=e[0],n=e[1],r=e[2],o=s*s+n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function uc(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yo(t,e,s){var n=e[0],r=e[1],o=e[2],a=s[0],l=s[1],h=s[2];return t[0]=r*h-o*l,t[1]=o*a-n*h,t[2]=n*l-r*a,t}var u2=a2;(function(){var t=ir();return function(e,s,n,r,o,a){var l,h;for(s||(s=3),n||(n=0),r?h=Math.min(r*s+n,e.length):h=e.length,l=n;l<h;l+=s)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],o(t,t,a),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2];return e}})();function ap(){var t=new Gi(4);return Gi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function c2(t){var e=new Gi(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function zi(t,e,s,n){var r=new Gi(4);return r[0]=t,r[1]=e,r[2]=s,r[3]=n,r}function lp(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t}function hp(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t}function f2(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t[3]=e[3]*s[3],t}function d2(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t}function p2(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function $n(t,e){var s=e[0],n=e[1],r=e[2],o=e[3],a=s*s+n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=s*a,t[1]=n*a,t[2]=r*a,t[3]=o*a,t}function Ns(t,e,s){var n=e[0],r=e[1],o=e[2],a=e[3];return t[0]=s[0]*n+s[4]*r+s[8]*o+s[12]*a,t[1]=s[1]*n+s[5]*r+s[9]*o+s[13]*a,t[2]=s[2]*n+s[6]*r+s[10]*o+s[14]*a,t[3]=s[3]*n+s[7]*r+s[11]*o+s[15]*a,t}(function(){var t=ap();return function(e,s,n,r,o,a){var l,h;for(s||(s=4),n||(n=0),r?h=Math.min(r*s+n,e.length):h=e.length,l=n;l<h;l+=s)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],t[3]=e[l+3],o(t,t,a),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2],e[l+3]=t[3];return e}})();function Qa(){var t=new Gi(4);return Gi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function m2(t,e,s){s=s*.5;var n=Math.sin(s);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(s),t}function y2(t,e,s){var n=e[0],r=e[1],o=e[2],a=e[3],l=s[0],h=s[1],u=s[2],c=s[3];return t[0]=n*c+a*l+r*u-o*h,t[1]=r*c+a*h+o*l-n*u,t[2]=o*c+a*u+n*h-r*l,t[3]=a*c-n*l-r*h-o*u,t}function v2(t,e,s){s*=.5;var n=e[0],r=e[1],o=e[2],a=e[3],l=Math.sin(s),h=Math.cos(s);return t[0]=n*h+a*l,t[1]=r*h+o*l,t[2]=o*h-r*l,t[3]=a*h-n*l,t}function x2(t,e,s){s*=.5;var n=e[0],r=e[1],o=e[2],a=e[3],l=Math.sin(s),h=Math.cos(s);return t[0]=n*h-o*l,t[1]=r*h+a*l,t[2]=o*h+n*l,t[3]=a*h-r*l,t}function g2(t,e,s){s*=.5;var n=e[0],r=e[1],o=e[2],a=e[3],l=Math.sin(s),h=Math.cos(s);return t[0]=n*h+r*l,t[1]=r*h-n*l,t[2]=o*h+a*l,t[3]=a*h-o*l,t}function Xl(t,e,s,n){var r=e[0],o=e[1],a=e[2],l=e[3],h=s[0],u=s[1],c=s[2],f=s[3],p,g,v,m,w;return g=r*h+o*u+a*c+l*f,g<0&&(g=-g,h=-h,u=-u,c=-c,f=-f),1-g>ka?(p=Math.acos(g),v=Math.sin(p),m=Math.sin((1-n)*p)/v,w=Math.sin(n*p)/v):(m=1-n,w=n),t[0]=m*r+w*h,t[1]=m*o+w*u,t[2]=m*a+w*c,t[3]=m*l+w*f,t}function Un(t,e){var s=e[0],n=e[1],r=e[2],o=e[3],a=s*s+n*n+r*r+o*o,l=a?1/a:0;return t[0]=-s*l,t[1]=-n*l,t[2]=-r*l,t[3]=o*l,t}function up(t,e){var s=e[0]+e[4]+e[8],n;if(s>0)n=Math.sqrt(s+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);var o=(r+1)%3,a=(r+2)%3;n=Math.sqrt(e[r*3+r]-e[o*3+o]-e[a*3+a]+1),t[r]=.5*n,n=.5/n,t[3]=(e[o*3+a]-e[a*3+o])*n,t[o]=(e[o*3+r]+e[r*3+o])*n,t[a]=(e[a*3+r]+e[r*3+a])*n}return t}var Yl=c2,w2=zi,cp=$n;(function(){var t=ir(),e=To(1,0,0),s=To(0,1,0);return function(n,r,o){var a=uc(r,o);return a<-.999999?(yo(t,e,r),u2(t)<1e-6&&yo(t,s,r),h2(t,t),m2(n,t,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(yo(t,r,o),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+a,cp(n,n))}})();(function(){var t=Qa(),e=Qa();return function(s,n,r,o,a,l){return Xl(t,n,a,l),Xl(e,r,o,l),Xl(s,t,e,2*l*(1-l)),s}})();(function(){var t=ip();return function(e,s,n,r){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-s[0],t[5]=-s[1],t[8]=-s[2],cp(e,up(e,t))}})();const Na=class Es{constructor(){xi(this,"_coord"),xi(this,"scale",e=>{const s=new Es;return d2(s._coord,this._coord,e),s}),xi(this,"dot",e=>uc(this.vec3(),e.vec3())),xi(this,"add",e=>{const s=new Es;return lp(s._coord,this._coord,e._coord),s}),xi(this,"multiply",e=>{const s=new Es;return f2(s._coord,this._coord,e._coord),s}),this._coord=zi(0,0,0,0)}static get bufferSize(){return 4*4}static fromValues(e,s,n){const r=new Es;return r._coord=zi(e,s,n,0),r}static fromVec4(e){const s=new Es,n=e[3]!==0?e[3]:1;return s._coord=zi(e[0]/n,e[1]/n,e[2]/n,0),s}static fromVec3(e){const s=new Es;return s._coord=zi(e[0],e[1],e[2],0),s}static fromPoints(e,s){const n=new Es;return hp(n._coord,e.vec4(),s.vec4()),n}static fromPoint(e){const s=new Es;return s._coord=[...e.triplet,0],s}toString(){return`Vector(${this.x}, ${this.y}, ${this.z})`}map(e){const s=new Es;return e.isFrame()?Ns(s._coord,this._coord,e.inverseMatrix):Ns(s._coord,this._coord,e.directMatrix),s}unMap(e){const s=new Es;return e.isFrame()?Ns(s._coord,this._coord,e.directMatrix):Ns(s._coord,this._coord,e.inverseMatrix),s}relative(e){return this.map(e)}absolute(e){return this.unMap(e)}isUnitVector(){return!1}get x(){return this._coord[0]}get y(){return this._coord[1]}get z(){return this._coord[2]}get triplet(){return[this.x,this.y,this.z]}get coordinates(){return[...this._coord.values()]}buffer(){return new Float32Array(this.coordinates)}get length(){const e=this._coord[0],s=this._coord[1],n=this._coord[2];return Math.sqrt(e*e+s*s+n*n)}get lengthSquare(){const e=this._coord[0],s=this._coord[1],n=this._coord[2];return e*e+s*s+n*n}vec3(){return To(this.x,this.y,this.z)}vec4(){return zi(this.x,this.y,this.z,0)}};xi(Na,"crossProduct",(t,e)=>{const s=ir();return yo(s,t.vec3(),e.vec3()),Na.fromVec3(s)}),xi(Na,"dot",(t,e)=>uc(t.vec3(),e.vec3()));let $t=Na;class it{constructor(){xi(this,"_coord"),this._coord=zi(0,0,0,1)}static get bufferSize(){return 4*4}static origin(){return new it}static fromValues(e,s,n,r=1){const o=new it;return o._coord=zi(e/r,s/r,n/r,1),o}static fromVector(e){const s=new it;return s._coord=zi(e.x,e.y,e.z,1),s}static fromVec4(e){const s=new it,n=e[3]!==0?e[3]:1;return s._coord=zi(e[0]/n,e[1]/n,e[2]/n,1),s}static fromVec3(e){const s=new it;return s._coord=zi(e[0],e[1],e[2],1),s}toString(){return`Point(${this.x}, ${this.y}, ${this.z})`}map(e){const s=new it;return e.isFrame()?Ns(s._coord,this._coord,e.inverseMatrix):Ns(s._coord,this._coord,e.directMatrix),s}unMap(e){const s=new it;return e.isFrame()?Ns(s._coord,this._coord,e.directMatrix):Ns(s._coord,this._coord,e.inverseMatrix),s}relative(e){return this.map(e)}absolute(e){return this.unMap(e)}static relative(e,s){return e.map(s)}static absolute(e,s){return e.unMap(s)}subtract(e){const s=ap();return hp(s,this._coord,e._coord),$t.fromVec4(s)}scale(e){const s=ir();return l2(s,this.vec3(),e),it.fromVec3(s)}add(e){const s=new it;return lp(s._coord,this._coord,e.vec4()),s}isPoint(){return!0}get x(){return this._coord[0]}get y(){return this._coord[1]}get z(){return this._coord[2]}get coordinates(){return[...this._coord.values()]}get triplet(){return[this.x,this.y,this.z]}buffer(){return new Float32Array(this.coordinates)}vec3(){return To(this.x,this.y,this.z)}vec4(){return zi(this.x,this.y,this.z,1)}}const qh=class rn{constructor(){xi(this,"_coord"),this._coord=zi(1,1,1,0)}static get bufferSize(){return 4*4}static fromVector(e){const s=new rn;return s._coord=zi(e.x,e.y,e.z,0),$n(s._coord,s._coord),s}fromPoint(e){return rn.fromValues(...e.triplet)}static fromValues(e,s,n){const r=zi(e,s,n,0);return $n(r,r),rn.fromVec4(r)}static fromVec4(e){const s=new rn,n=e[3]!==0?e[3]:1;return s._coord=zi(e[0]/n,e[1]/n,e[2]/n,0),$n(s._coord,s._coord),s}static fromVec3(e){const s=new rn;return s._coord=zi(e[0],e[1],e[2],0),$n(s._coord,s._coord),s}toString(){return`UnitVector(${this.x}, ${this.y}, ${this.z})`}map(e){const s=new rn;return e.isFrame()?Ns(s._coord,this._coord,e.inverseMatrix):Ns(s._coord,this._coord,e.directMatrix),$n(s._coord,s._coord),s}unMap(e){const s=new rn;return e.isFrame()?Ns(s._coord,this._coord,e.directMatrix):Ns(s._coord,this._coord,e.inverseMatrix),$n(s._coord,s._coord),s}relative(e){return this.map(e)}absolute(e){return this.unMap(e)}invert(){const e=new rn;return p2(e._coord,this._coord),e}scale(e){return $t.fromValues(this.x*e,this.y*e,this.z*e)}isUnitVector(){return!0}get x(){return this._coord[0]}get y(){return this._coord[1]}get z(){return this._coord[2]}get length(){return 1}get coordinates(){return[...this._coord.values()]}get triplet(){return[this.x,this.y,this.z]}buffer(){return new Float32Array(this.coordinates)}vec3(){return To(this.x,this.y,this.z)}};xi(qh,"crossProduct",(t,e)=>{const s=ir();return yo(s,t.vec3(),e.vec3()),qh.fromVec3(s)});let Gt=qh;const Ef=t=>t.isUnitVector();class Et{constructor(){xi(this,"_direct"),xi(this,"_inverse"),xi(this,"_isIdentity",!0),this._direct=un(),this._inverse=un(),Ze(this._inverse,this._direct)}static get bufferSize(){return 16*4}static world(){return new Et}static identity(){return new Et}static fromRotation(e){const s=new Et;return n2(s._direct,e.quat),Ze(s._inverse,s._direct),s._isIdentity=!1,s}static fromMat4(e){const s=new Et,n=un();return Ze(n,e),s._direct=tn(e),s._inverse=tn(n),s._isIdentity=!1,s}static lookAt(e,s,n){const r=new Et;return op(r._direct,e.vec3(),s.vec3(),n.vec3()),Ze(r._inverse,r._direct),r._isIdentity=!1,r}static perspective(e,s,n,r){const o=new Et;return o2(o._direct,e,s,n,r),Ze(o._inverse,o._direct),o._isIdentity=!1,o}static invert(e){const s=new Et;return s._direct=tn(e._inverse),s._inverse=tn(e._direct),s._isIdentity=!1,s}static translation(e,s,n){const r=new Et;return kr(r._direct,r._direct,[e,s,n]),Ze(r._inverse,r._direct),r._isIdentity=!1,r}static move(e){const s=new Et;return kr(s._direct,s._direct,e.vec3()),Ze(s._inverse,s._direct),s._isIdentity=!1,s}static rotationX(e){const s=new Et;return sp(s._direct,s._direct,e),Ze(s._inverse,s._direct),s._isIdentity=!1,s}static rotationY(e){const s=new Et;return np(s._direct,s._direct,e),Ze(s._inverse,s._direct),s._isIdentity=!1,s}static rotationZ(e){const s=new Et;return rp(s._direct,s._direct,e),Ze(s._inverse,s._direct),s._isIdentity=!1,s}static scale(e,s,n){const r=new Et;return Z0(r._direct,r._direct,[e,s,n]),Ze(r._inverse,r._direct),r._isIdentity=!1,r}static rotoTranslation(e,s){const n=new Et;return t2(n._direct,e.quat,s.vec3()),Ze(n._inverse,n._direct),n._isIdentity=!1,n}static fromRotationTranslationScale(e,s,n){const r=new Et;return s2(r._direct,e.quat,s.vec3(),n.vec3()),Ze(r._inverse,r._direct),r._isIdentity=!1,r}isFrame(){return!1}get values(){return this._direct.values()}get inverseValues(){return this._inverse.values()}buffer(){return new Float32Array(this._direct.values())}inverseBuffer(){return new Float32Array(this._inverse.values())}apply(e){return e.map(this)}compose(e){const s=new Et,{_direct:n,_inverse:r}=this,{_direct:o,_inverse:a}=e;return Wh(s._direct,o,n),Wh(s._inverse,r,a),s._isIdentity=!1,s}transpose(){const e=new Et;return J0(e._direct,this._direct),Ze(e._inverse,e._direct),e._isIdentity=!1,e}translation(e,s,n){const r=Et.translation(e,s,n);return this.compose(r)}rotationX(e){const s=Et.rotationX(e);return this.compose(s)}rotationY(e){const s=Et.rotationY(e);return this.compose(s)}rotationZ(e){const s=Et.rotationZ(e);return this.compose(s)}scale(e,s,n){const r=Et.scale(e,s,n);return this.compose(r)}invert(){const e=new Et;return e._direct=tn(this._inverse),e._inverse=tn(this._direct),e._isIdentity=this._isIdentity,e}get directMatrix(){return this._direct}get inverseMatrix(){return this._inverse}get isIdentity(){return this._isIdentity}get scaleVector(){const e=ir();return i2(e,this._direct),$t.fromValues(e[0],e[1],e[2])}get positionVector(){const e=ir();return e2(e,this._direct),$t.fromValues(e[0],e[1],e[2])}}const Gh=class Ks{constructor(){xi(this,"_direct"),xi(this,"_inverse"),this._direct=un(),this._inverse=un(),Hh(this._direct),Hh(this._inverse)}static bufferSize(){return 16*4}static world(){return new Ks}static translation(e){const s=new Ks,n=un();return kr(n,n,e.vec3()),s._inverse=n,Ze(s._direct,s._inverse),s}static rotationX(e,s){const n=new Ks,r=un();return kr(r,r,e.vec3()),sp(r,r,s),n._direct=r,Ze(n._inverse,n._direct),n}static rotationY(e,s){const n=new Ks,r=un();return kr(r,r,e.vec3()),np(r,r,s),n._direct=r,Ze(n._inverse,n._direct),n}static rotationZ(e,s){const n=new Ks,r=un();return kr(r,r,e.vec3()),rp(r,r,s),n._direct=r,Ze(n._inverse,n._direct),n}static lookAt(e,s,n){const r=new Ks;return op(r._inverse,e.vec3(),s.vec3(),n.vec3()),Ze(r._direct,r._inverse),r}isFrame(){return!0}toString(){return`Frame(${this.origin}, ${this.i}, ${this.j}, ${this.k})`}map(e){return this.compose(e)}unMap(e){return this.invert().compose(e)}compose(e){const s=new Ks,{_direct:n}=this,{_direct:r}=e;return Wh(s._direct,r,n),Ze(s._inverse,s._direct),s}toTransform(){return Et.fromMat4(this._inverse)}invert(){const e=new Ks;return e._direct=tn(this._inverse),e._inverse=tn(this._direct),e}get directMatrix(){return tn(this._direct)}get inverseMatrix(){return tn(this._inverse)}get i(){return Gt.fromValues(this._direct[0],this._direct[1],this._direct[2])}get j(){return Gt.fromValues(this._direct[4],this._direct[5],this._direct[6])}get k(){return Gt.fromValues(this._direct[8],this._direct[9],this._direct[10])}get o(){return it.fromValues(this._direct[12],this._direct[13],this._direct[14],this._direct[15])}get origin(){return it.fromValues(this._inverse[12],this._inverse[13],this._inverse[14],this._inverse[15])}relative(e){if(e&&z2(e)){const s=this.origin.relative(e),n=this.k.relative(e),r=this.i.relative(e);return Ks.from2Vectors(s,n,r)}return e.relative(this)}};xi(Gh,"from2Vectors",(t,e,s)=>{const n=new Gh,r=Ef(e)?e:Gt.fromVector(e),o=Gt.crossProduct(r,Ef(s)?s:Gt.fromVector(s)),a=[...Gt.crossProduct(o,r).coordinates,...o.coordinates,...r.coordinates,...t.coordinates];return n._direct=K0(...a),Ze(n._inverse,n._direct),n});let Tf=Gh;const z2=t=>t&&t.isFrame!==void 0?t.isFrame():!1;class gs{constructor(){xi(this,"_direct"),xi(this,"_inverse"),this._direct=Qa(),this._inverse=Qa()}static identity(){return new gs}static fromValues(e,s,n,r){const o=new gs;return o._direct=w2(e,s,n,r),Un(o._inverse,o._direct),o}static fromQuat(e){const s=new gs;return s._direct=Yl(e),Un(s._inverse,s._direct),s}static fromTransform(e){const s=ip();Y0(s,e.directMatrix);const n=new gs;return n._direct=up(n._direct,s),Un(n._inverse,n._direct),n}static rotationX(e){const s=new gs;return v2(s._direct,s._direct,e),Un(s._inverse,s._direct),s}static rotationY(e){const s=new gs;return x2(s._direct,s._direct,e),Un(s._inverse,s._direct),s}static rotationZ(e){const s=new gs;return g2(s._direct,s._direct,e),Un(s._inverse,s._direct),s}inverse(){const e=new gs;return e._direct=Yl(this._inverse),e._inverse=Yl(this._direct),e}compose(e){const s=new gs;return y2(s._direct,this._direct,e._direct),Un(s._inverse,s._direct),s}get quat(){return this._direct}}const k2=t=>t/180*Math.PI;var N2=Object.defineProperty,S2=(t,e,s)=>e in t?N2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Kt=(t,e,s)=>(S2(t,typeof e!="symbol"?e+"":e,s),s);const Af=()=>{let t=0,e=performance.now(),s=0;const n=[];return console.log("Init FPS",e),{getFPS:()=>n.reduce((r,o)=>r+o,0)/n.length,measureFPS:()=>(t=performance.now()-e,t<=1?n[s]:(s=(s+1)%10,n[s]=1e3/t,e=performance.now(),t)),getLastTimeSpan:()=>t}},M2=async({context:t,device:e,format:s},n)=>{t.configure({device:e,format:s,alphaMode:"opaque"});const r=e.createShaderModule({code:n});return(await r.getCompilationInfo()).messages.forEach(o=>{let a=o.message;o.lineNum&&(a=`Line ${o.lineNum}:${o.linePos} - "${n.substr(o.offset,o.length+40)}"
`+o.message),console.error("WGSL error: ",a)}),r},_2=t=>{const e=3*Et.bufferSize+8+4*(2*$t.bufferSize)+4*($t.bufferSize+it.bufferSize),s=4,n=s*(2*$t.bufferSize)+s*($t.bufferSize+it.bufferSize)+4*4,r=t.device.createBuffer({label:"TransBuffer",size:e+e%16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),o=t.device.createBuffer({label:"LightBuffer",size:n+n%16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),a=[{binding:0,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}}],l=t.device.createBindGroupLayout({label:"transformations",entries:a}),h=[{binding:0,resource:{buffer:r}},{binding:1,resource:{buffer:o}}],u=t.device.createBindGroup({label:"SceneData",layout:l,entries:h});return[l,u,[r,o]]},P2=t=>{const e=2*Et.bufferSize,s=t.device.createBuffer({label:"TransBuffer",size:e+e%16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),n=[{binding:0,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}}],r=t.device.createBindGroupLayout({label:"modelTransf",entries:n}),o=[{binding:0,resource:{buffer:s}}],a=t.device.createBindGroup({label:"SceneData",layout:r,entries:o});return[r,a,[s]]},L2=t=>{const e=t.device.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),s=[{binding:0,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}}],n=t.device.createBindGroupLayout({label:"color",entries:s}),r=[{binding:0,resource:{buffer:e}}],o=t.device.createBindGroup({label:"color",layout:n,entries:r});return[n,o,[e]]},I2=(t,e)=>{const s=[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{}}],n=t.device.createBindGroupLayout({label:"texture",entries:s}),r=[{binding:0,resource:e.view},{binding:1,resource:e.sampler}],o=t.device.createBindGroup({label:"texture",layout:n,entries:r});return[n,o]},V2=(t,e)=>{const{device:s}=t,[n,r,o]=_2(t),[a,l,h]=L2(t),[u,c,f]=P2(t),[p,g]=e?I2(t,e):[void 0,void 0],v=p?[n,a,u,p]:[n,a,u],m=[r,l,c,g],w=[o,h,f];return[s.createPipelineLayout({bindGroupLayouts:v}),m,w]},Df=(t,e,s)=>{const{device:n,format:r}=t,o=s.map(([a,l])=>{const[h,u,c]=V2(t,l),f={label:a.label,layout:h,multisample:{count:1},vertex:{module:e,entryPoint:a.vertexShader,buffers:[a.bufferLayout]},fragment:{module:e,entryPoint:a.fragmentShader,targets:[{format:r,blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}}}]},primitive:{topology:a.primitives,cullMode:a.cullMode},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"}},p=n.createRenderPipeline(f),g={...f,label:`${a.label}-alt`,primitive:{topology:"line-list",cullMode:"none"}},v=n.createRenderPipeline(g);return[a.id,{id:a.id,type:a.label,pipeline:p,altPipeline:v,geoRenderable:a,uniformBuffers:c,bindGroups:u}]});return new Map(o)},C2=(t,e)=>{let s="none",n=[0,0],r=[0,0],o=[0,0];t.addEventListener("contextmenu",a=>{a.preventDefault()}),t.addEventListener("wheel",a=>{a.ctrlKey?e.tilt(a.deltaY):e.zoom(a.deltaY)}),t.addEventListener("pointerdown",a=>{t.setPointerCapture(a.pointerId),n=[a.offsetX,a.offsetY],r=[0,0],o=n,s=`${a.ctrlKey?"ctrl-":""}mouse-${a.button}`,e.move(s,{origin:n,direction:r},o)}),t.addEventListener("pointermove",a=>{if(s==="none")return;const l=[a.offsetX,a.offsetY];r=[l[0]-o[0],l[1]-o[1]],o=l,e.move(s,{origin:n,direction:r},o)}),t.addEventListener("pointerup",a=>{t.releasePointerCapture(a.pointerId);const l=[a.offsetX,a.offsetY];r=[l[0]-n[0],l[1]-n[1]],r[0]<=.9&&r[1]<=.9&&e.click("none",l),e.move("none",{origin:n,direction:r},l),s="none"})},b2=(t,e,s=GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST)=>{const n=t.createBuffer({size:e.byteLength,usage:s,mappedAtCreation:!0});return new Float32Array(n.getMappedRange()).set(e),n.unmap(),n},Of=t=>{const{device:e,canvas:s}=t,n=e.createTexture({size:{width:s.width,height:s.height,depthOrArrayLayers:1},sampleCount:1,format:t.format,usage:GPUTextureUsage.RENDER_ATTACHMENT}),r=e.createTexture({label:"DepthTexture",sampleCount:1,size:[s.width,s.height,1],format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}),o=U2(window.getComputedStyle(s).backgroundColor);return{colorAttachments:[{view:n.createView(),clearValue:o,loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:r.createView(),depthClearValue:1,depthStoreOp:"store",depthLoadOp:"clear"}}},E2=async t=>{const e=await navigator.gpu.requestAdapter({powerPreference:"high-performance"});if(!e)throw new Error("WebGPU:adapter is NOT available!");const s=await e.requestAdapterInfo();console.log("WebGPU:adapter info",s),console.log("WebGPU:adapter is fallback:",e.isFallbackAdapter);const n=await e.requestDevice();if(!n)throw new Error("WebGPU:device is NOT available!");const r=t.getContext("webgpu");if(!r)throw new Error("WebGPU:context from instantiated Canvas not available!");const o=navigator.gpu.getPreferredCanvasFormat();return r.configure({device:n,format:o,usage:GPUTextureUsage.RENDER_ATTACHMENT,alphaMode:"opaque"}),{context:r,device:n,canvas:t,format:o}},T2=t=>typeof t=="string",A2=(t,[e,s],n)=>({view:n&&n.view?n.view(t.view):Et.lookAt(it.fromValues(-5,-5,-5),it.fromValues(0,0,0),Gt.fromValues(0,0,1)),projection:n&&n.projection?n.projection(t.projection):Et.perspective(Math.PI/5,e/s,.1,100)}),fp=(t,e)=>Math.log(t)/Math.log(e),D2=`const MAX_DIR_LIGHTS: u32 = 4;
const MAX_POINT_LIGHTS: u32 = 4;

struct DirectionalLight {
  dir: vec4<f32>,
  col: vec4<f32>,
};

struct PointLight {
  pos: vec4<f32>,  // Position of the light
  col: vec4<f32>,  // Color of the light
};

struct SceneData {
  view: mat4x4<f32>,
  invertView: mat4x4<f32>,
  projection: mat4x4<f32>,
};

struct ModelData {
  model: mat4x4<f32>,
  modelInverseTranspose: mat4x4<f32>,
};

struct SceneLights {
  dirLights: array<DirectionalLight, MAX_DIR_LIGHTS>,
  pointLights: array<PointLight, MAX_POINT_LIGHTS>,
  ambient: vec4<f32>,
};

struct ObjectData {
  model: mat4x4<f32>,
};

struct TextFragment {
  @builtin(position) position: vec4<f32>,
  @location(0) texCoord: vec2<f32>,
  @location(1) normal: vec3<f32>,
  @location(2) pos: vec3<f32>,
  @location(3) eye: vec3<f32>,
};

struct ColorFragment {
  @builtin(position) position: vec4<f32>,
  @location(0) normal: vec3<f32>,
  @location(1) pos: vec3<f32>,
  @location(2) eye: vec3<f32>,
};

struct ColorLineFragment {
  @builtin(position) position: vec4<f32>,
  @location(0) viewZ: f32,
  @location(1) targetZ: f32,
};

struct ColorData {
    color: vec4<f32>,
};


@group(0) @binding(0) var<uniform> sceneData: SceneData;
@group(0) @binding(1) var<uniform> sceneLights: SceneLights;
@group(1) @binding(0) var<uniform> myColor: ColorData;
@group(2) @binding(0) var<uniform> myModel: ModelData;
@group(3) @binding(0) var myTexture: texture_2d<f32>;
@group(3) @binding(1) var mySampler: sampler;

fn computeDiffuseColor(
    eye: vec3<f32>,
    pos: vec3<f32>,
    normal: vec3<f32>,
    sceneLights: SceneLights) -> vec3<f32> {
  let shininess: f32 = 32.0;
  var diffuse: vec3<f32> = sceneLights.ambient.rgb;
  for (var i: u32 = 0; i < MAX_DIR_LIGHTS; i = i + 1) {
    if (sceneLights.dirLights[i].col.a != 0.0) {
      let lightDir: vec3<f32> = normalize(sceneLights.dirLights[i].dir.xyz); //
      let lightColor: vec3<f32> = sceneLights.dirLights[i].col.rgb;
      var NdotL: f32 = pow(max(dot(normal, lightDir), 0), 2);
      diffuse = diffuse + (NdotL * lightColor);
    }
  }
  for (var i: u32 = 0; i < MAX_POINT_LIGHTS; i = i + 1) {
    if (sceneLights.pointLights[i].col.a != 0.0) {
      let dir = sceneLights.pointLights[i].pos.xyz - pos; //  - pos.xyz;
      let attenuation = 1.0 - clamp(pow( length(dir)/20, 2.0), 0.0, 1.0 );

      let lightDir: vec3<f32> = normalize(dir);
      let lightColor: vec3<f32> = sceneLights.pointLights[i].col.rgb;
      var NdotL: f32 = pow(max(dot(normal, lightDir), 0), 2);
      let diffuseColor = NdotL * lightColor;

      // Specular
      let V = normalize(pos - eye);
      let R = normalize(reflect(lightDir, normal));
      let specularIntensity = pow(max(dot(V, R), 0.0), shininess);
      let specularColor = specularIntensity * lightColor;

      diffuse = diffuse + (diffuseColor+ specularColor) * attenuation;
    }
  }
  return clamp(diffuse, vec3<f32>(0.0, 0.0, 0.0), vec3<f32>(1.0, 1.0, 1.0));
}


// ----------------------------------------------------------------------------------------------- Texture Shaders

@vertex
fn vertexTextureShader(
    @location(0) vertexPosition: vec3<f32>,
    @location(1) vertexTexCoord: vec2<f32>,
    @location(2) vertexNormal: vec3<f32>) -> TextFragment {
  var output: TextFragment;
  var vertex = myModel.model * vec4<f32>(vertexPosition, 1.0);
  output.position = sceneData.projection * sceneData.view * vertex;
  output.texCoord = vec2<f32>(vertexTexCoord);
  output.normal = (myModel.modelInverseTranspose * vec4<f32>(vertexNormal, 0.0)).xyz;
  output.pos = vertex.xyz;
  output.eye = sceneData.invertView[3].xyz;

  return output;
}

@fragment
fn fragmentTextureShader(in: TextFragment) -> @location(0) vec4<f32> {
  let diffuse: vec3<f32> = computeDiffuseColor( in.eye, in.pos, normalize(in.normal), sceneLights );
  let texColor: vec4<f32> = textureSample(myTexture, mySampler, in.texCoord);

  return vec4<f32>(texColor.rgb * diffuse, 1.0);
}

// ----------------------------------------------------------------------------------------------- Color Shaders

@vertex
fn vertexColorShader(
    @location(0) vertexPosition: vec3<f32>,
    @location(1) vertexNormal: vec3<f32>) -> ColorFragment {
  var output: ColorFragment;
  var vertex = myModel.model * vec4<f32>(vertexPosition, 1.0);
  output.normal = (myModel.modelInverseTranspose * vec4<f32>(vertexNormal, 0.0)).xyz;
  output.position = sceneData.projection * sceneData.view * vertex;
  output.pos = vertex.xyz;
  output.eye = sceneData.invertView[3].xyz;
  // Transform the light direction in camera coordinat with the inverse of the view matrix to view space
  // output.light =  normalize(sceneData.invertView * sceneData.light.dir);
  // output.lightCol = sceneData.light.col;
  return output;
}

@fragment
fn fragmentColorShader(in: ColorFragment) -> @location(0) vec4<f32> {
  let diffuse: vec3<f32> = computeDiffuseColor( in.eye, in.pos, normalize(in.normal), sceneLights );
  return vec4<f32>(myColor.color.rgb * diffuse.rgb, myColor.color.a);
}


@vertex
fn vertexLineShader(
    @location(0) vertexPosition: vec3<f32>) -> ColorLineFragment {
  var output: ColorLineFragment;
  var vertex = myModel.model * vec4<f32>(vertexPosition, 1.0);

  let eye  = vec4<f32>(sceneData.invertView[3].xyz, 1.0);

  let eyeInViewSpace = sceneData.view * eye;
  let positionInViewSpace = sceneData.view * vertex;
  let bias = 0.002 * positionInViewSpace.z;
  let biasedPositionInViewSpace = positionInViewSpace - vec4<f32>(0.0, 0.0, bias, 0.0);
  output.viewZ = -biasedPositionInViewSpace.z;
  output.targetZ = eyeInViewSpace.z;
  output.position = sceneData.projection * biasedPositionInViewSpace;
  return output;
}


@fragment
fn fragmentLineShader(in: ColorLineFragment) -> @location(0) vec4<f32> {

  let att: f32 =  clamp(in.viewZ / 300, 0.0, 1.0);
  let a: f32 = myColor.color.a - (myColor.color.a * att);

  return vec4<f32>(myColor.color.rgb,a);
  // return vec4<f32>(myColor.color.rgb, a);
}
`,O2="",F2=t=>{const{canvas:e,context:s,device:n}=t;let[r,o]=[e.width,e.height];return new ResizeObserver(a=>{const{width:l,height:h}=a[0].contentRect;[r,o]=[Math.round(l),Math.round(h)]}).observe(e.parentElement),a=>{if(r===e.width&&o===e.height){const f=s.getCurrentTexture(),p=a.colorAttachments;return p[0].view=f.createView({label:"ColorView"}),a}e.width=r,e.height=o;const l=n.createTexture({label:"DepthTexture",sampleCount:1,size:[r,o,1],format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}),h=n.createTexture({label:"ColorTexture",size:{width:r,height:o,depthOrArrayLayers:1},sampleCount:1,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT}),u=a.colorAttachments;u[0].view=h.createView({label:"ColorView"});const c=a.depthStencilAttachment;return c.view=l.createView({label:"DepthView"}),a}};class cc{constructor(e,s,n,r){Kt(this,"canvas"),Kt(this,"context"),Kt(this,"device"),Kt(this,"format"),Kt(this,"_handleOnRender"),Kt(this,"_vertexCount",0),Kt(this,"_activeRenderLoop",!1),Kt(this,"_pipelineMode","default"),Kt(this,"_shaderModule"),Kt(this,"_pipelines",new Map),Kt(this,"_transformations",{projection:Et.identity(),view:Et.identity()}),Kt(this,"_renderPassDescription"),Kt(this,"_cameraTransHandler"),Kt(this,"_lightsHandler"),Kt(this,"_modelHandlers",{}),Kt(this,"_fps",Af()),Kt(this,"_rebuildViewTexture"),Kt(this,"_ambientLight",[.1,.1,.1,1]),Kt(this,"_dirLights",[{dir:Gt.fromValues(-1,-1,1),col:[.3,.3,.3,1]},{dir:Gt.fromValues(1,1,1),col:[.4,.3,.3,1]},{dir:Gt.fromValues(1,0,0),col:[.5,.5,.5,0]},{dir:Gt.fromValues(-1,-1,-1),col:[.3,.3,.3,0]}]),Kt(this,"_pointLights",[{pos:it.fromValues(-12,12,8),col:[.5,.5,.2,1]},{pos:it.fromValues(12,12,8),col:[.4,.2,.2,1]},{pos:it.fromValues(-12,-12,8),col:[.2,.2,.5,1]},{pos:it.fromValues(12,-12,8),col:[.5,.1,.5,1]}]),Kt(this,"render",()=>{const{device:o}=this;this._vertexCount=0,this._handleOnRender&&this._handleOnRender(this);let a=this._renderPassDescription??Of(this);this._rebuildViewTexture&&(this._renderPassDescription=this._rebuildViewTexture(a));const l=o.createCommandEncoder(),h=l.beginRenderPass(a),u=this._fps.getLastTimeSpan();this.updateLights(u),this.pipelines.filter(({geoRenderable:c})=>c.color[3]===1).forEach((c,f)=>{this.renderPipeline(c,f,h,u)}),this.pipelines.filter(({geoRenderable:c})=>c.color[3]<1).forEach((c,f)=>{this.renderPipeline(c,f,h,u)}),h.end(),o.queue.submit([l.finish()])}),this.canvas=e,this.context=s,this.device=n,this.format=r,this._rebuildViewTexture=F2(this),this.device.lost.then(()=>{console.log("WebGPU:device lost")})}get vertexCount(){return this._vertexCount}get fps(){return this._fps.getFPS()}get dirLights(){return this._dirLights}get pontLights(){return this._pointLights}setAmbientLight(e){this._ambientLight=e}setLight(e,s,n){switch(e){case"directional":this._dirLights[s]=n;break;case"point":this._pointLights[s]=n;break}}static async build(e){return E2(e).then(({canvas:s,context:n,device:r,format:o})=>new cc(s,n,r,o))}setPipelineMode(e){this._pipelineMode=e}get pipelines(){return[...this._pipelines.values()]}getScene(){return[...this._pipelines.values()].map(({geoRenderable:e})=>[e,void 0])}async setupShaders(e){if(this._shaderModule)return this;let s;if(T2(e))switch(e){case"standard-3d":s=D2;break;case"standard-2d":default:s=O2;break}else s=e.source;return this._shaderModule=await M2(this,s),this}setScene(e){if(!this._shaderModule)throw new Error("WebGPU:shader module is NOT available!");e.forEach(([s,n])=>{s.buildGpuBuffer(this)}),this._pipelines=Df(this,this._shaderModule,e),this._renderPassDescription=Of(this)}addToScene(e){if(!this._shaderModule)throw new Error("WebGPU:shader module is NOT available!");e.forEach(([s,n])=>{s.buildGpuBuffer(this)}),Df(this,this._shaderModule,e).forEach((s,n)=>{this._pipelines.set(n,s)})}removeFromScene(e){return this._pipelines.delete(e)}clearScene(){this._pipelines.clear()}captureMouseMotion(e){C2(this.canvas,{move:(e==null?void 0:e.move)??((s,n,r)=>{}),click:(e==null?void 0:e.click)??((s,n)=>{}),zoom:(e==null?void 0:e.zoom)??(s=>{}),tilt:(e==null?void 0:e.tilt)??(s=>{})})}sceneIntoBuffer(e){const{device:s}=this,{projection:n,view:r}=this._transformations,o=r.invert();let a=0;s.queue.writeBuffer(e[0],a,r.buffer()),a+=Et.bufferSize,s.queue.writeBuffer(e[0],a,o.buffer()),a+=Et.bufferSize,s.queue.writeBuffer(e[0],a,n.buffer()),a+=Et.bufferSize;let l=0;const h=new Float32Array(this._dirLights.flatMap(({dir:f,col:p})=>[...f.coordinates,...p]));s.queue.writeBuffer(e[1],l,h),l+=h.byteLength;const u=new Float32Array(this._pointLights.flatMap(({pos:f,col:p})=>[...f.coordinates,...p]));s.queue.writeBuffer(e[1],l,u),l+=u.byteLength;const c=new Float32Array(this._ambientLight);s.queue.writeBuffer(e[1],l,c)}updateLights(e){if(!this._lightsHandler)return;const{dirLights:s,posLights:n}=this._lightsHandler;s&&s(e,this._dirLights),n&&n(e,this._pointLights)}onRender(e){this._handleOnRender=e}renderPipeline(e,s,n,r){const{pipeline:o,altPipeline:a,uniformBuffers:l,bindGroups:h,geoRenderable:u}=e,{device:c}=this;s===0&&(this.sceneIntoBuffer(l[0]),n.setBindGroup(0,h[0]));const f=this._pipelineMode==="default"?o:a;n.setPipeline(f);const p=new Float32Array(u.color);c.queue.writeBuffer(l[1][0],0,p),n.setBindGroup(1,h[1]),this._modelHandlers[u.id]&&u.transform(r,this._modelHandlers[u.id]),c.queue.writeBuffer(l[2][0],0,u.transformationData),n.setBindGroup(2,h[2]),h[3]&&n.setBindGroup(3,h[3]),u.buffers.forEach((g,v)=>{const m=u.getVertexCountPerStrip(v);this._vertexCount+=m,n.setVertexBuffer(0,g),n.draw(m)})}renderLoop(){const{width:e,height:s}=this.canvas;this._transformations=A2(this._transformations,[e,s],this._cameraTransHandler),this.render(),this._fps.measureFPS(),this._activeRenderLoop&&requestAnimationFrame(this.renderLoop.bind(this))}beginRenderLoop(e){this._fps=Af(),this._cameraTransHandler=e==null?void 0:e.camera,this._lightsHandler=e==null?void 0:e.lights,this._modelHandlers=(e==null?void 0:e.models)??{},this._activeRenderLoop=!0,this.renderLoop()}endRenderLoop(){this._activeRenderLoop=!1}}let Yr=new Map;const R2=async t=>{var e,s;if(!navigator.gpu)return Promise.reject(new Error("WebGPU is not supported in this browser!"));const n=(e=Yr.get(t.id))==null?void 0:e.gpu;if(n)return Promise.resolve(n);if((s=Yr.get(t.id))!=null&&s.initializing)return new Promise((o,a)=>{setTimeout(()=>{var l;const h=(l=Yr.get(t.id))==null?void 0:l.gpu;if(h)return console.warn("WebGPU connection already initialized. Reusing previous connection."),o(h);a(new Error("WebGPU already initialization is taking too long!"))},100)});Yr.set(t.id,{initializing:!0});const r=await cc.build(t);return Yr.set(t.id,{initializing:!1,gpu:r}),Promise.resolve(r)},U2=t=>{let e=[];const s=/rgba?\(([^)]+)\)/.exec(t);if(s&&s[1]&&(e=s[1].split(",").map(l=>parseFloat(l.trim()))),e.length<3)throw new Error("Invalid RGB/RGBA format");const n=e[0]/255,r=e[1]/255,o=e[2]/255,a=e.length===4?e[3]:1;return{r:n,g:r,b:o,a}},wn=4;class Uo{constructor(e,s,n=[1,1,1,1]){Kt(this,"_body",null),Kt(this,"_id"),Kt(this,"_bufferData",null),Kt(this,"_vertices",[]),Kt(this,"_colors",[]),Kt(this,"_normals",[]),Kt(this,"_textures",[]),Kt(this,"_color",[1,1,1,1]),Kt(this,"_hasTextures",!1),Kt(this,"_vertexByteSize",0),Kt(this,"_buffers",[]),Kt(this,"_bufferLayout",null),Kt(this,"_topology","triangle-list"),Kt(this,"_cullMode","back"),Kt(this,"_transformation",{rotation:gs.identity(),scale:$t.fromValues(1,1,1),translation:$t.fromValues(0,0,0)}),this._id=e,this._topology=s,this._vertexByteSize=3*4,this._color=n}get id(){return this._id}get label(){return this._topology}get translationVector(){return this._transformation.translation}get orientationRotation(){return this._transformation.rotation}get scaleVector(){return this._transformation.scale}get hasTextures(){return this._hasTextures}get vertexShader(){return this._topology==="triangle-strip"||this._topology==="triangle-list"?this.hasTextures?"vertexTextureShader":"vertexColorShader":"vertexLineShader"}get fragmentShader(){return this._topology==="triangle-strip"||this._topology==="triangle-list"?this.hasTextures?"fragmentTextureShader":"fragmentColorShader":"fragmentLineShader"}get color(){return this._color}get primitives(){return this._topology}get cullMode(){return this._topology==="triangle-strip"||this._topology==="triangle-list"?this._cullMode:"none"}get vertexCount(){return this._vertices.reduce((e,s)=>e+s.length/3,0)}get body(){return this._body}get transformation(){return Et.fromRotationTranslationScale(this._transformation.rotation,this._transformation.translation,this._transformation.scale)}get transformationData(){const e=this.transformation;return new Float32Array([...e.values,...e.transpose().invert().values])}setBody(e){return this._body=e,this}scale(e){return this._transformation.scale=this._transformation.scale.multiply(e),this}translate(e){return this._transformation.translation=this._transformation.translation.add(e),this}rotate(e){return this._transformation.rotation=this._transformation.rotation.compose(e),this}rotoTranslate(e,s){const n=this._transformation;return n.rotation=e,n.translation=s,this}transform(e,s){return this._transformation=s(e,this._transformation),this}getVertexCountPerStrip(e){return this._vertices[e].length/3}get vertexByteSize(){return this._vertexByteSize}getByteSizePerStrip(e=0){return this._vertices[e].length*wn+(this._colors.length>0?this._colors[e].length*wn:0)+(this._normals.length>0?this._normals[e].length*wn:0)+(this._textures.length>0?this._textures[e].length*wn:0)}setCullMode(e){return this._cullMode=e,this}addVertices(e){this._vertices.push(e)}getBufferData(){return this._bufferData!==null?this._bufferData:(this._bufferData=this._vertices.map((e,s)=>{const n=[];for(let r=0,o=0,a=0,l=0;r<e.length;r+=3,o+=4,a+=3,l+=2){const h=[e[r+0],e[r+1],e[r+2]];this._colors.length>s&&(h.push(this._colors[s][o+0]),h.push(this._colors[s][o+1]),h.push(this._colors[s][o+2]),h.push(this._colors[s][o+3])),this._textures.length>s&&(h.push(this._textures[s][l+0]),h.push(this._textures[s][l+1])),this._normals.length>s&&(h.push(this._normals[s][a+0]),h.push(this._normals[s][a+1]),h.push(this._normals[s][a+2])),n.push(...h)}return new Float32Array(n)}),this._bufferData)}get layouts(){let e=0,s=0;const n=[{shaderLocation:e,offset:0,format:"float32x3"}];return e+=1,s+=3*wn,this._colors.length>0&&(n.push({shaderLocation:e,offset:s,format:"float32x4"}),e+=1,s+=4*wn),this._textures.length>0&&(n.push({shaderLocation:e,offset:s,format:"float32x2"}),e+=1,s+=2*wn),this._normals.length>0&&(n.push({shaderLocation:e,offset:s,format:"float32x3"}),e+=1,s+=3*wn),n}get buffers(){return this._buffers}get bufferLayout(){if(this._bufferLayout===null)throw new Error("TriangleData: Buffer layout is not available! - Did you call buildGpuBuffer() ?");return this._bufferLayout}buildGpuBuffer(e){this._buffers=this.getBufferData().map(s=>b2(e.device,s)),this._bufferLayout={arrayStride:this.vertexByteSize,attributes:this.layouts}}addColors(e){this._colors.length===0&&(this._vertexByteSize+=4*4),this._colors.push(e)}addNormals(e){var s;this._normals.length===0&&(this._vertexByteSize+=3*4),(s=this._normals)==null||s.push(e)}addTextures(e){this._textures.length===0&&(this._vertexByteSize+=2*4,this._hasTextures=!0),this._textures.push(e)}}const Ff=(t,e)=>{const s=it.fromValues(t[e+0],t[e+1],t[e+2]),n=it.fromValues(t[e+3],t[e+4],t[e+5]),r=it.fromValues(t[e+6],t[e+7],t[e+8]),o=$t.fromPoints(n,s),a=$t.fromPoints(n,r);return Gt.crossProduct(a,o)},j2=(t,e)=>{const s=it.fromValues(t[e-6],t[e-5],t[e-4]),n=it.fromValues(t[e-3],t[e-2],t[e-1]),r=it.fromValues(t[e+0],t[e+1],t[e+2]),o=$t.fromPoints(n,s),a=$t.fromPoints(n,r);return Gt.crossProduct(a,o)},fc=(t,e)=>{const s=[],n=t==="triangle-list"?9:3;if(t==="triangle-strip"){let r=Ff(e,0);s.push(...r.triplet),s.push(...r.triplet);for(let o=3;o<e.length;o+=n)j2(e,o),s.push(...r.triplet)}else for(let r=0;r<e.length;r+=n){const o=Ff(e,r);s.push(...o.triplet),s.push(...o.triplet),s.push(...o.triplet)}return s},B2=(t,e)=>{const{color:s,id:n}=e,r=[it.fromValues(.5,-.5,.5).map(t),it.fromValues(-.5,-.5,.5).map(t),it.fromValues(-.5,-.5,-.5).map(t),it.fromValues(.5,-.5,-.5).map(t),it.fromValues(.5,-.5,.5).map(t),it.fromValues(-.5,-.5,-.5).map(t),it.fromValues(.5,.5,.5).map(t),it.fromValues(.5,-.5,.5).map(t),it.fromValues(.5,-.5,-.5).map(t),it.fromValues(.5,.5,-.5).map(t),it.fromValues(.5,.5,.5).map(t),it.fromValues(.5,-.5,-.5).map(t),it.fromValues(-.5,.5,.5).map(t),it.fromValues(.5,.5,.5).map(t),it.fromValues(.5,.5,-.5).map(t),it.fromValues(-.5,.5,-.5).map(t),it.fromValues(-.5,.5,.5).map(t),it.fromValues(.5,.5,-.5).map(t),it.fromValues(-.5,-.5,.5).map(t),it.fromValues(-.5,.5,.5).map(t),it.fromValues(-.5,.5,-.5).map(t),it.fromValues(-.5,-.5,-.5).map(t),it.fromValues(-.5,-.5,.5).map(t),it.fromValues(-.5,.5,-.5).map(t),it.fromValues(.5,.5,.5).map(t),it.fromValues(-.5,.5,.5).map(t),it.fromValues(-.5,-.5,.5).map(t),it.fromValues(-.5,-.5,.5).map(t),it.fromValues(.5,-.5,.5).map(t),it.fromValues(.5,.5,.5).map(t),it.fromValues(.5,-.5,-.5).map(t),it.fromValues(-.5,-.5,-.5).map(t),it.fromValues(-.5,.5,-.5).map(t),it.fromValues(.5,.5,-.5).map(t),it.fromValues(.5,-.5,-.5).map(t),it.fromValues(-.5,.5,-.5).map(t)].flatMap(l=>l.triplet),o=new Uo(n,"triangle-list",s);o.addVertices(new Float32Array(r)),s||o.addTextures(new Float32Array([0,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1,1,0,1,0,0,0,0,1,0,1,1,1,1,0,0,0,0,1,1,0]));const a=fc("triangle-list",r);return o.addNormals(new Float32Array(a)),o},$2=()=>B2,Rf=(t,e,s,n)=>{const r=[],o=s==="up"?0:Math.PI*2,a=s==="up"?Math.PI/t:-Math.PI/t,l=s==="up"?h=>h<Math.PI*2:h=>h>0;for(let h=o;l(h);h+=a){const u=it.fromValues(0,0,e).map(n),c=it.fromValues(.5*Math.cos(h),.5*Math.sin(h),e).map(n),f=it.fromValues(.5*Math.cos(h+a),.5*Math.sin(h+a),e).map(n);r.push(...u.triplet),r.push(...c.triplet),r.push(...f.triplet)}return[r,fc("triangle-list",r)]},H2=(t,e,s,n)=>{const r=[],o=[],a=Math.PI/t,l=it.fromValues(0,0,e).map(n),h=it.fromValues(0,0,s).map(n);for(let u=0;u<Math.PI*2;u+=a){const c=it.fromValues(.5*Math.cos(u),.5*Math.sin(u),e).map(n),f=Gt.fromVector($t.fromPoints(c,l));r.push(...c.triplet),o.push(...f.triplet);const p=it.fromValues(.5*Math.cos(u+a),.5*Math.sin(u+a),e).map(n),g=Gt.fromVector($t.fromPoints(p,l));r.push(...p.triplet),o.push(...g.triplet);const v=it.fromValues(.5*Math.cos(u),.5*Math.sin(u),s).map(n),m=Gt.fromVector($t.fromPoints(v,h));r.push(...v.triplet),o.push(...m.triplet);const w=it.fromValues(.5*Math.cos(u),.5*Math.sin(u),s).map(n),x=Gt.fromVector($t.fromPoints(w,h));r.push(...w.triplet),o.push(...x.triplet);const y=it.fromValues(.5*Math.cos(u+a),.5*Math.sin(u+a),e).map(n),d=Gt.fromVector($t.fromPoints(y,l));r.push(...y.triplet),o.push(...d.triplet);const z=it.fromValues(.5*Math.cos(u+a),.5*Math.sin(u+a),s).map(n),k=Gt.fromVector($t.fromPoints(z,h));r.push(...z.triplet),o.push(...k.triplet)}return[r,o]},W2=(t,e)=>{const{steps:s,color:n,id:r}=e,o=[],a=[],[l,h]=Rf(s,.5,"up",t),[u,c]=Rf(s,-.5,"down",t),[f,p]=H2(s,-.5,.5,t);o.push(...l),o.push(...u),o.push(...f),a.push(...h),a.push(...c),a.push(...p);const g=new Uo(r,"triangle-list",n);return g.addVertices(new Float32Array(o)),g.addNormals(new Float32Array(a)),g},q2=()=>W2,vs=.5257311121191336,xs=.8506508083520399,G2=[Gt.fromValues(-vs,0,xs),Gt.fromValues(vs,0,xs),Gt.fromValues(-vs,0,-xs),Gt.fromValues(vs,0,-xs),Gt.fromValues(0,xs,vs),Gt.fromValues(0,xs,-vs),Gt.fromValues(0,-xs,vs),Gt.fromValues(0,-xs,-vs),Gt.fromValues(xs,vs,0),Gt.fromValues(-xs,vs,0),Gt.fromValues(xs,-vs,0),Gt.fromValues(-xs,-vs,0)],Q2=[[0,4,1],[0,9,4],[9,5,4],[4,5,8],[4,8,1],[8,10,1],[8,3,10],[5,3,8],[5,2,3],[2,7,3],[7,10,3],[7,6,10],[7,11,6],[11,0,6],[0,1,6],[6,1,10],[9,0,11],[9,11,2],[9,2,5],[7,2,11]];function X2(t,e){return Gt.fromVector(t.add(e))}function dp(t,e,s=1){const n=new Map,r=[];function o(a,l){const h=a<l,u=`${h?a:l}-${h?l:a}`,c=n.get(u);if(c)return c;const f=X2($t.fromValues(...t[a].triplet),$t.fromValues(...t[l].triplet));t.push(f);const p=t.length-1;return n.set(u,p),p}for(const[a,l,h]of e){const u=o(a,l),c=o(a,h),f=o(l,h);r.push([a,u,c]),r.push([l,f,u]),r.push([h,c,f]),r.push([u,f,c])}return s===1?[t,r]:dp(t,r,s-1)}const Y2=(t,e)=>{const{steps:s,color:n,id:r}=e,[o,a]=dp(G2,Q2,s),l=[],h=[],u=it.fromValues(0,0,0).map(t);a.forEach(f=>{const p=it.fromVector(o[f[2]]).scale(1).map(t),g=it.fromVector(o[f[1]]).scale(1).map(t),v=it.fromVector(o[f[0]]).scale(1).map(t),m=Gt.fromVector($t.fromPoints(p,u)),w=Gt.fromVector($t.fromPoints(g,u)),x=Gt.fromVector($t.fromPoints(v,u));l.push(...p.triplet),l.push(...g.triplet),l.push(...v.triplet),h.push(...m.triplet),h.push(...w.triplet),h.push(...x.triplet)});const c=new Uo(r,"triangle-list",n);return c.addVertices(new Float32Array(l)),c.addNormals(new Float32Array(h)),c},K2=()=>Y2,J2=(t,e)=>{const{color:s,steps:n,id:r}=e,o=t.scaleVector,a=Math.max(o.x,o.y),l=Math.pow(n,Math.floor(fp(a,n)))/n,h=Math.floor(o.x/l),u=Math.floor(o.y/l),c=1/h,f=1/u,p=[];for(let g=0;g<h;g++){p.push([]);for(let v=0;v<u+1;v++)p[g].push(it.fromValues(-.5+c*g,-.5+f*v,0).map(t)),p[g].push(it.fromValues(-.5+c*(g+1),-.5+f*v,0).map(t))}return p.map(g=>g.flatMap(v=>v.triplet)).map(g=>{const v=fc("triangle-strip",g);return[new Float32Array(g),new Float32Array(v)]}).reduce((g,[v,m])=>(g.addVertices(v),g.addNormals(m),g),new Uo(r,"triangle-strip",s)).setCullMode("none")},Z2=()=>J2,ty=(t,e)=>{const{color:s,steps:n,id:r}=e,o=t.scaleVector,a=Math.max(o.x,o.y),l=Math.pow(n,Math.floor(fp(a,n)))/n,h=Math.floor(o.x/l),u=Math.floor(o.y/l),c=1/h,f=1/u,p=[];for(let v=0;v<h+1;v++){const m=it.fromValues(-.5+c*v,-.5,0).map(t),w=it.fromValues(-.5+c*v,.5,0).map(t);p.push(m,w)}for(let v=0;v<u+1;v++){const m=it.fromValues(-.5,-.5+f*v,0).map(t),w=it.fromValues(.5,-.5+f*v,0).map(t);p.push(m,w)}const g=new Uo(r,"line-list",s);return g.addVertices(new Float32Array(p.flatMap(v=>v.triplet))),g},ey=()=>ty,iy=(t,e=[10,10,10])=>{let s=it.fromValues(0,0,0),n=it.fromValues(...e),r=n.x===0&&n.y===0?Gt.fromValues(0,1,0):Gt.fromValues(0,0,1),o=[0,0],a=[0,0],l=0,h=0,u=Math.PI/5,c=$t.fromPoints(n,s).lengthSquare,f=Tf.lookAt(n,s,r),p=!1;return[{move:(g,v,m)=>{let w=Math.min(t.canvas.width,t.canvas.height),x=1/w*6,y=u/w*2;switch(g){case"mouse-0":o=[v.direction[0]*x,v.direction[1]*x],p=!0;break;case"mouse-1":a=[-v.direction[0]*y,v.direction[1]*y];break;case"mouse-2":u+=v.direction[1]*y;break;case"none":p=!1;break}},zoom:g=>{l=g*.001},tilt:g=>{h=g*5e-4,p=!1}},{view:g=>{if(!g||g!=null&&g.isIdentity)return Et.lookAt(n,s,r);const v=$t.fromPoints(n,s).scale(1-l);v.length>1.2&&(n=s.add(v));const m=$t.fromPoints(s,n),w=Et.move(m).apply(f),x=[Math.tan(a[0])*c,Math.tan(a[1])*c],y=$t.fromValues(x[0],x[1],0).absolute(w),d=w.relative(n);let z=w.relative(r);z=Et.rotationZ(h).apply(z);const k=Et.rotationX(-o[1]).compose(Et.rotationY(-o[0]));n=k.apply(d).absolute(w),r=k.apply(z).absolute(w);const N=Et.move(y);return s=N.apply(s),n=N.apply(n),f=Tf.lookAt(n,s,r),p||(o=[o[0]*.95,o[1]*.95],h*=.9,l*=.9,Math.abs(o[0])<.001&&Math.abs(o[1])<.001&&Math.abs(h)<.001&&Math.abs(l)<.001&&(o=[0,0],h=0,l=0)),a=[0,0],c=$t.fromPoints(n,s).length,f.toTransform()},projection:g=>{const v=t.canvas.width/t.canvas.height,m=$t.fromPoints(n,s).length,w=Math.max(400,m*.8);return Et.perspective(u,v,Math.max(.01,m-w),m+w)}}]},sy=({onError:t,onConnected:e})=>{const s=Zs.useRef(null),[n,r]=Zs.useState(null),[o,a]=Zs.useState("0"),[l,h]=Zs.useState(0),[u,c]=Zs.useState(!1);return Zs.useEffect(()=>{const f=setTimeout(()=>{n&&!u&&(e(n),c(!0))},10),p=setInterval(()=>{n&&u&&(a(n.fps.toFixed(0)),h(n.vertexCount))},1e3);return()=>{p&&(clearInterval(p),clearTimeout(f))}},[n,u,e]),Zs.useEffect(()=>(R2(s.current).then(f=>f.setupShaders("standard-3d")).then(f=>{if(!f)return;const[p,g]=iy(f,[15,15,15]);f.captureMouseMotion(p),f.setScene([]),f.beginRenderLoop({camera:g}),r(f)}).catch(f=>{console.error(f),t(f)}),()=>{n&&(n.endRenderLoop(),r(null))}),[]),se.jsxs("div",{className:"w-full h-full relative",children:[se.jsx("canvas",{className:"bg-black text-yellow-400 w-full h-full",ref:s,width:600,height:600}),";",se.jsxs("div",{className:"absolute top-0 right-0 p-2 text-xs text-gray-400 bg-gray-700/25 w-40 text-left",children:["FPS: ",o]}),se.jsxs("div",{className:"absolute top-8 right-0 p-2 text-xs text-gray-400 bg-gray-700/25 w-40 text-left",children:["Vtx: ",Math.round(l/1e3),"K"]})]})},Kr="border-t-[1px] border-b-[1px] border-t-slate-800 border-b-slate-900",Jr="flex flex-row justify-center items-center cursor-pointer m-1 mb-0",ra="btn btn-outline btn-primary w-[48px] p-0",ny=({onSelected:t,onClear:e})=>se.jsxs("ul",{className:"flex flex-col w-[52px] items-stretch",children:[se.jsx("li",{className:`h-[45px] ${Kr} ${Jr}`,children:se.jsx("button",{className:ra,onClick:()=>t("plane"),children:se.jsx("img",{src:"plane-48.png",alt:"C"})})},"1"),se.jsx("li",{className:`h-[45px] ${Kr} ${Jr}`,children:se.jsx("button",{className:ra,onClick:()=>t("sphere"),children:se.jsx("img",{src:"sphere-48.png",alt:"C"})})},"2"),se.jsx("li",{className:`h-[45px] ${Kr} ${Jr}`,children:se.jsx("button",{className:ra,onClick:()=>t("cube"),children:se.jsx("img",{src:"cube-48.png",alt:"C"})})},"3"),se.jsx("li",{className:`h-[52px] ${Kr} ${Jr}`,children:se.jsx("button",{className:ra,onClick:()=>t("cylinder"),children:se.jsx("img",{src:"cyl-48.png",alt:"C",width:42})})},"4"),se.jsx("div",{className:"flex-1"}),se.jsx("li",{className:`h-[45px] ${Kr} ${Jr} mb-2`,children:se.jsx("button",{className:"btn btn-outline btn-accent",onClick:()=>e(),children:"🆑"})},"100")]});Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Math.sign===void 0&&(Math.sign=function(t){return t<0?-1:t>0?1:+t});Function.prototype.name===void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&function(){Object.assign=function(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(n!=null)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}}();var ry="1.0.9",oy=0,ay=1,ly=2,hy=3,uy=0,Xa=1,no=2,cy=0,on=1,an=2,Hn=3,ro=4,fy=5,dy=0,py=1,my=2,yy=3,vy=4,xy=5,gy=6,vl=.005,j={sqrt:Math.sqrt,abs:Math.abs,floor:Math.floor,cos:Math.cos,sin:Math.sin,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,round:Math.round,pow:Math.pow,max:Math.max,min:Math.min,random:Math.random,degtorad:.017453292519943295,radtodeg:57.29577951308232,PI:3.141592653589793,TwoPI:6.283185307179586,PI90:1.570796326794896,PI270:4.712388980384689,INF:1/0,EPZ:1e-5,EPZ2:1e-6,lerp:function(t,e,s){return(1-s)*t+s*e},randInt:function(t,e){return t+j.floor(j.random()*(e-t+1))},rand:function(t,e){return t+j.random()*(e-t)},generateUUID:function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=new Array(36),s=0,n;return function(){for(var o=0;o<36;o++)o===8||o===13||o===18||o===23?e[o]="-":o===14?e[o]="4":(s<=2&&(s=33554432+Math.random()*16777216|0),n=s&15,s=s>>4,e[o]=t[o===19?n&3|8:n]);return e.join("")}}(),int:function(t){return j.floor(t)},fix:function(t,e){return t.toFixed(e||3,10)},clamp:function(t,e,s){return j.max(e,j.min(s,t))},distance:function(t,e){var s=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return j.sqrt(s*s+n*n+r*r)},acosClamp:function(t){return t>1?0:t<-1?j.PI:j.acos(t)},distanceVector:function(t,e){var s=t.x-e.x,n=t.y-e.y,r=t.z-e.z;return s*s+n*n+r*r},dotVectors:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}};function ki(t,e){console.error("[OIMO] "+t+": "+e)}function pp(t){this.parent=t,this.infos=new Float32Array(13),this.f=[0,0,0],this.times=[0,0,0,0],this.broadPhase=this.parent.broadPhaseType,this.version=ry,this.fps=0,this.tt=0,this.broadPhaseTime=0,this.narrowPhaseTime=0,this.solvingTime=0,this.totalTime=0,this.updateTime=0,this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0}Object.assign(pp.prototype,{setTime:function(t){this.times[t||0]=performance.now()},resetMax:function(){this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0},calcBroadPhase:function(){this.setTime(2),this.broadPhaseTime=this.times[2]-this.times[1]},calcNarrowPhase:function(){this.setTime(3),this.narrowPhaseTime=this.times[3]-this.times[2]},calcEnd:function(){this.setTime(2),this.solvingTime=this.times[2]-this.times[1],this.totalTime=this.times[2]-this.times[0],this.updateTime=this.totalTime-(this.broadPhaseTime+this.narrowPhaseTime+this.solvingTime),this.tt===100&&this.resetMax(),this.tt>100&&(this.broadPhaseTime>this.MaxBroadPhaseTime&&(this.MaxBroadPhaseTime=this.broadPhaseTime),this.narrowPhaseTime>this.MaxNarrowPhaseTime&&(this.MaxNarrowPhaseTime=this.narrowPhaseTime),this.solvingTime>this.MaxSolvingTime&&(this.MaxSolvingTime=this.solvingTime),this.totalTime>this.MaxTotalTime&&(this.MaxTotalTime=this.totalTime),this.updateTime>this.MaxUpdateTime&&(this.MaxUpdateTime=this.updateTime)),this.upfps(),this.tt++,this.tt>500&&(this.tt=0)},upfps:function(){this.f[1]=Date.now(),this.f[1]-1e3>this.f[0]&&(this.f[0]=this.f[1],this.fps=this.f[2],this.f[2]=0),this.f[2]++},show:function(){var t=["Oimo.js "+this.version+"<br>",this.broadPhase+"<br><br>","FPS: "+this.fps+" fps<br><br>","rigidbody "+this.parent.numRigidBodies+"<br>","contact &nbsp;&nbsp;"+this.parent.numContacts+"<br>","ct-point &nbsp;"+this.parent.numContactPoints+"<br>","paircheck "+this.parent.broadPhase.numPairChecks+"<br>","island &nbsp;&nbsp;&nbsp;"+this.parent.numIslands+"<br><br>","Time in milliseconds<br><br>","broadphase &nbsp;"+j.fix(this.broadPhaseTime)+" | "+j.fix(this.MaxBroadPhaseTime)+"<br>","narrowphase "+j.fix(this.narrowPhaseTime)+" | "+j.fix(this.MaxNarrowPhaseTime)+"<br>","solving &nbsp;&nbsp;&nbsp;&nbsp;"+j.fix(this.solvingTime)+" | "+j.fix(this.MaxSolvingTime)+"<br>","total &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+j.fix(this.totalTime)+" | "+j.fix(this.MaxTotalTime)+"<br>","updating &nbsp;&nbsp;&nbsp;"+j.fix(this.updateTime)+" | "+j.fix(this.MaxUpdateTime)+"<br>"].join(`
`);return t},toArray:function(){return this.infos[0]=this.parent.broadPhase.types,this.infos[1]=this.parent.numRigidBodies,this.infos[2]=this.parent.numContacts,this.infos[3]=this.parent.broadPhase.numPairChecks,this.infos[4]=this.parent.numContactPoints,this.infos[5]=this.parent.numIslands,this.infos[6]=this.broadPhaseTime,this.infos[7]=this.narrowPhaseTime,this.infos[8]=this.solvingTime,this.infos[9]=this.updateTime,this.infos[10]=this.totalTime,this.infos[11]=this.fps,this.infos}});function R(t,e,s){this.x=t||0,this.y=e||0,this.z=s||0}Object.assign(R.prototype,{Vec3:!0,set:function(t,e,s){return this.x=t,this.y=e,this.z=s,this},add:function(t,e){return e!==void 0?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addEqual:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},sub:function(t,e){return e!==void 0?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},subEqual:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},scale:function(t,e){return this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this},scaleEqual:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},subScaledVector:function(t,e){return this.x-=t.x*e,this.y-=t.y*e,this.z-=t.z*e,this},cross:function(t,e){if(e!==void 0)return this.crossVectors(t,e);var s=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-s*t.z,this.z=s*t.y-n*t.x,this},crossVectors:function(t,e){var s=t.x,n=t.y,r=t.z,o=e.x,a=e.y,l=e.z;return this.x=n*l-r*a,this.y=r*o-s*l,this.z=s*a-n*o,this},tangent:function(t){var e=t.x,s=t.y,n=t.z;return this.x=s*e-n*n,this.y=-n*s-e*e,this.z=e*n+s*s,this},invert:function(t){return this.x=-t.x,this.y=-t.y,this.z=-t.z,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},addition:function(){return this.x+this.y+this.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return j.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},applyMatrix3:function(t,e){var s=this.x,n=this.y,r=this.z,o=t.elements;return e?(this.x=o[0]*s+o[1]*n+o[2]*r,this.y=o[3]*s+o[4]*n+o[5]*r,this.z=o[6]*s+o[7]*n+o[8]*r):(this.x=o[0]*s+o[3]*n+o[6]*r,this.y=o[1]*s+o[4]*n+o[7]*r,this.z=o[2]*s+o[5]*n+o[8]*r),this},applyQuaternion:function(t){var e=this.x,s=this.y,n=this.z,r=t.x,o=t.y,a=t.z,l=t.w,h=l*e+o*n-a*s,u=l*s+a*e-r*n,c=l*n+r*s-o*e,f=-r*e-o*s-a*n;return this.x=h*l+f*-r+u*-a-c*-o,this.y=u*l+f*-o+c*-r-h*-a,this.z=c*l+f*-a+h*-o-u*-r,this},testZero:function(){return this.x!==0||this.y!==0||this.z!==0},testDiff:function(t){return!this.equals(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},clone:function(){return new this.constructor(this.x,this.y,this.z)},toString:function(){return"Vec3["+this.x.toFixed(4)+", "+this.y.toFixed(4)+", "+this.z.toFixed(4)+"]"},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divideScalar:function(t){return this.multiplyScalar(1/t)},normalize:function(){return this.divideScalar(this.length())},toArray:function(t,e){e===void 0&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z},fromArray:function(t,e){return e===void 0&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}});function Ni(t,e,s,n){this.x=t||0,this.y=e||0,this.z=s||0,this.w=n!==void 0?n:1}Object.assign(Ni.prototype,{Quat:!0,set:function(t,e,s,n){return this.x=t,this.y=e,this.z=s,this.w=n,this},addTime:function(t,e){var s=t.x,n=t.y,r=t.z,o=this.w,a=this.x,l=this.y,h=this.z;return e*=.5,this.x+=e*(s*o+n*h-r*l),this.y+=e*(n*o+r*a-s*h),this.z+=e*(r*o+s*l-n*a),this.w+=e*(-s*a-n*l-r*h),this.normalize(),this},multiply:function(t,e){return e!==void 0?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var s=t.x,n=t.y,r=t.z,o=t.w,a=e.x,l=e.y,h=e.z,u=e.w;return this.x=s*u+o*a+n*h-r*l,this.y=n*u+o*l+r*a-s*h,this.z=r*u+o*h+s*l-n*a,this.w=o*u-s*a-n*l-r*h,this},setFromUnitVectors:function(t,e){var s=new R,n=t.dot(e)+1;return n<j.EPS2?(n=0,j.abs(t.x)>j.abs(t.z)?s.set(-t.y,t.x,0):s.set(0,-t.z,t.y)):s.crossVectors(t,e),this._x=s.x,this._y=s.y,this._z=s.z,this._w=n,this.normalize()},arc:function(t,e){var s=t.x,n=t.y,r=t.z,o=e.x,a=e.y,l=e.z,h=s*o+n*a+r*l;if(h==-1)return o=n*s-r*r,a=-r*n-s*s,l=s*r+n*n,h=1/j.sqrt(o*o+a*a+l*l),this.w=0,this.x=o*h,this.y=a*h,this.z=l*h,this;var u=n*l-r*a,c=r*o-s*l,f=s*a-n*o;return this.w=j.sqrt((1+h)*.5),h=.5/this.w,this.x=u*h,this.y=c*h,this.z=f*h,this},normalize:function(){var t=this.length();return t===0?this.set(0,0,0,1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},inverse:function(){return this.conjugate().normalize()},invert:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this.conjugate().normalize(),this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},length:function(){return j.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},clone:function(t){return new Ni(this.x,this.y,this.z,this.w)},testDiff:function(t){return!this.equals(t)},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},toString:function(){return"Quat["+this.x.toFixed(4)+", ("+this.y.toFixed(4)+", "+this.z.toFixed(4)+", "+this.w.toFixed(4)+")]"},setFromEuler:function(t,e,s){var n=Math.cos(t*.5),r=Math.cos(e*.5),o=Math.cos(s*.5),a=Math.sin(t*.5),l=Math.sin(e*.5),h=Math.sin(s*.5);return this.x=a*r*o+n*l*h,this.y=n*l*o-a*r*h,this.z=n*r*h+a*l*o,this.w=n*r*o-a*l*h,this},setFromAxis:function(t,e){t.normalize(),e=e*.5;var s=j.sin(e);return this.x=s*t.x,this.y=s*t.y,this.z=s*t.z,this.w=j.cos(e),this},setFromMat33:function(t){var e=t[0]+t[4]+t[8],s;if(e>0)s=j.sqrt(e+1),this.w=.5/s,s=.5/s,this.x=(t[5]-t[7])*s,this.y=(t[6]-t[2])*s,this.z=(t[1]-t[3])*s;else{var n=[],r=0;t[4]>t[0]&&(r=1),t[8]>t[r*3+r]&&(r=2);var o=(r+1)%3,a=(r+2)%3;s=j.sqrt(t[r*3+r]-t[o*3+o]-t[a*3+a]+1),n[r]=.5*fRoot,s=.5/fRoot,this.w=(t[o*3+a]-t[a*3+o])*s,n[o]=(t[o*3+r]+t[r*3+o])*s,n[a]=(t[a*3+r]+t[r*3+a])*s,this.x=n[1],this.y=n[2],this.z=n[3]}return this},toArray:function(t,e){e=e||0,t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w},fromArray:function(t,e){return e=e||0,this.set(t[e],t[e+1],t[e+2],t[e+3]),this}});function oi(t,e,s,n,r,o,a,l,h){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("OIMO.Mat33: the constructor no longer reads arguments. use .set() instead.")}Object.assign(oi.prototype,{Mat33:!0,set:function(t,e,s,n,r,o,a,l,h){var u=this.elements;return u[0]=t,u[1]=e,u[2]=s,u[3]=n,u[4]=r,u[5]=o,u[6]=a,u[7]=l,u[8]=h,this},add:function(t,e){if(e!==void 0)return this.addMatrixs(t,e);var s=this.elements,n=t.elements;return s[0]+=n[0],s[1]+=n[1],s[2]+=n[2],s[3]+=n[3],s[4]+=n[4],s[5]+=n[5],s[6]+=n[6],s[7]+=n[7],s[8]+=n[8],this},addMatrixs:function(t,e){var s=this.elements,n=t.elements,r=e.elements;return s[0]=n[0]+r[0],s[1]=n[1]+r[1],s[2]=n[2]+r[2],s[3]=n[3]+r[3],s[4]=n[4]+r[4],s[5]=n[5]+r[5],s[6]=n[6]+r[6],s[7]=n[7]+r[7],s[8]=n[8]+r[8],this},addEqual:function(t){var e=this.elements,s=t.elements;return e[0]+=s[0],e[1]+=s[1],e[2]+=s[2],e[3]+=s[3],e[4]+=s[4],e[5]+=s[5],e[6]+=s[6],e[7]+=s[7],e[8]+=s[8],this},sub:function(t,e){if(e!==void 0)return this.subMatrixs(t,e);var s=this.elements,n=t.elements;return s[0]-=n[0],s[1]-=n[1],s[2]-=n[2],s[3]-=n[3],s[4]-=n[4],s[5]-=n[5],s[6]-=n[6],s[7]-=n[7],s[8]-=n[8],this},subMatrixs:function(t,e){var s=this.elements,n=t.elements,r=e.elements;return s[0]=n[0]-r[0],s[1]=n[1]-r[1],s[2]=n[2]-r[2],s[3]=n[3]-r[3],s[4]=n[4]-r[4],s[5]=n[5]-r[5],s[6]=n[6]-r[6],s[7]=n[7]-r[7],s[8]=n[8]-r[8],this},subEqual:function(t){var e=this.elements,s=t.elements;return e[0]-=s[0],e[1]-=s[1],e[2]-=s[2],e[3]-=s[3],e[4]-=s[4],e[5]-=s[5],e[6]-=s[6],e[7]-=s[7],e[8]-=s[8],this},scale:function(t,e){var s=this.elements,n=t.elements;return s[0]=n[0]*e,s[1]=n[1]*e,s[2]=n[2]*e,s[3]=n[3]*e,s[4]=n[4]*e,s[5]=n[5]*e,s[6]=n[6]*e,s[7]=n[7]*e,s[8]=n[8]*e,this},scaleEqual:function(t){var e=this.elements;return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,this},multiplyMatrices:function(t,e,s){s&&(e=e.clone().transpose());var n=this.elements,r=t.elements,o=e.elements,a=r[0],l=r[3],h=r[6],u=r[1],c=r[4],f=r[7],p=r[2],g=r[5],v=r[8],m=o[0],w=o[3],x=o[6],y=o[1],d=o[4],z=o[7],k=o[2],N=o[5],S=o[8];return n[0]=a*m+u*w+p*x,n[1]=a*y+u*d+p*z,n[2]=a*k+u*N+p*S,n[3]=l*m+c*w+g*x,n[4]=l*y+c*d+g*z,n[5]=l*k+c*N+g*S,n[6]=h*m+f*w+v*x,n[7]=h*y+f*d+v*z,n[8]=h*k+f*N+v*S,this},transpose:function(t){if(t!==void 0){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this}var s=this.elements,n=s[1],r=s[2],o=s[5];return s[1]=s[3],s[2]=s[6],s[3]=n,s[5]=s[7],s[6]=r,s[7]=o,this},setQuat:function(t){var e=this.elements,s=t.x,n=t.y,r=t.z,o=t.w,a=s+s,l=n+n,h=r+r,u=s*a,c=s*l,f=s*h,p=n*l,g=n*h,v=r*h,m=o*a,w=o*l,x=o*h;return e[0]=1-(p+v),e[1]=c-x,e[2]=f+w,e[3]=c+x,e[4]=1-(u+v),e[5]=g-m,e[6]=f-w,e[7]=g+m,e[8]=1-(u+p),this},invert:function(t){var e=this.elements,s=t.elements,n=s[0],r=s[3],o=s[6],a=s[1],l=s[4],h=s[7],u=s[2],c=s[5],f=s[8],p=f*l-c*h,g=-f*r+c*o,v=h*r-l*o,m=n*p+a*g+u*v;return m===0?(console.log("can't invert matrix, determinant is 0"),this.identity()):(m=1/m,e[0]=p*m,e[1]=(-f*a+u*h)*m,e[2]=(c*a-u*l)*m,e[3]=g*m,e[4]=(f*n-u*o)*m,e[5]=(-c*n+u*r)*m,e[6]=v*m,e[7]=(-h*n+a*o)*m,e[8]=(l*n-a*r)*m,this)},addOffset:function(t,e){var s=e.x,n=e.y,r=e.z,o=this.elements;o[0]+=t*(n*n+r*r),o[4]+=t*(s*s+r*r),o[8]+=t*(s*s+n*n);var a=t*s*n,l=t*n*r,h=t*r*s;return o[1]-=a,o[3]-=a,o[2]-=l,o[6]-=l,o[5]-=h,o[7]-=h,this},subOffset:function(t,e){var s=e.x,n=e.y,r=e.z,o=this.elements;o[0]-=t*(n*n+r*r),o[4]-=t*(s*s+r*r),o[8]-=t*(s*s+n*n);var a=t*s*n,l=t*n*r,h=t*r*s;return o[1]+=a,o[3]+=a,o[2]+=l,o[6]+=l,o[5]+=h,o[7]+=h,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new oi().fromArray(this.elements)},copy:function(t){for(var e=0;e<9;e++)this.elements[e]=t.elements[e];return this},determinant:function(){var t=this.elements,e=t[0],s=t[1],n=t[2],r=t[3],o=t[4],a=t[5],l=t[6],h=t[7],u=t[8];return e*o*u-e*a*h-s*r*u+s*a*l+n*r*h-n*o*l},fromArray:function(t,e){e===void 0&&(e=0);for(var s=0;s<9;s++)this.elements[s]=t[s+e];return this},toArray:function(t,e){t===void 0&&(t=[]),e===void 0&&(e=0);var s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t}});function xl(t,e,s,n,r,o){this.elements=new Float32Array(6);var a=this.elements;a[0]=t||0,a[1]=s||0,a[2]=r||0,a[3]=e||0,a[4]=n||0,a[5]=o||0}Object.assign(xl.prototype,{AABB:!0,set:function(t,e,s,n,r,o){var a=this.elements;return a[0]=t,a[3]=e,a[1]=s,a[4]=n,a[2]=r,a[5]=o,this},intersectTest:function(t){var e=this.elements,s=t.elements;return e[0]>s[3]||e[1]>s[4]||e[2]>s[5]||e[3]<s[0]||e[4]<s[1]||e[5]<s[2]},intersectTestTwo:function(t){var e=this.elements,s=t.elements;return e[0]<s[0]||e[1]<s[1]||e[2]<s[2]||e[3]>s[3]||e[4]>s[4]||e[5]>s[5]},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(t,e){var s=e||0,n=t.elements;return this.set(n[0]-s,n[3]+s,n[1]-s,n[4]+s,n[2]-s,n[5]+s),this},fromArray:function(t){return this.elements.set(t),this},combine:function(t,e){var s=t.elements,n=e.elements,r=this.elements;return r[0]=s[0]<n[0]?s[0]:n[0],r[1]=s[1]<n[1]?s[1]:n[1],r[2]=s[2]<n[2]?s[2]:n[2],r[3]=s[3]>n[3]?s[3]:n[3],r[4]=s[4]>n[4]?s[4]:n[4],r[5]=s[5]>n[5]?s[5]:n[5],this},surfaceArea:function(){var t=this.elements,e=t[3]-t[0],s=t[4]-t[1],n=t[5]-t[2];return 2*(e*(s+n)+s*n)},intersectsWithPoint:function(t,e,s){var n=this.elements;return t>=n[0]&&t<=n[3]&&e>=n[1]&&e<=n[4]&&s>=n[2]&&s<=n[5]},setFromPoints:function(t){this.makeEmpty();for(var e=0;e<t.length;e++)this.expandByPoint(t[e])},makeEmpty:function(){this.set(-1/0,-1/0,-1/0,1/0,1/0,1/0)},expandByPoint:function(t){var e=this.elements;this.set(j.min(e[0],t.x),j.min(e[1],t.y),j.min(e[2],t.z),j.max(e[3],t.x),j.max(e[4],t.y),j.max(e[5],t.z))},expandByScalar:function(t){var e=this.elements;e[0]+=-t,e[1]+=-t,e[2]+=-t,e[3]+=t,e[4]+=t,e[5]+=t}});var wy=0;function zy(){return wy++}function Us(t){this.type=cy,this.id=zy(),this.prev=null,this.next=null,this.proxy=null,this.parent=null,this.contactLink=null,this.numContacts=0,this.position=new R,this.rotation=new oi,this.relativePosition=new R().copy(t.relativePosition),this.relativeRotation=new oi().copy(t.relativeRotation),this.aabb=new xl,this.density=t.density,this.friction=t.friction,this.restitution=t.restitution,this.belongsTo=t.belongsTo,this.collidesWith=t.collidesWith}Object.assign(Us.prototype,{Shape:!0,calculateMassInfo:function(t){ki("Shape","Inheritance error.")},updateProxy:function(){ki("Shape","Inheritance error.")}});function Qh(t,e,s,n){Us.call(this,t),this.type=an,this.width=e,this.height=s,this.depth=n,this.halfWidth=e*.5,this.halfHeight=s*.5,this.halfDepth=n*.5,this.dimentions=new Float32Array(18),this.elements=new Float32Array(24)}Qh.prototype=Object.assign(Object.create(Us.prototype),{constructor:Qh,calculateMassInfo:function(t){var e=this.width*this.height*this.depth*this.density,s=1/12;t.mass=e,t.inertia.set(e*(this.height*this.height+this.depth*this.depth)*s,0,0,0,e*(this.width*this.width+this.depth*this.depth)*s,0,0,0,e*(this.width*this.width+this.height*this.height)*s)},updateProxy:function(){var t=this.rotation.elements,e=this.dimentions;e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e[9]=t[0]*this.halfWidth,e[10]=t[3]*this.halfWidth,e[11]=t[6]*this.halfWidth,e[12]=t[1]*this.halfHeight,e[13]=t[4]*this.halfHeight,e[14]=t[7]*this.halfHeight,e[15]=t[2]*this.halfDepth,e[16]=t[5]*this.halfDepth,e[17]=t[8]*this.halfDepth;var s=e[9],n=e[10],r=e[11],o=e[12],a=e[13],l=e[14],h=e[15],u=e[16],c=e[17],f=this.position.x,p=this.position.y,g=this.position.z,v=this.elements;v[0]=f+s+o+h,v[1]=p+n+a+u,v[2]=g+r+l+c,v[3]=f+s+o-h,v[4]=p+n+a-u,v[5]=g+r+l-c,v[6]=f+s-o+h,v[7]=p+n-a+u,v[8]=g+r-l+c,v[9]=f+s-o-h,v[10]=p+n-a-u,v[11]=g+r-l-c,v[12]=f-s+o+h,v[13]=p-n+a+u,v[14]=g-r+l+c,v[15]=f-s+o-h,v[16]=p-n+a-u,v[17]=g-r+l-c,v[18]=f-s-o+h,v[19]=p-n-a+u,v[20]=g-r-l+c,v[21]=f-s-o-h,v[22]=p-n-a-u,v[23]=g-r-l-c;var m=e[9]<0?-e[9]:e[9],w=e[10]<0?-e[10]:e[10],x=e[11]<0?-e[11]:e[11];m=e[12]<0?m-e[12]:m+e[12],w=e[13]<0?w-e[13]:w+e[13],x=e[14]<0?x-e[14]:x+e[14],m=e[15]<0?m-e[15]:m+e[15],w=e[16]<0?w-e[16]:w+e[16],x=e[17]<0?x-e[17]:x+e[17];var y=vl;this.aabb.set(this.position.x-m-y,this.position.x+m+y,this.position.y-w-y,this.position.y+w+y,this.position.z-x-y,this.position.z+x+y),this.proxy!=null&&this.proxy.update()}});function Xh(t,e){Us.call(this,t),this.type=on,this.radius=e}Xh.prototype=Object.assign(Object.create(Us.prototype),{constructor:Xh,volume:function(){return j.PI*this.radius*1.333333},calculateMassInfo:function(t){var e=this.volume()*this.radius*this.radius*this.density;t.mass=e;var s=e*this.radius*this.radius*.4;t.inertia.set(s,0,0,0,s,0,0,0,s)},updateProxy:function(){var t=vl;this.aabb.set(this.position.x-this.radius-t,this.position.x+this.radius+t,this.position.y-this.radius-t,this.position.y+this.radius+t,this.position.z-this.radius-t,this.position.z+this.radius+t),this.proxy!=null&&this.proxy.update()}});function Yh(t,e,s){Us.call(this,t),this.type=Hn,this.radius=e,this.height=s,this.halfHeight=s*.5,this.normalDirection=new R,this.halfDirection=new R}Yh.prototype=Object.assign(Object.create(Us.prototype),{constructor:Yh,calculateMassInfo:function(t){var e=this.radius*this.radius,s=j.PI*e*this.height*this.density,n=(.25*e+.0833*this.height*this.height)*s,r=.5*e;t.mass=s,t.inertia.set(n,0,0,0,r,0,0,0,n)},updateProxy:function(){var t=this.rotation.elements,e,s,n,r,o,a,l,h,u,c,f;o=t[1]*t[1],a=t[4]*t[4],l=t[7]*t[7],this.normalDirection.set(t[1],t[4],t[7]),this.halfDirection.scale(this.normalDirection,this.halfHeight),s=1-o,e=j.sqrt(s*s+o*a+o*l),e>0&&(e=this.radius/e),s*=e,n=1-a,e=j.sqrt(a*o+n*n+a*l),e>0&&(e=this.radius/e),n*=e,r=1-l,e=j.sqrt(l*o+l*a+r*r),e>0&&(e=this.radius/e),r*=e,h=this.halfDirection.x<0?-this.halfDirection.x:this.halfDirection.x,u=this.halfDirection.y<0?-this.halfDirection.y:this.halfDirection.y,c=this.halfDirection.z<0?-this.halfDirection.z:this.halfDirection.z,h=s<0?h-s:h+s,u=n<0?u-n:u+n,c=r<0?c-r:c+r,f=vl,this.aabb.set(this.position.x-h-f,this.position.x+h+f,this.position.y-u-f,this.position.y+u+f,this.position.z-c-f,this.position.z+c+f),this.proxy!=null&&this.proxy.update()}});function Kh(t,e){Us.call(this,t),this.type=ro,this.normal=new R(0,1,0)}Kh.prototype=Object.assign(Object.create(Us.prototype),{constructor:Kh,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(t){t.mass=this.density;var e=1;t.inertia.set(e,0,0,0,e,0,0,0,e)},updateProxy:function(){var t=vl,e=-j.INF,s=j.INF,n=this.normal;this.aabb.set(n.x===-1?this.position.x-t:e,n.x===1?this.position.x+t:s,n.y===-1?this.position.y-t:e,n.y===1?this.position.y+t:s,n.z===-1?this.position.z-t:e,n.z===1?this.position.z+t:s),this.proxy!=null&&this.proxy.update()}});function Uf(t,e){Us.call(this,t),this.type=fy}Uf.prototype=Object.assign(Object.create(Us.prototype),{constructor:Uf,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(t){var e=0;t.inertia.set(e,0,0,0,e,0,0,0,e)},updateProxy:function(){var t=0;this.aabb.set(this.position.x-t,this.position.x+t,this.position.y-t,this.position.y+t,this.position.z-t,this.position.z+t),this.proxy!=null&&this.proxy.update()}});function ky(){this.relativePosition=new R,this.relativeRotation=new oi,this.friction=.2,this.restitution=.2,this.density=1,this.belongsTo=1,this.collidesWith=4294967295}function ei(t,e){e=e||!1,this.axis=t,this.angle=0,this.lowerLimit=e?0:1,this.upperLimit=0,this.motorSpeed=0,this.maxMotorForce=0,this.frequency=0,this.dampingRatio=0}Object.assign(ei.prototype,{LimitMotor:!0,setLimit:function(t,e){this.lowerLimit=t,this.upperLimit=e},setMotor:function(t,e){this.motorSpeed=t,this.maxMotorForce=e},setSpring:function(t,e){this.frequency=t,this.dampingRatio=e}});function jo(){this.parent=null,this.body1=null,this.body2=null,this.addedToIsland=!1}Object.assign(jo.prototype,{Constraint:!0,preSolve:function(t,e){ki("Constraint","Inheritance error.")},solve:function(){ki("Constraint","Inheritance error.")},postSolve:function(){ki("Constraint","Inheritance error.")}});function jf(t){this.prev=null,this.next=null,this.body=null,this.joint=t}function hs(t){jo.call(this),this.scale=1,this.invScale=1,this.name="",this.id=NaN,this.type=dy,this.prev=null,this.next=null,this.body1=t.body1,this.body2=t.body2,this.localAnchorPoint1=new R().copy(t.localAnchorPoint1),this.localAnchorPoint2=new R().copy(t.localAnchorPoint2),this.relativeAnchorPoint1=new R,this.relativeAnchorPoint2=new R,this.anchorPoint1=new R,this.anchorPoint2=new R,this.allowCollision=t.allowCollision,this.b1Link=new jf(this),this.b2Link=new jf(this)}hs.prototype=Object.assign(Object.create(jo.prototype),{constructor:hs,setId:function(t){this.id=i},setParent:function(t){this.parent=t,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numJoints,this.name||(this.name="J"+this.id)},updateAnchorPoints:function(){this.relativeAnchorPoint1.copy(this.localAnchorPoint1).applyMatrix3(this.body1.rotation,!0),this.relativeAnchorPoint2.copy(this.localAnchorPoint2).applyMatrix3(this.body2.rotation,!0),this.anchorPoint1.add(this.relativeAnchorPoint1,this.body1.position),this.anchorPoint2.add(this.relativeAnchorPoint2,this.body2.position)},attach:function(t){this.b1Link.body=this.body2,this.b2Link.body=this.body1,t?(this.body1.jointLink.push(this.b1Link),this.body2.jointLink.push(this.b2Link)):(this.body1.jointLink!=null?(this.b1Link.next=this.body1.jointLink).prev=this.b1Link:this.b1Link.next=null,this.body1.jointLink=this.b1Link,this.body1.numJoints++,this.body2.jointLink!=null?(this.b2Link.next=this.body2.jointLink).prev=this.b2Link:this.b2Link.next=null,this.body2.jointLink=this.b2Link,this.body2.numJoints++)},detach:function(t){if(t)this.body1.jointLink.splice(this.body1.jointLink.indexOf(this.b1Link),1),this.body2.jointLink.splice(this.body2.jointLink.indexOf(this.b2Link),1);else{var e=this.b1Link.prev,s=this.b1Link.next;e!=null&&(e.next=s),s!=null&&(s.prev=e),this.body1.jointLink==this.b1Link&&(this.body1.jointLink=s),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.body=null,this.body1.numJoints--,e=this.b2Link.prev,s=this.b2Link.next,e!=null&&(e.next=s),s!=null&&(s.prev=e),this.body2.jointLink==this.b2Link&&(this.body2.jointLink=s),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.body=null,this.body2.numJoints--}this.b1Link.body=null,this.b2Link.body=null},awake:function(){this.body1.awake(),this.body2.awake()},preSolve:function(t,e){},solve:function(){},postSolve:function(){},remove:function(){this.dispose()},dispose:function(){this.parent.removeJoint(this)},getPosition:function(){var t=new R().scale(this.anchorPoint1,this.scale),e=new R().scale(this.anchorPoint2,this.scale);return[t,e]}});function dc(t){this.m1=NaN,this.m2=NaN,this.ii1=null,this.ii2=null,this.dd=null,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.ax1x=NaN,this.ax1y=NaN,this.ax1z=NaN,this.ay1x=NaN,this.ay1y=NaN,this.ay1z=NaN,this.az1x=NaN,this.az1y=NaN,this.az1z=NaN,this.ax2x=NaN,this.ax2y=NaN,this.ax2z=NaN,this.ay2x=NaN,this.ay2y=NaN,this.ay2z=NaN,this.az2x=NaN,this.az2y=NaN,this.az2z=NaN,this.vel=NaN,this.velx=NaN,this.vely=NaN,this.velz=NaN,this.joint=t,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.b1=t.body1,this.b2=t.body2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.impx=0,this.impy=0,this.impz=0}Object.assign(dc.prototype,{LinearConstraint:!0,preSolve:function(t,e){this.r1x=this.r1.x,this.r1y=this.r1.y,this.r1z=this.r1.z,this.r2x=this.r2.x,this.r2y=this.r2.y,this.r2z=this.r2.z,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var s=this.ii1.elements,n=this.ii2.elements;this.ax1x=this.r1z*s[1]+-this.r1y*s[2],this.ax1y=this.r1z*s[4]+-this.r1y*s[5],this.ax1z=this.r1z*s[7]+-this.r1y*s[8],this.ay1x=-this.r1z*s[0]+this.r1x*s[2],this.ay1y=-this.r1z*s[3]+this.r1x*s[5],this.ay1z=-this.r1z*s[6]+this.r1x*s[8],this.az1x=this.r1y*s[0]+-this.r1x*s[1],this.az1y=this.r1y*s[3]+-this.r1x*s[4],this.az1z=this.r1y*s[6]+-this.r1x*s[7],this.ax2x=this.r2z*n[1]+-this.r2y*n[2],this.ax2y=this.r2z*n[4]+-this.r2y*n[5],this.ax2z=this.r2z*n[7]+-this.r2y*n[8],this.ay2x=-this.r2z*n[0]+this.r2x*n[2],this.ay2y=-this.r2z*n[3]+this.r2x*n[5],this.ay2z=-this.r2z*n[6]+this.r2x*n[8],this.az2x=this.r2y*n[0]+-this.r2x*n[1],this.az2y=this.r2y*n[3]+-this.r2x*n[4],this.az2z=this.r2y*n[6]+-this.r2x*n[7];var r=this.m1+this.m2,o=new oi().set(r,0,0,0,r,0,0,0,r),a=o.elements;a[0]+=s[4]*this.r1z*this.r1z-(s[7]+s[5])*this.r1y*this.r1z+s[8]*this.r1y*this.r1y,a[1]+=(s[6]*this.r1y+s[5]*this.r1x)*this.r1z-s[3]*this.r1z*this.r1z-s[8]*this.r1x*this.r1y,a[2]+=(s[3]*this.r1y-s[4]*this.r1x)*this.r1z-s[6]*this.r1y*this.r1y+s[7]*this.r1x*this.r1y,a[3]+=(s[2]*this.r1y+s[7]*this.r1x)*this.r1z-s[1]*this.r1z*this.r1z-s[8]*this.r1x*this.r1y,a[4]+=s[0]*this.r1z*this.r1z-(s[6]+s[2])*this.r1x*this.r1z+s[8]*this.r1x*this.r1x,a[5]+=(s[1]*this.r1x-s[0]*this.r1y)*this.r1z-s[7]*this.r1x*this.r1x+s[6]*this.r1x*this.r1y,a[6]+=(s[1]*this.r1y-s[4]*this.r1x)*this.r1z-s[2]*this.r1y*this.r1y+s[5]*this.r1x*this.r1y,a[7]+=(s[3]*this.r1x-s[0]*this.r1y)*this.r1z-s[5]*this.r1x*this.r1x+s[2]*this.r1x*this.r1y,a[8]+=s[0]*this.r1y*this.r1y-(s[3]+s[1])*this.r1x*this.r1y+s[4]*this.r1x*this.r1x,a[0]+=n[4]*this.r2z*this.r2z-(n[7]+n[5])*this.r2y*this.r2z+n[8]*this.r2y*this.r2y,a[1]+=(n[6]*this.r2y+n[5]*this.r2x)*this.r2z-n[3]*this.r2z*this.r2z-n[8]*this.r2x*this.r2y,a[2]+=(n[3]*this.r2y-n[4]*this.r2x)*this.r2z-n[6]*this.r2y*this.r2y+n[7]*this.r2x*this.r2y,a[3]+=(n[2]*this.r2y+n[7]*this.r2x)*this.r2z-n[1]*this.r2z*this.r2z-n[8]*this.r2x*this.r2y,a[4]+=n[0]*this.r2z*this.r2z-(n[6]+n[2])*this.r2x*this.r2z+n[8]*this.r2x*this.r2x,a[5]+=(n[1]*this.r2x-n[0]*this.r2y)*this.r2z-n[7]*this.r2x*this.r2x+n[6]*this.r2x*this.r2y,a[6]+=(n[1]*this.r2y-n[4]*this.r2x)*this.r2z-n[2]*this.r2y*this.r2y+n[5]*this.r2x*this.r2y,a[7]+=(n[3]*this.r2x-n[0]*this.r2y)*this.r2z-n[5]*this.r2x*this.r2x+n[2]*this.r2x*this.r2y,a[8]+=n[0]*this.r2y*this.r2y-(n[3]+n[1])*this.r2x*this.r2y+n[4]*this.r2x*this.r2x;var l=1/(a[0]*(a[4]*a[8]-a[7]*a[5])+a[3]*(a[7]*a[2]-a[1]*a[8])+a[6]*(a[1]*a[5]-a[4]*a[2]));this.dd=new oi().set(a[4]*a[8]-a[5]*a[7],a[2]*a[7]-a[1]*a[8],a[1]*a[5]-a[2]*a[4],a[5]*a[6]-a[3]*a[8],a[0]*a[8]-a[2]*a[6],a[2]*a[3]-a[0]*a[5],a[3]*a[7]-a[4]*a[6],a[1]*a[6]-a[0]*a[7],a[0]*a[4]-a[1]*a[3]).scaleEqual(l),this.velx=this.p2.x-this.p1.x,this.vely=this.p2.y-this.p1.y,this.velz=this.p2.z-this.p1.z;var h=j.sqrt(this.velx*this.velx+this.vely*this.vely+this.velz*this.velz);h>.005?(h=(.005-h)/h*e*.05,this.velx*=h,this.vely*=h,this.velz*=h):(this.velx=0,this.vely=0,this.velz=0),this.impx*=.95,this.impy*=.95,this.impz*=.95,this.l1.x+=this.impx*this.m1,this.l1.y+=this.impy*this.m1,this.l1.z+=this.impz*this.m1,this.a1.x+=this.impx*this.ax1x+this.impy*this.ay1x+this.impz*this.az1x,this.a1.y+=this.impx*this.ax1y+this.impy*this.ay1y+this.impz*this.az1y,this.a1.z+=this.impx*this.ax1z+this.impy*this.ay1z+this.impz*this.az1z,this.l2.x-=this.impx*this.m2,this.l2.y-=this.impy*this.m2,this.l2.z-=this.impz*this.m2,this.a2.x-=this.impx*this.ax2x+this.impy*this.ay2x+this.impz*this.az2x,this.a2.y-=this.impx*this.ax2y+this.impy*this.ay2y+this.impz*this.az2y,this.a2.z-=this.impx*this.ax2z+this.impy*this.ay2z+this.impz*this.az2z},solve:function(){var t=this.dd.elements,e=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y-this.velx,s=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z-this.vely,n=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x-this.velz,r=e*t[0]+s*t[1]+n*t[2],o=e*t[3]+s*t[4]+n*t[5],a=e*t[6]+s*t[7]+n*t[8];this.impx+=r,this.impy+=o,this.impz+=a,this.l1.x+=r*this.m1,this.l1.y+=o*this.m1,this.l1.z+=a*this.m1,this.a1.x+=r*this.ax1x+o*this.ay1x+a*this.az1x,this.a1.y+=r*this.ax1y+o*this.ay1y+a*this.az1y,this.a1.z+=r*this.ax1z+o*this.ay1z+a*this.az1z,this.l2.x-=r*this.m2,this.l2.y-=o*this.m2,this.l2.z-=a*this.m2,this.a2.x-=r*this.ax2x+o*this.ay2x+a*this.az2x,this.a2.y-=r*this.ax2y+o*this.ay2y+a*this.az2y,this.a2.z-=r*this.ax2z+o*this.ay2z+a*this.az2z}});function gl(t,e,s,n){this.cfm1=NaN,this.cfm2=NaN,this.cfm3=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=s,this.limitMotor3=n,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0}Object.assign(gl.prototype,{Rotational3Constraint:!0,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0;var s=this.i1.elements,n=this.i2.elements;this.i1e00=s[0],this.i1e01=s[1],this.i1e02=s[2],this.i1e10=s[3],this.i1e11=s[4],this.i1e12=s[5],this.i1e20=s[6],this.i1e21=s[7],this.i1e22=s[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var r=this.limitMotor1.frequency,o=this.limitMotor2.frequency,a=this.limitMotor3.frequency,l=r>0,h=o>0,u=a>0,c=this.lowerLimit1<=this.upperLimit1,f=this.lowerLimit2<=this.upperLimit2,p=this.lowerLimit3<=this.upperLimit3,g=this.limitMotor1.angle;c?(this.lowerLimit1==this.upperLimit1?(this.limitState1!=0&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-g):g<this.lowerLimit1?(this.limitState1!=-1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-g):g>this.upperLimit1?(this.limitState1!=1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-g):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),l||(this.limitVelocity1>.02?this.limitVelocity1-=.02:this.limitVelocity1<-.02?this.limitVelocity1+=.02:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0);var v=this.limitMotor2.angle;f?(this.lowerLimit2==this.upperLimit2?(this.limitState2!=0&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-v):v<this.lowerLimit2?(this.limitState2!=-1&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-v):v>this.upperLimit2?(this.limitState2!=1&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-v):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),h||(this.limitVelocity2>.02?this.limitVelocity2-=.02:this.limitVelocity2<-.02?this.limitVelocity2+=.02:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0);var m=this.limitMotor3.angle;if(p?(this.lowerLimit3==this.upperLimit3?(this.limitState3!=0&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-m):m<this.lowerLimit3?(this.limitState3!=-1&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-m):m>this.upperLimit3?(this.limitState3!=1&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-m):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),u||(this.limitVelocity3>.02?this.limitVelocity3-=.02:this.limitVelocity3<-.02?this.limitVelocity3+=.02:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(this.limitState1!=0||l)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(this.limitState2!=0||h)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(this.limitState3!=0||u)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0),this.a1x1=this.ax1*this.i1e00+this.ay1*this.i1e01+this.az1*this.i1e02,this.a1y1=this.ax1*this.i1e10+this.ay1*this.i1e11+this.az1*this.i1e12,this.a1z1=this.ax1*this.i1e20+this.ay1*this.i1e21+this.az1*this.i1e22,this.a2x1=this.ax1*this.i2e00+this.ay1*this.i2e01+this.az1*this.i2e02,this.a2y1=this.ax1*this.i2e10+this.ay1*this.i2e11+this.az1*this.i2e12,this.a2z1=this.ax1*this.i2e20+this.ay1*this.i2e21+this.az1*this.i2e22,this.a1x2=this.ax2*this.i1e00+this.ay2*this.i1e01+this.az2*this.i1e02,this.a1y2=this.ax2*this.i1e10+this.ay2*this.i1e11+this.az2*this.i1e12,this.a1z2=this.ax2*this.i1e20+this.ay2*this.i1e21+this.az2*this.i1e22,this.a2x2=this.ax2*this.i2e00+this.ay2*this.i2e01+this.az2*this.i2e02,this.a2y2=this.ax2*this.i2e10+this.ay2*this.i2e11+this.az2*this.i2e12,this.a2z2=this.ax2*this.i2e20+this.ay2*this.i2e21+this.az2*this.i2e22,this.a1x3=this.ax3*this.i1e00+this.ay3*this.i1e01+this.az3*this.i1e02,this.a1y3=this.ax3*this.i1e10+this.ay3*this.i1e11+this.az3*this.i1e12,this.a1z3=this.ax3*this.i1e20+this.ay3*this.i1e21+this.az3*this.i1e22,this.a2x3=this.ax3*this.i2e00+this.ay3*this.i2e01+this.az3*this.i2e02,this.a2y3=this.ax3*this.i2e10+this.ay3*this.i2e11+this.az3*this.i2e12,this.a2z3=this.ax3*this.i2e20+this.ay3*this.i2e21+this.az3*this.i2e22,this.k00=this.ax1*(this.a1x1+this.a2x1)+this.ay1*(this.a1y1+this.a2y1)+this.az1*(this.a1z1+this.a2z1),this.k01=this.ax1*(this.a1x2+this.a2x2)+this.ay1*(this.a1y2+this.a2y2)+this.az1*(this.a1z2+this.a2z2),this.k02=this.ax1*(this.a1x3+this.a2x3)+this.ay1*(this.a1y3+this.a2y3)+this.az1*(this.a1z3+this.a2z3),this.k10=this.ax2*(this.a1x1+this.a2x1)+this.ay2*(this.a1y1+this.a2y1)+this.az2*(this.a1z1+this.a2z1),this.k11=this.ax2*(this.a1x2+this.a2x2)+this.ay2*(this.a1y2+this.a2y2)+this.az2*(this.a1z2+this.a2z2),this.k12=this.ax2*(this.a1x3+this.a2x3)+this.ay2*(this.a1y3+this.a2y3)+this.az2*(this.a1z3+this.a2z3),this.k20=this.ax3*(this.a1x1+this.a2x1)+this.ay3*(this.a1y1+this.a2y1)+this.az3*(this.a1z1+this.a2z1),this.k21=this.ax3*(this.a1x2+this.a2x2)+this.ay3*(this.a1y2+this.a2y2)+this.az3*(this.a1z2+this.a2z2),this.k22=this.ax3*(this.a1x3+this.a2x3)+this.ay3*(this.a1y3+this.a2y3)+this.az3*(this.a1z3+this.a2z3),this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,l&&this.limitState1!=2){var w=6.2831853*r,x=w*w*t,y=e/(x+2*this.limitMotor1.dampingRatio*w);this.cfm1=this.kv00*y,this.limitVelocity1*=x*y}else this.cfm1=0,this.limitVelocity1*=e*.05;h&&this.limitState2!=2?(w=6.2831853*o,x=w*w*t,y=e/(x+2*this.limitMotor2.dampingRatio*w),this.cfm2=this.kv11*y,this.limitVelocity2*=x*y):(this.cfm2=0,this.limitVelocity2*=e*.05),u&&this.limitState3!=2?(w=6.2831853*a,x=w*w*t,y=e/(x+2*this.limitMotor3.dampingRatio*w),this.cfm3=this.kv22*y,this.limitVelocity3*=x*y):(this.cfm3=0,this.limitVelocity3*=e*.05),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var d=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*d,this.d01=(this.k02*this.k21-this.k01*this.k22)*d,this.d02=(this.k01*this.k12-this.k02*this.k11)*d,this.d10=(this.k12*this.k20-this.k10*this.k22)*d,this.d11=(this.k00*this.k22-this.k02*this.k20)*d,this.d12=(this.k02*this.k10-this.k00*this.k12)*d,this.d20=(this.k10*this.k21-this.k11*this.k20)*d,this.d21=(this.k01*this.k20-this.k00*this.k21)*d,this.d22=(this.k00*this.k11-this.k01*this.k10)*d,this.limitImpulse1*=.95,this.motorImpulse1*=.95,this.limitImpulse2*=.95,this.motorImpulse2*=.95,this.limitImpulse3*=.95,this.motorImpulse3*=.95;var z=this.limitImpulse1+this.motorImpulse1,k=this.limitImpulse2+this.motorImpulse2,N=this.limitImpulse3+this.motorImpulse3;this.a1.x+=z*this.a1x1+k*this.a1x2+N*this.a1x3,this.a1.y+=z*this.a1y1+k*this.a1y2+N*this.a1y3,this.a1.z+=z*this.a1z1+k*this.a1z2+N*this.a1z3,this.a2.x-=z*this.a2x1+k*this.a2x2+N*this.a2x3,this.a2.y-=z*this.a2y1+k*this.a2y2+N*this.a2y3,this.a2.z-=z*this.a2z1+k*this.a2z2+N*this.a2z3},solve_:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,s=this.a2.z-this.a1.z;this.limitVelocity3=30;var n=t*this.ax1+e*this.ay1+s*this.az1-this.limitVelocity1,r=t*this.ax2+e*this.ay2+s*this.az2-this.limitVelocity2,o=t*this.ax3+e*this.ay3+s*this.az3-this.limitVelocity3,a=n*this.d00+r*this.d01+o*this.d02,l=n*this.d10+r*this.d11+o*this.d12,h=n*this.d20+r*this.d21+o*this.d22;this.limitImpulse1+=a,this.limitImpulse2+=l,this.limitImpulse3+=h,this.a1.x+=a*this.a1x1+l*this.a1x2+h*this.a1x3,this.a1.y+=a*this.a1y1+l*this.a1y2+h*this.a1y3,this.a1.z+=a*this.a1z1+l*this.a1z2+h*this.a1z3,this.a2.x-=a*this.a2x1+l*this.a2x2+h*this.a2x3,this.a2.y-=a*this.a2y1+l*this.a2y2+h*this.a2y3,this.a2.z-=a*this.a2z1+l*this.a2z2+h*this.a2z3},solve:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,s=this.a2.z-this.a1.z,n=t*this.ax1+e*this.ay1+s*this.az1,r=t*this.ax2+e*this.ay2+s*this.az2,o=t*this.ax3+e*this.ay3+s*this.az3,a=this.motorImpulse1,l=this.motorImpulse2,h=this.motorImpulse3,u=0,c=0,f=0;this.enableMotor1&&(u=(n-this.motorSpeed1)*this.dv00,this.motorImpulse1+=u,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),u=this.motorImpulse1-a),this.enableMotor2&&(c=(r-this.motorSpeed2)*this.dv11,this.motorImpulse2+=c,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),c=this.motorImpulse2-l),this.enableMotor3&&(f=(o-this.motorSpeed3)*this.dv22,this.motorImpulse3+=f,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),f=this.motorImpulse3-h),n+=u*this.kv00+c*this.k01+f*this.k02,r+=u*this.k10+c*this.kv11+f*this.k12,o+=u*this.k20+c*this.k21+f*this.kv22,n-=this.limitVelocity1+this.limitImpulse1*this.cfm1,r-=this.limitVelocity2+this.limitImpulse2*this.cfm2,o-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var p=this.limitImpulse1,g=this.limitImpulse2,v=this.limitImpulse3,m=n*this.d00+r*this.d01+o*this.d02,w=n*this.d10+r*this.d11+o*this.d12,x=n*this.d20+r*this.d21+o*this.d22;this.limitImpulse1+=m,this.limitImpulse2+=w,this.limitImpulse3+=x;var y=0;(this.limitState1==2||this.limitImpulse1*this.limitState1<0)&&(m=-p,r+=m*this.k10,o+=m*this.k20,y|=1),(this.limitState2==2||this.limitImpulse2*this.limitState2<0)&&(w=-g,n+=w*this.k01,o+=w*this.k21,y|=2),(this.limitState3==2||this.limitImpulse3*this.limitState3<0)&&(x=-v,n+=x*this.k02,r+=x*this.k12,y|=4);var d;switch(y){case 1:d=1/(this.k11*this.k22-this.k12*this.k21),w=(this.k22*r+-this.k12*o)*d,x=(-this.k21*r+this.k11*o)*d;break;case 2:d=1/(this.k00*this.k22-this.k02*this.k20),m=(this.k22*n+-this.k02*o)*d,x=(-this.k20*n+this.k00*o)*d;break;case 3:x=o/this.k22;break;case 4:d=1/(this.k00*this.k11-this.k01*this.k10),m=(this.k11*n+-this.k01*r)*d,w=(-this.k10*n+this.k00*r)*d;break;case 5:w=r/this.k11;break;case 6:m=n/this.k00;break}this.limitImpulse1=m+p,this.limitImpulse2=w+g,this.limitImpulse3=x+v;var z=u+m,k=c+w,N=f+x;this.a1.x+=z*this.a1x1+k*this.a1x2+N*this.a1x3,this.a1.y+=z*this.a1y1+k*this.a1y2+N*this.a1y3,this.a1.z+=z*this.a1z1+k*this.a1z2+N*this.a1z3,this.a2.x-=z*this.a2x1+k*this.a2x2+N*this.a2x3,this.a2.y-=z*this.a2y1+k*this.a2y2+N*this.a2y3,this.a2.z-=z*this.a2z1+k*this.a2z2+N*this.a2z3,t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,s=this.a2.z-this.a1.z,r=t*this.ax2+e*this.ay2+s*this.az2}});function Jh(t,e,s){hs.call(this,t),this.type=yy,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize();var n=new oi().setQuat(new Ni().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=new R().tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(n,!0),this.ax1=new R,this.ax2=new R,this.an1=new R,this.an2=new R,this.tmp=new R,this.nor=new R,this.tan=new R,this.bin=new R,this.limitMotor=new ei(this.nor,!1),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=s,this.lc=new dc(this),this.r3=new gl(this,this.limitMotor,new ei(this.tan,!0),new ei(this.bin,!0))}Jh.prototype=Object.assign(Object.create(hs.prototype),{constructor:Jh,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan);var s=j.acosClamp(j.dotVectors(this.an1,this.an2));this.tmp.crossVectors(this.an1,this.an2),j.dotVectors(this.nor,this.tmp)<0?this.limitMotor.angle=-s:this.limitMotor.angle=s,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=j.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=j.dotVectors(this.bin,this.tmp),this.r3.preSolve(t,e),this.lc.preSolve(t,e)},solve:function(){this.r3.solve(),this.lc.solve()},postSolve:function(){}});function Zh(t){hs.call(this,t),this.type=my,this.lc=new dc(this)}Zh.prototype=Object.assign(Object.create(hs.prototype),{constructor:Zh,preSolve:function(t,e){this.updateAnchorPoints(),this.lc.preSolve(t,e)},solve:function(){this.lc.solve()},postSolve:function(){}});function mp(t,e){this.cfm=NaN,this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x=NaN,this.t1y=NaN,this.t1z=NaN,this.t2x=NaN,this.t2y=NaN,this.t2z=NaN,this.l1x=NaN,this.l1y=NaN,this.l1z=NaN,this.l2x=NaN,this.l2y=NaN,this.l2z=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=e,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0}Object.assign(mp.prototype,{TranslationalConstraint:!0,preSolve:function(t,e){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var s=this.i1.elements,n=this.i2.elements;this.i1e00=s[0],this.i1e01=s[1],this.i1e02=s[2],this.i1e10=s[3],this.i1e11=s[4],this.i1e12=s[5],this.i1e20=s[6],this.i1e21=s[7],this.i1e22=s[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var r=this.p2.x-this.p1.x,o=this.p2.y-this.p1.y,a=this.p2.z-this.p1.z,l=r*this.ax+o*this.ay+a*this.az,h=this.limitMotor.frequency,u=h>0,c=this.lowerLimit<=this.upperLimit;(u&&l>20||l<-20)&&(u=!1),c?(this.lowerLimit==this.upperLimit?(this.limitState!=0&&(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-l,u||(l=this.lowerLimit)):l<this.lowerLimit?(this.limitState!=-1&&(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-l,u||(l=this.lowerLimit)):l>this.upperLimit?(this.limitState!=1&&(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-l,u||(l=this.upperLimit)):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),u||(this.limitVelocity>.005?this.limitVelocity-=.005:this.limitVelocity<-.005?this.limitVelocity+=.005:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&&(this.limitState!=0||u)?this.maxMotorImpulse=this.maxMotorForce*t:(this.motorImpulse=0,this.maxMotorImpulse=0);var f=l*this.ax,p=l*this.ay,g=l*this.az,v=this.m1/(this.m1+this.m2),m=1-v;if(this.r1x=this.r1.x+f*v,this.r1y=this.r1.y+p*v,this.r1z=this.r1.z+g*v,this.r2x=this.r2.x-f*m,this.r2y=this.r2.y-p*m,this.r2z=this.r2.z-g*m,this.t1x=this.r1y*this.az-this.r1z*this.ay,this.t1y=this.r1z*this.ax-this.r1x*this.az,this.t1z=this.r1x*this.ay-this.r1y*this.ax,this.t2x=this.r2y*this.az-this.r2z*this.ay,this.t2y=this.r2z*this.ax-this.r2x*this.az,this.t2z=this.r2x*this.ay-this.r2y*this.ax,this.l1x=this.ax*this.m1,this.l1y=this.ay*this.m1,this.l1z=this.az*this.m1,this.l2x=this.ax*this.m2,this.l2y=this.ay*this.m2,this.l2z=this.az*this.m2,this.a1x=this.t1x*this.i1e00+this.t1y*this.i1e01+this.t1z*this.i1e02,this.a1y=this.t1x*this.i1e10+this.t1y*this.i1e11+this.t1z*this.i1e12,this.a1z=this.t1x*this.i1e20+this.t1y*this.i1e21+this.t1z*this.i1e22,this.a2x=this.t2x*this.i2e00+this.t2y*this.i2e01+this.t2z*this.i2e02,this.a2y=this.t2x*this.i2e10+this.t2y*this.i2e11+this.t2z*this.i2e12,this.a2z=this.t2x*this.i2e20+this.t2y*this.i2e21+this.t2z*this.i2e22,this.motorDenom=this.m1+this.m2+this.ax*(this.a1y*this.r1z-this.a1z*this.r1y+this.a2y*this.r2z-this.a2z*this.r2y)+this.ay*(this.a1z*this.r1x-this.a1x*this.r1z+this.a2z*this.r2x-this.a2x*this.r2z)+this.az*(this.a1x*this.r1y-this.a1y*this.r1x+this.a2x*this.r2y-this.a2y*this.r2x),this.invMotorDenom=1/this.motorDenom,u&&this.limitState!=2){var w=6.2831853*h,x=w*w*t,y=e/(x+2*this.limitMotor.dampingRatio*w);this.cfm=this.motorDenom*y,this.limitVelocity*=x*y}else this.cfm=0,this.limitVelocity*=e*.05;this.invDenom=1/(this.motorDenom+this.cfm);var d=this.limitImpulse+this.motorImpulse;this.l1.x+=d*this.l1x,this.l1.y+=d*this.l1y,this.l1.z+=d*this.l1z,this.a1.x+=d*this.a1x,this.a1.y+=d*this.a1y,this.a1.z+=d*this.a1z,this.l2.x-=d*this.l2x,this.l2.y-=d*this.l2y,this.l2.z-=d*this.l2z,this.a2.x-=d*this.a2x,this.a2.y-=d*this.a2y,this.a2.z-=d*this.a2z},solve:function(){var t=this.ax*(this.l2.x-this.l1.x)+this.ay*(this.l2.y-this.l1.y)+this.az*(this.l2.z-this.l1.z)+this.t2x*this.a2.x-this.t1x*this.a1.x+this.t2y*this.a2.y-this.t1y*this.a1.y+this.t2z*this.a2.z-this.t1z*this.a1.z,e;if(this.enableMotor){e=(t-this.motorSpeed)*this.invMotorDenom;var s=this.motorImpulse;this.motorImpulse+=e,this.motorImpulse>this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse<-this.maxMotorImpulse&&(this.motorImpulse=-this.maxMotorImpulse),e=this.motorImpulse-s,t-=e*this.motorDenom}else e=0;var n;if(this.limitState!=2){n=(t-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var r=this.limitImpulse;this.limitImpulse+=n,this.limitImpulse*this.limitState<0&&(this.limitImpulse=0),n=this.limitImpulse-r}else n=0;var o=n+e;this.l1.x+=o*this.l1x,this.l1.y+=o*this.l1y,this.l1.z+=o*this.l1z,this.a1.x+=o*this.a1x,this.a1.y+=o*this.a1y,this.a1.z+=o*this.a1z,this.l2.x-=o*this.l2x,this.l2.y-=o*this.l2y,this.l2.z-=o*this.l2z,this.a2.x-=o*this.a2x,this.a2.y-=o*this.a2y,this.a2.z-=o*this.a2z}});function tu(t,e,s){hs.call(this,t),this.type=py,this.nor=new R,this.limitMotor=new ei(this.nor,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=s,this.t=new mp(this,this.limitMotor)}tu.prototype=Object.assign(Object.create(hs.prototype),{constructor:tu,preSolve:function(t,e){this.updateAnchorPoints(),this.nor.sub(this.anchorPoint2,this.anchorPoint1).normalize(),this.t.preSolve(t,e)},solve:function(){this.t.solve()},postSolve:function(){}});function yp(t,e){this.joint=t,this.targetOrientation=new Ni().invert(e),this.relativeOrientation=new Ni,this.ii1=null,this.ii2=null,this.dd=null,this.vel=new R,this.imp=new R,this.rn0=new R,this.rn1=new R,this.rn2=new R,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia}Object.assign(yp.prototype,{AngularConstraint:!0,preSolve:function(t,e){var s,n,r;this.ii1=this.i1.clone(),this.ii2=this.i2.clone(),r=new oi().add(this.ii1,this.ii2).elements,s=1/(r[0]*(r[4]*r[8]-r[7]*r[5])+r[3]*(r[7]*r[2]-r[1]*r[8])+r[6]*(r[1]*r[5]-r[4]*r[2])),this.dd=new oi().set(r[4]*r[8]-r[5]*r[7],r[2]*r[7]-r[1]*r[8],r[1]*r[5]-r[2]*r[4],r[5]*r[6]-r[3]*r[8],r[0]*r[8]-r[2]*r[6],r[2]*r[3]-r[0]*r[5],r[3]*r[7]-r[4]*r[6],r[1]*r[6]-r[0]*r[7],r[0]*r[4]-r[1]*r[3]).multiplyScalar(s),this.relativeOrientation.invert(this.b1.orientation).multiply(this.targetOrientation).multiply(this.b2.orientation),s=this.relativeOrientation.w*2,this.vel.copy(this.relativeOrientation).multiplyScalar(s),n=this.vel.length(),n>.02?(n=(.02-n)/n*e*.05,this.vel.multiplyScalar(n)):this.vel.set(0,0,0),this.rn1.copy(this.imp).applyMatrix3(this.ii1,!0),this.rn2.copy(this.imp).applyMatrix3(this.ii2,!0),this.a1.add(this.rn1),this.a2.sub(this.rn2)},solve:function(){var t=this.a2.clone().sub(this.a1).sub(this.vel);this.rn0.copy(t).applyMatrix3(this.dd,!0),this.rn1.copy(this.rn0).applyMatrix3(this.ii1,!0),this.rn2.copy(this.rn0).applyMatrix3(this.ii2,!0),this.imp.add(this.rn0),this.a1.add(this.rn1),this.a2.sub(this.rn2)}});function wl(t,e,s,n){this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x1=NaN,this.t1y1=NaN,this.t1z1=NaN,this.t2x1=NaN,this.t2y1=NaN,this.t2z1=NaN,this.l1x1=NaN,this.l1y1=NaN,this.l1z1=NaN,this.l2x1=NaN,this.l2y1=NaN,this.l2z1=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.t1x2=NaN,this.t1y2=NaN,this.t1z2=NaN,this.t2x2=NaN,this.t2y2=NaN,this.t2z2=NaN,this.l1x2=NaN,this.l1y2=NaN,this.l1z2=NaN,this.l2x2=NaN,this.l2y2=NaN,this.l2z2=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.t1x3=NaN,this.t1y3=NaN,this.t1z3=NaN,this.t2x3=NaN,this.t2y3=NaN,this.t2z3=NaN,this.l1x3=NaN,this.l1y3=NaN,this.l1z3=NaN,this.l2x3=NaN,this.l2y3=NaN,this.l2z3=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=s,this.limitMotor3=n,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0,this.cfm1=0,this.cfm2=0,this.cfm3=0,this.weight=-1}Object.assign(wl.prototype,{Translational3Constraint:!0,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var s=this.i1.elements,n=this.i2.elements;this.i1e00=s[0],this.i1e01=s[1],this.i1e02=s[2],this.i1e10=s[3],this.i1e11=s[4],this.i1e12=s[5],this.i1e20=s[6],this.i1e21=s[7],this.i1e22=s[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var r=this.p2.x-this.p1.x,o=this.p2.y-this.p1.y,a=this.p2.z-this.p1.z,l=r*this.ax1+o*this.ay1+a*this.az1,h=r*this.ax2+o*this.ay2+a*this.az2,u=r*this.ax3+o*this.ay3+a*this.az3,c=this.limitMotor1.frequency,f=this.limitMotor2.frequency,p=this.limitMotor3.frequency,g=c>0,v=f>0,m=p>0,w=this.lowerLimit1<=this.upperLimit1,x=this.lowerLimit2<=this.upperLimit2,y=this.lowerLimit3<=this.upperLimit3;(g&&l>20||l<-20)&&(g=!1),(v&&h>20||h<-20)&&(v=!1),(m&&u>20||u<-20)&&(m=!1),w?(this.lowerLimit1==this.upperLimit1?(this.limitState1!=0&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-l,g||(l=this.lowerLimit1)):l<this.lowerLimit1?(this.limitState1!=-1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-l,g||(l=this.lowerLimit1)):l>this.upperLimit1?(this.limitState1!=1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-l,g||(l=this.upperLimit1)):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),g||(this.limitVelocity1>.005?this.limitVelocity1-=.005:this.limitVelocity1<-.005?this.limitVelocity1+=.005:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0),x?(this.lowerLimit2==this.upperLimit2?(this.limitState2!=0&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-h,v||(h=this.lowerLimit2)):h<this.lowerLimit2?(this.limitState2!=-1&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-h,v||(h=this.lowerLimit2)):h>this.upperLimit2?(this.limitState2!=1&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-h,v||(h=this.upperLimit2)):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),v||(this.limitVelocity2>.005?this.limitVelocity2-=.005:this.limitVelocity2<-.005?this.limitVelocity2+=.005:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0),y?(this.lowerLimit3==this.upperLimit3?(this.limitState3!=0&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-u,m||(u=this.lowerLimit3)):u<this.lowerLimit3?(this.limitState3!=-1&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-u,m||(u=this.lowerLimit3)):u>this.upperLimit3?(this.limitState3!=1&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-u,m||(u=this.upperLimit3)):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),m||(this.limitVelocity3>.005?this.limitVelocity3-=.005:this.limitVelocity3<-.005?this.limitVelocity3+=.005:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(this.limitState1!=0||g)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(this.limitState2!=0||v)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(this.limitState3!=0||m)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0);var d=l*this.ax1+h*this.ax2+u*this.ax2,z=l*this.ay1+h*this.ay2+u*this.ay2,k=l*this.az1+h*this.az2+u*this.az2,N=this.m2/(this.m1+this.m2);this.weight>=0&&(N=this.weight);var S=1-N;this.r1x=this.r1.x+d*N,this.r1y=this.r1.y+z*N,this.r1z=this.r1.z+k*N,this.r2x=this.r2.x-d*S,this.r2y=this.r2.y-z*S,this.r2z=this.r2.z-k*S,this.t1x1=this.r1y*this.az1-this.r1z*this.ay1,this.t1y1=this.r1z*this.ax1-this.r1x*this.az1,this.t1z1=this.r1x*this.ay1-this.r1y*this.ax1,this.t2x1=this.r2y*this.az1-this.r2z*this.ay1,this.t2y1=this.r2z*this.ax1-this.r2x*this.az1,this.t2z1=this.r2x*this.ay1-this.r2y*this.ax1,this.l1x1=this.ax1*this.m1,this.l1y1=this.ay1*this.m1,this.l1z1=this.az1*this.m1,this.l2x1=this.ax1*this.m2,this.l2y1=this.ay1*this.m2,this.l2z1=this.az1*this.m2,this.a1x1=this.t1x1*this.i1e00+this.t1y1*this.i1e01+this.t1z1*this.i1e02,this.a1y1=this.t1x1*this.i1e10+this.t1y1*this.i1e11+this.t1z1*this.i1e12,this.a1z1=this.t1x1*this.i1e20+this.t1y1*this.i1e21+this.t1z1*this.i1e22,this.a2x1=this.t2x1*this.i2e00+this.t2y1*this.i2e01+this.t2z1*this.i2e02,this.a2y1=this.t2x1*this.i2e10+this.t2y1*this.i2e11+this.t2z1*this.i2e12,this.a2z1=this.t2x1*this.i2e20+this.t2y1*this.i2e21+this.t2z1*this.i2e22,this.t1x2=this.r1y*this.az2-this.r1z*this.ay2,this.t1y2=this.r1z*this.ax2-this.r1x*this.az2,this.t1z2=this.r1x*this.ay2-this.r1y*this.ax2,this.t2x2=this.r2y*this.az2-this.r2z*this.ay2,this.t2y2=this.r2z*this.ax2-this.r2x*this.az2,this.t2z2=this.r2x*this.ay2-this.r2y*this.ax2,this.l1x2=this.ax2*this.m1,this.l1y2=this.ay2*this.m1,this.l1z2=this.az2*this.m1,this.l2x2=this.ax2*this.m2,this.l2y2=this.ay2*this.m2,this.l2z2=this.az2*this.m2,this.a1x2=this.t1x2*this.i1e00+this.t1y2*this.i1e01+this.t1z2*this.i1e02,this.a1y2=this.t1x2*this.i1e10+this.t1y2*this.i1e11+this.t1z2*this.i1e12,this.a1z2=this.t1x2*this.i1e20+this.t1y2*this.i1e21+this.t1z2*this.i1e22,this.a2x2=this.t2x2*this.i2e00+this.t2y2*this.i2e01+this.t2z2*this.i2e02,this.a2y2=this.t2x2*this.i2e10+this.t2y2*this.i2e11+this.t2z2*this.i2e12,this.a2z2=this.t2x2*this.i2e20+this.t2y2*this.i2e21+this.t2z2*this.i2e22,this.t1x3=this.r1y*this.az3-this.r1z*this.ay3,this.t1y3=this.r1z*this.ax3-this.r1x*this.az3,this.t1z3=this.r1x*this.ay3-this.r1y*this.ax3,this.t2x3=this.r2y*this.az3-this.r2z*this.ay3,this.t2y3=this.r2z*this.ax3-this.r2x*this.az3,this.t2z3=this.r2x*this.ay3-this.r2y*this.ax3,this.l1x3=this.ax3*this.m1,this.l1y3=this.ay3*this.m1,this.l1z3=this.az3*this.m1,this.l2x3=this.ax3*this.m2,this.l2y3=this.ay3*this.m2,this.l2z3=this.az3*this.m2,this.a1x3=this.t1x3*this.i1e00+this.t1y3*this.i1e01+this.t1z3*this.i1e02,this.a1y3=this.t1x3*this.i1e10+this.t1y3*this.i1e11+this.t1z3*this.i1e12,this.a1z3=this.t1x3*this.i1e20+this.t1y3*this.i1e21+this.t1z3*this.i1e22,this.a2x3=this.t2x3*this.i2e00+this.t2y3*this.i2e01+this.t2z3*this.i2e02,this.a2y3=this.t2x3*this.i2e10+this.t2y3*this.i2e11+this.t2z3*this.i2e12,this.a2z3=this.t2x3*this.i2e20+this.t2y3*this.i2e21+this.t2z3*this.i2e22;var U=this.m1+this.m2;if(this.k00=(this.ax1*this.ax1+this.ay1*this.ay1+this.az1*this.az1)*U,this.k01=(this.ax1*this.ax2+this.ay1*this.ay2+this.az1*this.az2)*U,this.k02=(this.ax1*this.ax3+this.ay1*this.ay3+this.az1*this.az3)*U,this.k10=(this.ax2*this.ax1+this.ay2*this.ay1+this.az2*this.az1)*U,this.k11=(this.ax2*this.ax2+this.ay2*this.ay2+this.az2*this.az2)*U,this.k12=(this.ax2*this.ax3+this.ay2*this.ay3+this.az2*this.az3)*U,this.k20=(this.ax3*this.ax1+this.ay3*this.ay1+this.az3*this.az1)*U,this.k21=(this.ax3*this.ax2+this.ay3*this.ay2+this.az3*this.az2)*U,this.k22=(this.ax3*this.ax3+this.ay3*this.ay3+this.az3*this.az3)*U,this.k00+=this.t1x1*this.a1x1+this.t1y1*this.a1y1+this.t1z1*this.a1z1,this.k01+=this.t1x1*this.a1x2+this.t1y1*this.a1y2+this.t1z1*this.a1z2,this.k02+=this.t1x1*this.a1x3+this.t1y1*this.a1y3+this.t1z1*this.a1z3,this.k10+=this.t1x2*this.a1x1+this.t1y2*this.a1y1+this.t1z2*this.a1z1,this.k11+=this.t1x2*this.a1x2+this.t1y2*this.a1y2+this.t1z2*this.a1z2,this.k12+=this.t1x2*this.a1x3+this.t1y2*this.a1y3+this.t1z2*this.a1z3,this.k20+=this.t1x3*this.a1x1+this.t1y3*this.a1y1+this.t1z3*this.a1z1,this.k21+=this.t1x3*this.a1x2+this.t1y3*this.a1y2+this.t1z3*this.a1z2,this.k22+=this.t1x3*this.a1x3+this.t1y3*this.a1y3+this.t1z3*this.a1z3,this.k00+=this.t2x1*this.a2x1+this.t2y1*this.a2y1+this.t2z1*this.a2z1,this.k01+=this.t2x1*this.a2x2+this.t2y1*this.a2y2+this.t2z1*this.a2z2,this.k02+=this.t2x1*this.a2x3+this.t2y1*this.a2y3+this.t2z1*this.a2z3,this.k10+=this.t2x2*this.a2x1+this.t2y2*this.a2y1+this.t2z2*this.a2z1,this.k11+=this.t2x2*this.a2x2+this.t2y2*this.a2y2+this.t2z2*this.a2z2,this.k12+=this.t2x2*this.a2x3+this.t2y2*this.a2y3+this.t2z2*this.a2z3,this.k20+=this.t2x3*this.a2x1+this.t2y3*this.a2y1+this.t2z3*this.a2z1,this.k21+=this.t2x3*this.a2x2+this.t2y3*this.a2y2+this.t2z3*this.a2z2,this.k22+=this.t2x3*this.a2x3+this.t2y3*this.a2y3+this.t2z3*this.a2z3,this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,g&&this.limitState1!=2){var O=6.2831853*c,M=O*O*t,F=e/(M+2*this.limitMotor1.dampingRatio*O);this.cfm1=this.kv00*F,this.limitVelocity1*=M*F}else this.cfm1=0,this.limitVelocity1*=e*.05;v&&this.limitState2!=2?(O=6.2831853*f,M=O*O*t,F=e/(M+2*this.limitMotor2.dampingRatio*O),this.cfm2=this.kv11*F,this.limitVelocity2*=M*F):(this.cfm2=0,this.limitVelocity2*=e*.05),m&&this.limitState3!=2?(O=6.2831853*p,M=O*O*t,F=e/(M+2*this.limitMotor3.dampingRatio*O),this.cfm3=this.kv22*F,this.limitVelocity3*=M*F):(this.cfm3=0,this.limitVelocity3*=e*.05),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var A=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*A,this.d01=(this.k02*this.k21-this.k01*this.k22)*A,this.d02=(this.k01*this.k12-this.k02*this.k11)*A,this.d10=(this.k12*this.k20-this.k10*this.k22)*A,this.d11=(this.k00*this.k22-this.k02*this.k20)*A,this.d12=(this.k02*this.k10-this.k00*this.k12)*A,this.d20=(this.k10*this.k21-this.k11*this.k20)*A,this.d21=(this.k01*this.k20-this.k00*this.k21)*A,this.d22=(this.k00*this.k11-this.k01*this.k10)*A;var D=this.limitImpulse1+this.motorImpulse1,P=this.limitImpulse2+this.motorImpulse2,ot=this.limitImpulse3+this.motorImpulse3;this.l1.x+=D*this.l1x1+P*this.l1x2+ot*this.l1x3,this.l1.y+=D*this.l1y1+P*this.l1y2+ot*this.l1y3,this.l1.z+=D*this.l1z1+P*this.l1z2+ot*this.l1z3,this.a1.x+=D*this.a1x1+P*this.a1x2+ot*this.a1x3,this.a1.y+=D*this.a1y1+P*this.a1y2+ot*this.a1y3,this.a1.z+=D*this.a1z1+P*this.a1z2+ot*this.a1z3,this.l2.x-=D*this.l2x1+P*this.l2x2+ot*this.l2x3,this.l2.y-=D*this.l2y1+P*this.l2y2+ot*this.l2y3,this.l2.z-=D*this.l2z1+P*this.l2z2+ot*this.l2z3,this.a2.x-=D*this.a2x1+P*this.a2x2+ot*this.a2x3,this.a2.y-=D*this.a2y1+P*this.a2y2+ot*this.a2y3,this.a2.z-=D*this.a2z1+P*this.a2z2+ot*this.a2z3},solve:function(){var t=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y,e=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z,s=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x,n=t*this.ax1+e*this.ay1+s*this.az1,r=t*this.ax2+e*this.ay2+s*this.az2,o=t*this.ax3+e*this.ay3+s*this.az3,a=this.motorImpulse1,l=this.motorImpulse2,h=this.motorImpulse3,u=0,c=0,f=0;this.enableMotor1&&(u=(n-this.motorSpeed1)*this.dv00,this.motorImpulse1+=u,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),u=this.motorImpulse1-a),this.enableMotor2&&(c=(r-this.motorSpeed2)*this.dv11,this.motorImpulse2+=c,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),c=this.motorImpulse2-l),this.enableMotor3&&(f=(o-this.motorSpeed3)*this.dv22,this.motorImpulse3+=f,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),f=this.motorImpulse3-h),n+=u*this.kv00+c*this.k01+f*this.k02,r+=u*this.k10+c*this.kv11+f*this.k12,o+=u*this.k20+c*this.k21+f*this.kv22,n-=this.limitVelocity1+this.limitImpulse1*this.cfm1,r-=this.limitVelocity2+this.limitImpulse2*this.cfm2,o-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var p=this.limitImpulse1,g=this.limitImpulse2,v=this.limitImpulse3,m=n*this.d00+r*this.d01+o*this.d02,w=n*this.d10+r*this.d11+o*this.d12,x=n*this.d20+r*this.d21+o*this.d22;this.limitImpulse1+=m,this.limitImpulse2+=w,this.limitImpulse3+=x;var y=0;(this.limitState1==2||this.limitImpulse1*this.limitState1<0)&&(m=-p,r+=m*this.k10,o+=m*this.k20,y|=1),(this.limitState2==2||this.limitImpulse2*this.limitState2<0)&&(w=-g,n+=w*this.k01,o+=w*this.k21,y|=2),(this.limitState3==2||this.limitImpulse3*this.limitState3<0)&&(x=-v,n+=x*this.k02,r+=x*this.k12,y|=4);var d;switch(y){case 1:d=1/(this.k11*this.k22-this.k12*this.k21),w=(this.k22*r+-this.k12*o)*d,x=(-this.k21*r+this.k11*o)*d;break;case 2:d=1/(this.k00*this.k22-this.k02*this.k20),m=(this.k22*n+-this.k02*o)*d,x=(-this.k20*n+this.k00*o)*d;break;case 3:x=o/this.k22;break;case 4:d=1/(this.k00*this.k11-this.k01*this.k10),m=(this.k11*n+-this.k01*r)*d,w=(-this.k10*n+this.k00*r)*d;break;case 5:w=r/this.k11;break;case 6:m=n/this.k00;break}this.limitImpulse1=p+m,this.limitImpulse2=g+w,this.limitImpulse3=v+x;var z=u+m,k=c+w,N=f+x;this.l1.x+=z*this.l1x1+k*this.l1x2+N*this.l1x3,this.l1.y+=z*this.l1y1+k*this.l1y2+N*this.l1y3,this.l1.z+=z*this.l1z1+k*this.l1z2+N*this.l1z3,this.a1.x+=z*this.a1x1+k*this.a1x2+N*this.a1x3,this.a1.y+=z*this.a1y1+k*this.a1y2+N*this.a1y3,this.a1.z+=z*this.a1z1+k*this.a1z2+N*this.a1z3,this.l2.x-=z*this.l2x1+k*this.l2x2+N*this.l2x3,this.l2.y-=z*this.l2y1+k*this.l2y2+N*this.l2y3,this.l2.z-=z*this.l2z1+k*this.l2z2+N*this.l2z3,this.a2.x-=z*this.a2x1+k*this.a2x2+N*this.a2x3,this.a2.y-=z*this.a2y1+k*this.a2y2+N*this.a2y3,this.a2.z-=z*this.a2z1+k*this.a2z2+N*this.a2z3}});function eu(t,e,s){hs.call(this,t),this.type=gy,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize(),this.ax1=new R,this.ax2=new R,this.nor=new R,this.tan=new R,this.bin=new R,this.ac=new yp(this,new Ni().setFromUnitVectors(this.localAxis1,this.localAxis2)),this.limitMotor=new ei(this.nor,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=s,this.t3=new wl(this,this.limitMotor,new ei(this.tan,!0),new ei(this.bin,!0))}eu.prototype=Object.assign(Object.create(hs.prototype),{constructor:eu,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.ac.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.ac.solve(),this.t3.solve()},postSolve:function(){}});function iu(t,e,s){hs.call(this,t),this.type=xy,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize();var n=new oi().setQuat(new Ni().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=new R().tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(n,!0),this.ax1=new R,this.ax2=new R,this.an1=new R,this.an2=new R,this.tmp=new R,this.nor=new R,this.tan=new R,this.bin=new R,this.rotationalLimitMotor=new ei(this.nor,!1),this.r3=new gl(this,this.rotationalLimitMotor,new ei(this.tan,!0),new ei(this.bin,!0)),this.translationalLimitMotor=new ei(this.nor,!0),this.translationalLimitMotor.lowerLimit=e,this.translationalLimitMotor.upperLimit=s,this.t3=new wl(this,this.translationalLimitMotor,new ei(this.tan,!0),new ei(this.bin,!0))}iu.prototype=Object.assign(Object.create(hs.prototype),{constructor:iu,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.tmp.crossVectors(this.an1,this.an2);var s=j.acosClamp(j.dotVectors(this.an1,this.an2));j.dotVectors(this.nor,this.tmp)<0?this.rotationalLimitMotor.angle=-s:this.rotationalLimitMotor.angle=s,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=j.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=j.dotVectors(this.bin,this.tmp),this.r3.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}});function su(t){hs.call(this,t),this.type=vy,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize(),this.localAngle1=new R,this.localAngle2=new R;var e=j.dotVectors(this.localAxis1,this.localAxis2);if(e>-1&&e<1)this.localAngle1.set(this.localAxis2.x-e*this.localAxis1.x,this.localAxis2.y-e*this.localAxis1.y,this.localAxis2.z-e*this.localAxis1.z).normalize(),this.localAngle2.set(this.localAxis1.x-e*this.localAxis2.x,this.localAxis1.y-e*this.localAxis2.y,this.localAxis1.z-e*this.localAxis2.z).normalize();else{var s=new oi().setQuat(new Ni().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1.tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(s,!0)}this.ax1=new R,this.ax2=new R,this.an1=new R,this.an2=new R,this.tmp=new R,this.nor=new R,this.tan=new R,this.bin=new R,this.translationalLimitMotor=new ei(this.tan,!0),this.translationalLimitMotor.frequency=8,this.translationalLimitMotor.dampingRatio=1,this.rotationalLimitMotor1=new ei(this.tan,!1),this.rotationalLimitMotor2=new ei(this.bin,!1),this.t3=new wl(this,new ei(this.nor,!0),this.translationalLimitMotor,new ei(this.bin,!0)),this.t3.weight=1,this.r3=new gl(this,new ei(this.nor,!0),this.rotationalLimitMotor1,this.rotationalLimitMotor2)}su.prototype=Object.assign(Object.create(hs.prototype),{constructor:su,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.r3.limitMotor1.angle=j.dotVectors(this.ax1,this.ax2);var s=j.dotVectors(this.an1,this.ax2);j.dotVectors(this.ax1,this.tmp.crossVectors(this.an1,this.ax2))<0?this.rotationalLimitMotor1.angle=-s:this.rotationalLimitMotor1.angle=s,s=j.dotVectors(this.an2,this.ax1),j.dotVectors(this.ax2,this.tmp.crossVectors(this.an2,this.ax1))<0?this.rotationalLimitMotor2.angle=-s:this.rotationalLimitMotor2.angle=s,this.nor.crossVectors(this.ax1,this.ax2).normalize(),this.tan.crossVectors(this.nor,this.ax2).normalize(),this.bin.crossVectors(this.nor,this.ax1).normalize(),this.r3.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}});function Ny(){this.scale=1,this.invScale=1,this.body1=null,this.body2=null,this.localAnchorPoint1=new R,this.localAnchorPoint2=new R,this.localAxis1=new R,this.localAxis2=new R,this.allowCollision=!1}function Sy(){this.mass=0,this.inertia=new oi}function oa(t){this.prev=null,this.next=null,this.shape=null,this.body=null,this.contact=t}function aa(){this.lp1X=NaN,this.lp1Y=NaN,this.lp1Z=NaN,this.lp2X=NaN,this.lp2Y=NaN,this.lp2Z=NaN,this.impulse=NaN}function la(){this.warmStarted=!1,this.position=new R,this.localPoint1=new R,this.localPoint2=new R,this.normal=new R,this.tangent=new R,this.binormal=new R,this.normalImpulse=0,this.tangentImpulse=0,this.binormalImpulse=0,this.normalDenominator=0,this.tangentDenominator=0,this.binormalDenominator=0,this.penetration=0}function nu(){this.body1=null,this.body2=null,this.numPoints=0,this.points=[new la,new la,new la,new la]}nu.prototype={constructor:nu,reset:function(t,e){this.body1=t.parent,this.body2=e.parent,this.numPoints=0},addPointVec:function(t,e,s,n){var r=this.points[this.numPoints++];r.position.copy(t),r.localPoint1.sub(t,this.body1.position).applyMatrix3(this.body1.rotation),r.localPoint2.sub(t,this.body2.position).applyMatrix3(this.body2.rotation),r.normal.copy(e),n&&r.normal.negate(),r.normalImpulse=0,r.penetration=s,r.warmStarted=!1},addPoint:function(t,e,s,n,r,o,a,l){var h=this.points[this.numPoints++];h.position.set(t,e,s),h.localPoint1.sub(h.position,this.body1.position).applyMatrix3(this.body1.rotation),h.localPoint2.sub(h.position,this.body2.position).applyMatrix3(this.body2.rotation),h.normalImpulse=0,h.normal.set(n,r,o),l&&h.normal.negate(),h.penetration=a,h.warmStarted=!1}};function ha(){this.nor=new R,this.tan=new R,this.bin=new R,this.norU1=new R,this.tanU1=new R,this.binU1=new R,this.norU2=new R,this.tanU2=new R,this.binU2=new R,this.norT1=new R,this.tanT1=new R,this.binT1=new R,this.norT2=new R,this.tanT2=new R,this.binT2=new R,this.norTU1=new R,this.tanTU1=new R,this.binTU1=new R,this.norTU2=new R,this.tanTU2=new R,this.binTU2=new R,this.norImp=0,this.tanImp=0,this.binImp=0,this.norDen=0,this.tanDen=0,this.binDen=0,this.norTar=0,this.next=null,this.last=!1}function ru(t){jo.call(this),this.manifold=t,this.restitution=NaN,this.friction=NaN,this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null,this.tmp=new R,this.tmpC1=new R,this.tmpC2=new R,this.tmpP1=new R,this.tmpP2=new R,this.tmplv1=new R,this.tmplv2=new R,this.tmpav1=new R,this.tmpav2=new R,this.m1=NaN,this.m2=NaN,this.num=0,this.ps=t.points,this.cs=new ha,this.cs.next=new ha,this.cs.next.next=new ha,this.cs.next.next.next=new ha}ru.prototype=Object.assign(Object.create(jo.prototype),{constructor:ru,attach:function(){this.p1=this.body1.position,this.p2=this.body2.position,this.lv1=this.body1.linearVelocity,this.av1=this.body1.angularVelocity,this.lv2=this.body2.linearVelocity,this.av2=this.body2.angularVelocity,this.i1=this.body1.inverseInertia,this.i2=this.body2.inverseInertia},detach:function(){this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null},preSolve:function(t,e){this.m1=this.body1.inverseMass,this.m2=this.body2.inverseMass;var s=this.m1+this.m2;this.num=this.manifold.numPoints;for(var n=this.cs,r,o,a,l,h,u,c,f,p=0;p<this.num;p++)r=this.ps[p],this.tmpP1.sub(r.position,this.p1),this.tmpP2.sub(r.position,this.p2),this.tmpC1.crossVectors(this.av1,this.tmpP1),this.tmpC2.crossVectors(this.av2,this.tmpP2),n.norImp=r.normalImpulse,n.tanImp=r.tangentImpulse,n.binImp=r.binormalImpulse,n.nor.copy(r.normal),this.tmp.set(this.lv2.x+this.tmpC2.x-(this.lv1.x+this.tmpC1.x),this.lv2.y+this.tmpC2.y-(this.lv1.y+this.tmpC1.y),this.lv2.z+this.tmpC2.z-(this.lv1.z+this.tmpC1.z)),o=j.dotVectors(n.nor,this.tmp),n.tan.set(this.tmp.x-o*n.nor.x,this.tmp.y-o*n.nor.y,this.tmp.z-o*n.nor.z),a=j.dotVectors(n.tan,n.tan),a<=.04&&n.tan.tangent(n.nor),n.tan.normalize(),n.bin.crossVectors(n.nor,n.tan),n.norU1.scale(n.nor,this.m1),n.norU2.scale(n.nor,this.m2),n.tanU1.scale(n.tan,this.m1),n.tanU2.scale(n.tan,this.m2),n.binU1.scale(n.bin,this.m1),n.binU2.scale(n.bin,this.m2),n.norT1.crossVectors(this.tmpP1,n.nor),n.tanT1.crossVectors(this.tmpP1,n.tan),n.binT1.crossVectors(this.tmpP1,n.bin),n.norT2.crossVectors(this.tmpP2,n.nor),n.tanT2.crossVectors(this.tmpP2,n.tan),n.binT2.crossVectors(this.tmpP2,n.bin),c=this.i1,f=this.i2,n.norTU1.copy(n.norT1).applyMatrix3(c,!0),n.tanTU1.copy(n.tanT1).applyMatrix3(c,!0),n.binTU1.copy(n.binT1).applyMatrix3(c,!0),n.norTU2.copy(n.norT2).applyMatrix3(f,!0),n.tanTU2.copy(n.tanT2).applyMatrix3(f,!0),n.binTU2.copy(n.binT2).applyMatrix3(f,!0),this.tmpC1.crossVectors(n.norTU1,this.tmpP1),this.tmpC2.crossVectors(n.norTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),n.norDen=1/(s+j.dotVectors(n.nor,this.tmp)),this.tmpC1.crossVectors(n.tanTU1,this.tmpP1),this.tmpC2.crossVectors(n.tanTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),n.tanDen=1/(s+j.dotVectors(n.tan,this.tmp)),this.tmpC1.crossVectors(n.binTU1,this.tmpP1),this.tmpC2.crossVectors(n.binTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),n.binDen=1/(s+j.dotVectors(n.bin,this.tmp)),r.warmStarted?(l=r.normalImpulse,this.lv1.addScaledVector(n.norU1,l),this.av1.addScaledVector(n.norTU1,l),this.lv2.subScaledVector(n.norU2,l),this.av2.subScaledVector(n.norTU2,l),n.norImp=l,n.tanImp=0,n.binImp=0,o=0):(n.norImp=0,n.tanImp=0,n.binImp=0),o>-1&&(o=0),h=this.restitution*-o,u=-(r.penetration+.005)*e*.05,h<u&&(h=u),n.norTar=h,n.last=p==this.num-1,n=n.next},solve:function(){this.tmplv1.copy(this.lv1),this.tmplv2.copy(this.lv2),this.tmpav1.copy(this.av1),this.tmpav2.copy(this.av2);for(var t,e,s,n,r,o,a,l,h,u,c=this.cs;o=c.norImp,a=c.tanImp,l=c.binImp,h=-o*this.friction,this.tmp.sub(this.tmplv2,this.tmplv1),r=j.dotVectors(this.tmp,c.tan)+j.dotVectors(this.tmpav2,c.tanT2)-j.dotVectors(this.tmpav1,c.tanT1),t=a,e=r*c.tanDen,a+=e,r=j.dotVectors(this.tmp,c.bin)+j.dotVectors(this.tmpav2,c.binT2)-j.dotVectors(this.tmpav1,c.binT1),s=l,n=r*c.binDen,l+=n,u=a*a+l*l,u>h*h&&(u=h/j.sqrt(u),a*=u,l*=u),e=a-t,n=l-s,this.tmp.set(c.tanU1.x*e+c.binU1.x*n,c.tanU1.y*e+c.binU1.y*n,c.tanU1.z*e+c.binU1.z*n),this.tmplv1.addEqual(this.tmp),this.tmp.set(c.tanTU1.x*e+c.binTU1.x*n,c.tanTU1.y*e+c.binTU1.y*n,c.tanTU1.z*e+c.binTU1.z*n),this.tmpav1.addEqual(this.tmp),this.tmp.set(c.tanU2.x*e+c.binU2.x*n,c.tanU2.y*e+c.binU2.y*n,c.tanU2.z*e+c.binU2.z*n),this.tmplv2.subEqual(this.tmp),this.tmp.set(c.tanTU2.x*e+c.binTU2.x*n,c.tanTU2.y*e+c.binTU2.y*n,c.tanTU2.z*e+c.binTU2.z*n),this.tmpav2.subEqual(this.tmp),this.tmp.sub(this.tmplv2,this.tmplv1),r=j.dotVectors(this.tmp,c.nor)+j.dotVectors(this.tmpav2,c.norT2)-j.dotVectors(this.tmpav1,c.norT1),t=o,e=(r-c.norTar)*c.norDen,o+=e,o>0&&(o=0),e=o-t,this.tmplv1.addScaledVector(c.norU1,e),this.tmpav1.addScaledVector(c.norTU1,e),this.tmplv2.subScaledVector(c.norU2,e),this.tmpav2.subScaledVector(c.norTU2,e),c.norImp=o,c.tanImp=a,c.binImp=l,!c.last;)c=c.next;this.lv1.copy(this.tmplv1),this.lv2.copy(this.tmplv2),this.av1.copy(this.tmpav1),this.av2.copy(this.tmpav2)},postSolve:function(){for(var t=this.cs,e,s=this.num;s--;)e=this.ps[s],e.normal.copy(t.nor),e.tangent.copy(t.tan),e.binormal.copy(t.bin),e.normalImpulse=t.norImp,e.tangentImpulse=t.tanImp,e.binormalImpulse=t.binImp,e.normalDenominator=t.norDen,e.tangentDenominator=t.tanDen,e.binormalDenominator=t.binDen,t=t.next}});function vp(){this.shape1=null,this.shape2=null,this.body1=null,this.body2=null,this.prev=null,this.next=null,this.persisting=!1,this.sleeping=!1,this.detector=null,this.constraint=null,this.touching=!1,this.close=!1,this.dist=j.INF,this.b1Link=new oa(this),this.b2Link=new oa(this),this.s1Link=new oa(this),this.s2Link=new oa(this),this.manifold=new nu,this.buffer=[new aa,new aa,new aa,new aa],this.points=this.manifold.points,this.constraint=new ru(this.manifold)}Object.assign(vp.prototype,{Contact:!0,mixRestitution:function(t,e){return j.sqrt(t*e)},mixFriction:function(t,e){return j.sqrt(t*e)},updateManifold:function(){this.constraint.restitution=this.mixRestitution(this.shape1.restitution,this.shape2.restitution),this.constraint.friction=this.mixFriction(this.shape1.friction,this.shape2.friction);for(var t=this.manifold.numPoints,e=t;e--;){var s=this.buffer[e],n=this.points[e];s.lp1X=n.localPoint1.x,s.lp1Y=n.localPoint1.y,s.lp1Z=n.localPoint1.z,s.lp2X=n.localPoint2.x,s.lp2Y=n.localPoint2.y,s.lp2Z=n.localPoint2.z,s.impulse=n.normalImpulse}this.manifold.numPoints=0,this.detector.detectCollision(this.shape1,this.shape2,this.manifold);var r=this.manifold.numPoints;if(r==0){this.touching=!1,this.close=!1,this.dist=j.INF;return}for((this.touching||this.dist<.001)&&(this.close=!0),this.touching=!0,e=r;e--;){n=this.points[e];for(var o=n.localPoint1.x,a=n.localPoint1.y,l=n.localPoint1.z,h=n.localPoint2.x,u=n.localPoint2.y,c=n.localPoint2.z,f=-1,p=4e-4,g=t;g--;){s=this.buffer[g];var v=s.lp1X-o,m=s.lp1Y-a,w=s.lp1Z-l,x=v*v+m*m+w*w;v=s.lp2X-h,m=s.lp2Y-u,w=s.lp2Z-c;var y=v*v+m*m+w*w;x<y?x<p&&(p=x,f=g):y<p&&(p=y,f=g),p<this.dist&&(this.dist=p)}if(f!=-1){var d=this.buffer[f];this.buffer[f]=this.buffer[--t],this.buffer[t]=d,n.normalImpulse=d.impulse,n.warmStarted=!0}else n.normalImpulse=0,n.warmStarted=!1}},attach:function(t,e){this.shape1=t,this.shape2=e,this.body1=t.parent,this.body2=e.parent,this.manifold.body1=this.body1,this.manifold.body2=this.body2,this.constraint.body1=this.body1,this.constraint.body2=this.body2,this.constraint.attach(),this.s1Link.shape=e,this.s1Link.body=this.body2,this.s2Link.shape=t,this.s2Link.body=this.body1,t.contactLink!=null?(this.s1Link.next=t.contactLink).prev=this.s1Link:this.s1Link.next=null,t.contactLink=this.s1Link,t.numContacts++,e.contactLink!=null?(this.s2Link.next=e.contactLink).prev=this.s2Link:this.s2Link.next=null,e.contactLink=this.s2Link,e.numContacts++,this.b1Link.shape=e,this.b1Link.body=this.body2,this.b2Link.shape=t,this.b2Link.body=this.body1,this.body1.contactLink!=null?(this.b1Link.next=this.body1.contactLink).prev=this.b1Link:this.b1Link.next=null,this.body1.contactLink=this.b1Link,this.body1.numContacts++,this.body2.contactLink!=null?(this.b2Link.next=this.body2.contactLink).prev=this.b2Link:this.b2Link.next=null,this.body2.contactLink=this.b2Link,this.body2.numContacts++,this.prev=null,this.next=null,this.persisting=!0,this.sleeping=this.body1.sleeping&&this.body2.sleeping,this.manifold.numPoints=0},detach:function(){var t=this.s1Link.prev,e=this.s1Link.next;t!==null&&(t.next=e),e!==null&&(e.prev=t),this.shape1.contactLink==this.s1Link&&(this.shape1.contactLink=e),this.s1Link.prev=null,this.s1Link.next=null,this.s1Link.shape=null,this.s1Link.body=null,this.shape1.numContacts--,t=this.s2Link.prev,e=this.s2Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.shape2.contactLink==this.s2Link&&(this.shape2.contactLink=e),this.s2Link.prev=null,this.s2Link.next=null,this.s2Link.shape=null,this.s2Link.body=null,this.shape2.numContacts--,t=this.b1Link.prev,e=this.b1Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.body1.contactLink==this.b1Link&&(this.body1.contactLink=e),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.shape=null,this.b1Link.body=null,this.body1.numContacts--,t=this.b2Link.prev,e=this.b2Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.body2.contactLink==this.b2Link&&(this.body2.contactLink=e),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.shape=null,this.b2Link.body=null,this.body2.numContacts--,this.manifold.body1=null,this.manifold.body2=null,this.constraint.body1=null,this.constraint.body2=null,this.constraint.detach(),this.shape1=null,this.shape2=null,this.body1=null,this.body2=null}});function hr(t,e){this.position=t||new R,this.orientation=e||new Ni,this.scale=1,this.invScale=1,this.mesh=null,this.id=NaN,this.name="",this.prev=null,this.next=null,this.type=uy,this.massInfo=new Sy,this.newPosition=new R,this.controlPos=!1,this.newOrientation=new Ni,this.newRotation=new R,this.currentRotation=new R,this.controlRot=!1,this.controlRotInTime=!1,this.quaternion=new Ni,this.pos=new R,this.linearVelocity=new R,this.angularVelocity=new R,this.parent=null,this.contactLink=null,this.numContacts=0,this.shapes=null,this.numShapes=0,this.jointLink=null,this.numJoints=0,this.sleepPosition=new R,this.sleepOrientation=new Ni,this.isStatic=!1,this.isDynamic=!1,this.isKinematic=!1,this.rotation=new oi,this.mass=0,this.inverseMass=0,this.inverseInertia=new oi,this.localInertia=new oi,this.inverseLocalInertia=new oi,this.tmpInertia=new oi,this.addedToIsland=!1,this.allowSleep=!0,this.sleepTime=0,this.sleeping=!1}Object.assign(hr.prototype,{setParent:function(t){this.parent=t,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numRigidBodies,this.name||(this.name=this.id),this.updateMesh()},addShape:function(t){t.parent&&ki("RigidBody","It is not possible that you add a shape which already has an associated body."),this.shapes!=null&&((this.shapes.prev=t).next=this.shapes),this.shapes=t,t.parent=this,this.parent&&this.parent.addShape(t),this.numShapes++},removeShape:function(t){var e=t;if(e.parent==this){var s=e.prev,n=e.next;s!=null&&(s.next=n),n!=null&&(n.prev=s),this.shapes==e&&(this.shapes=n),e.prev=null,e.next=null,e.parent=null,this.parent&&this.parent.removeShape(e),this.numShapes--}},remove:function(){this.dispose()},dispose:function(){this.parent.removeRigidBody(this)},checkContact:function(t){this.parent.checkContact(this.name,t)},setupMass:function(t,e){var s=e!==void 0?e:!0;this.type=t||no,this.isDynamic=this.type===Xa,this.isStatic=this.type===no,this.mass=0,this.localInertia.set(0,0,0,0,0,0,0,0,0);for(var n=new oi,r=new R,o=this.shapes;o!==null;o=o.next){o.calculateMassInfo(this.massInfo);var a=this.massInfo.mass;r.addScaledVector(o.relativePosition,a),this.mass+=a,this.rotateInertia(o.relativeRotation,this.massInfo.inertia,n),this.localInertia.add(n),this.localInertia.addOffset(a,o.relativePosition)}if(this.inverseMass=1/this.mass,r.scaleEqual(this.inverseMass),s){for(this.position.add(r),o=this.shapes;o!==null;o=o.next)o.relativePosition.subEqual(r);this.localInertia.subOffset(this.mass,r)}this.inverseLocalInertia.invert(this.localInertia),this.type===no&&(this.inverseMass=0,this.inverseLocalInertia.set(0,0,0,0,0,0,0,0,0)),this.syncShapes(),this.awake()},awake:function(){if(!(!this.allowSleep||!this.sleeping)){this.sleeping=!1,this.sleepTime=0;for(var t=this.contactLink;t!=null;)t.body.sleepTime=0,t.body.sleeping=!1,t=t.next;for(var e=this.jointLink;e!=null;)e.body.sleepTime=0,e.body.sleeping=!1,e=e.next;for(var s=this.shapes;s!=null;s=s.next)s.updateProxy()}},sleep:function(){if(!(!this.allowSleep||this.sleeping)){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.sleepPosition.copy(this.position),this.sleepOrientation.copy(this.orientation),this.sleepTime=0,this.sleeping=!0;for(var t=this.shapes;t!=null;t=t.next)t.updateProxy()}},testWakeUp:function(){(this.linearVelocity.testZero()||this.angularVelocity.testZero()||this.position.testDiff(this.sleepPosition)||this.orientation.testDiff(this.sleepOrientation))&&this.awake()},isLonely:function(){return this.numJoints==0&&this.numContacts==0},updatePosition:function(t){switch(this.type){case no:this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.controlPos&&(this.position.copy(this.newPosition),this.controlPos=!1),this.controlRot&&(this.orientation.copy(this.newOrientation),this.controlRot=!1);break;case Xa:this.isKinematic&&(this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0)),this.controlPos&&(this.linearVelocity.subVectors(this.newPosition,this.position).multiplyScalar(1/t),this.controlPos=!1),this.controlRot&&(this.angularVelocity.copy(this.getAxis()),this.orientation.copy(this.newOrientation),this.controlRot=!1),this.position.addScaledVector(this.linearVelocity,t),this.orientation.addTime(this.angularVelocity,t),this.updateMesh();break;default:ki("RigidBody","Invalid type.")}this.syncShapes(),this.updateMesh()},getAxis:function(){return new R(0,1,0).applyMatrix3(this.inverseLocalInertia,!0).normalize()},rotateInertia:function(t,e,s){this.tmpInertia.multiplyMatrices(t,e),s.multiplyMatrices(this.tmpInertia,t,!0)},syncShapes:function(){this.rotation.setQuat(this.orientation),this.rotateInertia(this.rotation,this.inverseLocalInertia,this.inverseInertia);for(var t=this.shapes;t!=null;t=t.next)t.position.copy(t.relativePosition).applyMatrix3(this.rotation,!0).add(this.position),t.rotation.multiplyMatrices(this.rotation,t.relativeRotation),t.updateProxy()},applyImpulse:function(t,e){this.linearVelocity.addScaledVector(e,this.inverseMass);var s=new R().copy(t).sub(this.position).cross(e).applyMatrix3(this.inverseInertia,!0);this.angularVelocity.add(s)},setPosition:function(t){this.newPosition.copy(t).multiplyScalar(this.invScale),this.controlPos=!0,this.isKinematic||(this.isKinematic=!0)},setQuaternion:function(t){this.newOrientation.set(t.x,t.y,t.z,t.w),this.controlRot=!0,this.isKinematic||(this.isKinematic=!0)},setRotation:function(t){this.newOrientation=new Ni().setFromEuler(t.x*j.degtorad,t.y*j.degtorad,t.y*j.degtorad),this.controlRot=!0},resetPosition:function(t,e,s){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.position.set(t,e,s).multiplyScalar(this.invScale),this.awake()},resetQuaternion:function(t){this.angularVelocity.set(0,0,0),this.orientation=new Ni(t.x,t.y,t.z,t.w),this.awake()},resetRotation:function(t,e,s){this.angularVelocity.set(0,0,0),this.orientation=new Ni().setFromEuler(t*j.degtorad,e*j.degtorad,s*j.degtorad),this.awake()},getPosition:function(){return this.pos},getQuaternion:function(){return this.quaternion},connectMesh:function(t){this.mesh=t,this.updateMesh()},updateMesh:function(){this.pos.scale(this.position,this.scale),this.quaternion.copy(this.orientation),this.mesh!==null&&(this.mesh.position.copy(this.getPosition()),this.mesh.quaternion.copy(this.getQuaternion()))}});function My(t,e){this.shape1=t||null,this.shape2=e||null}function rr(){this.types=oy,this.numPairChecks=0,this.numPairs=0,this.pairs=[]}Object.assign(rr.prototype,{BroadPhase:!0,createProxy:function(t){ki("BroadPhase","Inheritance error.")},addProxy:function(t){ki("BroadPhase","Inheritance error.")},removeProxy:function(t){ki("BroadPhase","Inheritance error.")},isAvailablePair:function(t,e){var s=t.parent,n=e.parent;if(s==n||!s.isDynamic&&!n.isDynamic||!(t.belongsTo&e.collidesWith)||!(e.belongsTo&t.collidesWith))return!1;var r;for(s.numJoints<n.numJoints?r=s.jointLink:r=n.jointLink;r!==null;){var o=r.joint;if(!o.allowCollision&&(o.body1==s&&o.body2==n||o.body1==n&&o.body2==s))return!1;r=r.next}return!0},detectPairs:function(){this.pairs=[],this.numPairs=0,this.numPairChecks=0,this.collectPairs()},collectPairs:function(){},addPair:function(t,e){var s=new My(t,e);this.pairs.push(s),this.numPairs++}});var _y=0;function Py(){return _y++}function or(t){this.shape=t,this.aabb=t.aabb}Object.assign(or.prototype,{Proxy:!0,update:function(){ki("Proxy","Inheritance error.")}});function ou(t){or.call(this,t),this.id=Py()}ou.prototype=Object.assign(Object.create(or.prototype),{constructor:ou,update:function(){}});function au(){rr.call(this),this.types=ay,this.proxies=[]}au.prototype=Object.assign(Object.create(rr.prototype),{constructor:au,createProxy:function(t){return new ou(t)},addProxy:function(t){this.proxies.push(t)},removeProxy:function(t){var e=this.proxies.indexOf(t);e>-1&&this.proxies.splice(e,1)},collectPairs:function(){var t=0,e,s,n,r=this.proxies,o=r.length;for(this.numPairChecks=o*(o-1)>>1;t<o;)for(s=r[t++],e=t+1;e<o;)n=r[e++],!(s.aabb.intersectTest(n.aabb)||!this.isAvailablePair(s.shape,n.shape))&&this.addPair(s.shape,n.shape)}});function Wn(){this.numElements=0,this.bufferSize=256,this.elements=[],this.elements.length=this.bufferSize,this.stack=new Float32Array(64)}Object.assign(Wn.prototype,{SAPAxis:!0,addElements:function(t,e){if(this.numElements+2>=this.bufferSize){this.bufferSize*=2;for(var s=[],n=this.numElements;n--;)s[n]=this.elements[n]}this.elements[this.numElements++]=t,this.elements[this.numElements++]=e},removeElements:function(t,e){for(var s=-1,n=-1,r=0,o=this.numElements;r<o;r++){var a=this.elements[r];if(a==t||a==e)if(s==-1)s=r;else{n=r;break}}for(r=s+1,o=n;r<o;r++)this.elements[r-1]=this.elements[r];for(r=n+1,o=this.numElements;r<o;r++)this.elements[r-2]=this.elements[r];this.elements[--this.numElements]=null,this.elements[--this.numElements]=null},sort:function(){for(var t=0,e=1;this.numElements>>e;)e++;e=e*this.numElements>>2,t=0;for(var s=!1,n=this.elements,r=1,o=this.numElements;r<o;r++){var a=n[r],l=a.value,h=n[r-1];if(h.value>l){var u=r;do{if(n[u]=h,--u==0)break;h=n[u-1]}while(h.value>l);if(n[u]=a,t+=r-u,t>e){s=!0;break}}}if(s){t=2;var c=this.stack;for(c[0]=0,c[1]=this.numElements-1;t>0;){var f=c[--t],p=c[--t],g=f-p;if(g>16){var v=p+j.floor(g*.5);for(a=n[v],n[v]=n[f],n[f]=a,l=a.value,r=p-1,u=f;;){var m,w;do m=n[++r];while(m.value<l);do w=n[--u];while(l<w.value&&u!=p);if(r>=u)break;n[r]=w,n[u]=m}n[f]=n[r],n[r]=a,r-p>f-r?(c[t++]=p,c[t++]=r-1,c[t++]=r+1,c[t++]=f):(c[t++]=r+1,c[t++]=f,c[t++]=p,c[t++]=r-1)}else for(r=p+1;r<=f;r++)if(a=n[r],l=a.value,h=n[r-1],h.value>l){u=r;do{if(n[u]=h,--u==0)break;h=n[u-1]}while(h.value>l);n[u]=a}}}},calculateTestCount:function(){for(var t=1,e=0,s=1,n=this.numElements;s<n;s++)this.elements[s].max?t--:(e+=t,t++);return e}});function lr(t,e){this.proxy=t,this.pair=null,this.min1=null,this.max1=null,this.min2=null,this.max2=null,this.max=e,this.value=0}function lu(t,e){or.call(this,e),this.belongsTo=0,this.max=[],this.min=[],this.sap=t,this.min[0]=new lr(this,!1),this.max[0]=new lr(this,!0),this.min[1]=new lr(this,!1),this.max[1]=new lr(this,!0),this.min[2]=new lr(this,!1),this.max[2]=new lr(this,!0),this.max[0].pair=this.min[0],this.max[1].pair=this.min[1],this.max[2].pair=this.min[2],this.min[0].min1=this.min[1],this.min[0].max1=this.max[1],this.min[0].min2=this.min[2],this.min[0].max2=this.max[2],this.min[1].min1=this.min[0],this.min[1].max1=this.max[0],this.min[1].min2=this.min[2],this.min[1].max2=this.max[2],this.min[2].min1=this.min[0],this.min[2].max1=this.max[0],this.min[2].min2=this.min[1],this.min[2].max2=this.max[1]}lu.prototype=Object.assign(Object.create(or.prototype),{constructor:lu,isDynamic:function(){var t=this.shape.parent;return t.isDynamic&&!t.sleeping},update:function(){var t=this.aabb.elements;this.min[0].value=t[0],this.min[1].value=t[1],this.min[2].value=t[2],this.max[0].value=t[3],this.max[1].value=t[4],this.max[2].value=t[5],(this.belongsTo==1&&!this.isDynamic()||this.belongsTo==2&&this.isDynamic())&&(this.sap.removeProxy(this),this.sap.addProxy(this))}});function hu(){rr.call(this),this.types=ly,this.numElementsD=0,this.numElementsS=0,this.axesD=[new Wn,new Wn,new Wn],this.axesS=[new Wn,new Wn,new Wn],this.index1=0,this.index2=1}hu.prototype=Object.assign(Object.create(rr.prototype),{constructor:hu,createProxy:function(t){return new lu(this,t)},addProxy:function(t){var e=t;e.isDynamic()?(this.axesD[0].addElements(e.min[0],e.max[0]),this.axesD[1].addElements(e.min[1],e.max[1]),this.axesD[2].addElements(e.min[2],e.max[2]),e.belongsTo=1,this.numElementsD+=2):(this.axesS[0].addElements(e.min[0],e.max[0]),this.axesS[1].addElements(e.min[1],e.max[1]),this.axesS[2].addElements(e.min[2],e.max[2]),e.belongsTo=2,this.numElementsS+=2)},removeProxy:function(t){var e=t;if(e.belongsTo!=0){switch(e.belongsTo){case 1:this.axesD[0].removeElements(e.min[0],e.max[0]),this.axesD[1].removeElements(e.min[1],e.max[1]),this.axesD[2].removeElements(e.min[2],e.max[2]),this.numElementsD-=2;break;case 2:this.axesS[0].removeElements(e.min[0],e.max[0]),this.axesS[1].removeElements(e.min[1],e.max[1]),this.axesS[2].removeElements(e.min[2],e.max[2]),this.numElementsS-=2;break}e.belongsTo=0}},collectPairs:function(){if(this.numElementsD!=0){var t=this.axesD[this.index1],e=this.axesD[this.index2];t.sort(),e.sort();var s=t.calculateTestCount(),n=e.calculateTestCount(),r,o;s<=n?(e=this.axesS[this.index1],e.sort(),r=t.elements,o=e.elements):(t=this.axesS[this.index2],t.sort(),r=e.elements,o=t.elements,this.index1^=this.index2,this.index2^=this.index1,this.index1^=this.index2);for(var a,l,h=0,u=0;h<this.numElementsD;){var c,f;if(u==this.numElementsS)c=r[h],f=!0,h++;else{var p=r[h],g=o[u];p.value<g.value?(c=p,f=!0,h++):(c=g,f=!1,u++)}if(c.max){var k=c.pair;if(f)if(k==a){a=a.pair;continue}else c=a;else if(k==l){l=l.pair;continue}else c=l;do{if(d=c.pair,d==k){c.pair=d.pair;break}c=d}while(c!=null)}else{for(var v=c.proxy.shape,m=c.min1.value,w=c.max1.value,x=c.min2.value,y=c.max2.value,d=a;d!=null;d=d.pair){var z=d.proxy.shape;this.numPairChecks++,!(m>d.max1.value||w<d.min1.value||x>d.max2.value||y<d.min2.value||!this.isAvailablePair(v,z))&&this.addPair(v,z)}if(f){for(d=l;d!=null;d=d.pair)z=d.proxy.shape,this.numPairChecks++,!(m>d.max1.value||w<d.min1.value||x>d.max2.value||y<d.min2.value||!this.isAvailablePair(v,z))&&this.addPair(v,z);c.pair=a,a=c}else c.pair=l,l=c}}this.index2=(this.index1|this.index2)^3}}});function xp(){this.child1=null,this.child2=null,this.parent=null,this.proxy=null,this.height=0,this.aabb=new xl}function gp(){this.root=null,this.freeNodes=[],this.freeNodes.length=16384,this.numFreeNodes=0,this.aabb=new xl}Object.assign(gp.prototype,{DBVT:!0,moveLeaf:function(t){this.deleteLeaf(t),this.insertLeaf(t)},insertLeaf:function(t){if(this.root==null){this.root=t;return}for(var e=t.aabb,s=this.root,n,r;s.proxy==null;){var o=s.child1,a=s.child2,l=s.aabb,h=o.aabb,u=a.aabb;n=l.surfaceArea(),this.aabb.combine(e,l),r=this.aabb.surfaceArea();var c=r*2,f=(r-n)*2,p=f;this.aabb.combine(e,h),o.proxy!=null?p+=this.aabb.surfaceArea():p+=this.aabb.surfaceArea()-h.surfaceArea();var g=f;if(this.aabb.combine(e,u),a.proxy!=null?g+=this.aabb.surfaceArea():g+=this.aabb.surfaceArea()-u.surfaceArea(),p<g){if(c<p)break;s=o}else{if(c<g)break;s=a}}var v=s.parent,m;this.numFreeNodes>0?m=this.freeNodes[--this.numFreeNodes]:m=new xp,m.parent=v,m.child1=t,m.child2=s,m.aabb.combine(t.aabb,s.aabb),m.height=s.height+1,s.parent=m,t.parent=m,s==this.root?this.root=m:v.child1==s?v.child1=m:v.child2=m;do m=this.balance(m),this.fix(m),m=m.parent;while(m!=null)},getBalance:function(t){return t.proxy!=null?0:t.child1.height-t.child2.height},deleteLeaf:function(t){if(t==this.root){this.root=null;return}var e=t.parent,s;if(e.child1==t?s=e.child2:s=e.child1,e==this.root){this.root=s,s.parent=null;return}var n=e.parent;s.parent=n,n.child1==e?n.child1=s:n.child2=s,this.numFreeNodes<16384&&(this.freeNodes[this.numFreeNodes++]=e);do n=this.balance(n),this.fix(n),n=n.parent;while(n!=null)},balance:function(t){var e=t.height;if(e<2)return t;var s=t.parent,n=t.child1,r=t.child2,o=n.height,a=r.height,l=o-a,h;if(l>1){var u=n.child1,c=n.child2,f=u.height,p=c.height;return f>p?(n.child2=t,t.parent=n,t.child1=c,c.parent=t,t.aabb.combine(c.aabb,r.aabb),h=p-a,t.height=p-(h&h>>31)+1,n.aabb.combine(u.aabb,t.aabb),h=f-e,n.height=f-(h&h>>31)+1):(n.child1=t,t.parent=n,t.child1=u,u.parent=t,t.aabb.combine(u.aabb,r.aabb),h=f-a,t.height=f-(h&h>>31)+1,n.aabb.combine(t.aabb,c.aabb),h=e-p,n.height=e-(h&h>>31)+1),s!=null?s.child1==t?s.child1=n:s.child2=n:this.root=n,n.parent=s,n}else if(l<-1){var g=r.child1,v=r.child2,m=g.height,w=v.height;return m>w?(r.child2=t,t.parent=r,t.child2=v,v.parent=t,t.aabb.combine(n.aabb,v.aabb),h=o-w,t.height=o-(h&h>>31)+1,r.aabb.combine(g.aabb,t.aabb),h=m-e,r.height=m-(h&h>>31)+1):(r.child1=t,t.parent=r,t.child2=g,g.parent=t,t.aabb.combine(n.aabb,g.aabb),h=o-m,t.height=o-(h&h>>31)+1,r.aabb.combine(t.aabb,v.aabb),h=e-w,r.height=e-(h&h>>31)+1),s!=null?s.child1==t?s.child1=r:s.child2=r:this.root=r,r.parent=s,r}return t},fix:function(t){var e=t.child1,s=t.child2;t.aabb.combine(e.aabb,s.aabb),t.height=e.height<s.height?s.height+1:e.height+1}});function uu(t){or.call(this,t),this.leaf=new xp,this.leaf.proxy=this}uu.prototype=Object.assign(Object.create(or.prototype),{constructor:uu,update:function(){}});function cu(){rr.call(this),this.types=hy,this.tree=new gp,this.stack=[],this.leaves=[],this.numLeaves=0}cu.prototype=Object.assign(Object.create(rr.prototype),{constructor:cu,createProxy:function(t){return new uu(t)},addProxy:function(t){this.tree.insertLeaf(t.leaf),this.leaves.push(t.leaf),this.numLeaves++},removeProxy:function(t){this.tree.deleteLeaf(t.leaf);var e=this.leaves.indexOf(t.leaf);e>-1&&(this.leaves.splice(e,1),this.numLeaves--)},collectPairs:function(){if(!(this.numLeaves<2))for(var t,e=.1,s=this.numLeaves;s--;)t=this.leaves[s],t.proxy.aabb.intersectTestTwo(t.aabb)&&(t.aabb.copy(t.proxy.aabb,e),this.tree.deleteLeaf(t),this.tree.insertLeaf(t),this.collide(t,this.tree.root))},collide:function(t,e){var s=2,n,r,o,a,l,h;for(this.stack[0]=t,this.stack[1]=e;s>0;)if(o=this.stack[--s],a=this.stack[--s],l=o.proxy!=null,h=a.proxy!=null,this.numPairChecks++,l&&h){if(n=o.proxy.shape,r=a.proxy.shape,n==r||n.aabb.intersectTest(r.aabb)||!this.isAvailablePair(n,r))continue;this.addPair(n,r)}else{if(o.aabb.intersectTest(a.aabb))continue;h||!l&&o.aabb.surfaceArea()>a.aabb.surfaceArea()?(this.stack[s++]=o.child1,this.stack[s++]=a,this.stack[s++]=o.child2,this.stack[s++]=a):(this.stack[s++]=o,this.stack[s++]=a.child1,this.stack[s++]=o,this.stack[s++]=a.child2)}}});function _i(){this.flip=!1}Object.assign(_i.prototype,{CollisionDetector:!0,detectCollision:function(t,e,s){ki("CollisionDetector","Inheritance error.")}});function fu(){_i.call(this),this.clipVertices1=new Float32Array(24),this.clipVertices2=new Float32Array(24),this.used=new Float32Array(8),this.INF=1/0}fu.prototype=Object.assign(Object.create(_i.prototype),{constructor:fu,detectCollision:function(t,e,s){var n,r;t.id<e.id?(n=t,r=e):(n=e,r=t);var o=n.elements,a=r.elements,l=n.dimentions,h=r.dimentions,u=n.position,c=r.position,f=u.x,p=u.y,g=u.z,v=c.x,m=c.y,w=c.z,x=v-f,y=m-p,d=w-g,z=n.halfWidth,k=n.halfHeight,N=n.halfDepth,S=r.halfWidth,U=r.halfHeight,O=r.halfDepth,M=l[0],F=l[1],A=l[2],D=l[3],P=l[4],ot=l[5],Mt=l[6],tt=l[7],L=l[8],q=l[9],I=l[10],G=l[11],W=l[12],Q=l[13],yt=l[14],Tt=l[15],Lt=l[16],K=l[17],V=h[0],C=h[1],E=h[2],$=h[3],H=h[4],wt=h[5],ut=h[6],vt=h[7],ft=h[8],Qt=h[9],ce=h[10],gt=h[11],X=h[12],et=h[13],st=h[14],_e=h[15],Wt=h[16],jt=h[17],Xt=F*E-A*C,Yt=A*V-M*E,Le=M*C-F*V,at=F*wt-A*H,lt=A*$-M*wt,ht=M*H-F*$,Ne=F*ft-A*vt,re=A*ut-M*ft,oe=M*vt-F*ut,bt=P*E-ot*C,pt=ot*V-D*E,mt=D*C-P*V,rt=P*wt-ot*H,Ht=ot*$-D*wt,ee=D*H-P*$,St=P*ft-ot*vt,J=ot*ut-D*ft,Z=D*vt-P*ut,dt=tt*E-L*C,xt=L*V-Mt*E,ge=Mt*C-tt*V,te=tt*wt-L*H,Se=L*$-Mt*wt,ae=Mt*H-tt*$,li=tt*ft-L*vt,hi=L*ut-Mt*ft,ui=Mt*vt-tt*ut,ys,le,he,ue,Pt,Re,Ie,Ve,At,Ot,Ce,Dt,ci,fi,di,pi,si,ni,be,Ee,Yi,Ci,bi,Ei,Ti,Ai,Di,Oi,Fi,Ki,Ps=!1,Ls=!1,nt=!1,mc=!1,yc=!1,vc=!1,xc=!1,gc=!1,wc=!1,T,fe,de,_,b,pe;if(T=M*x+F*y+A*d,ys=T>0,ys||(T=-T),fe=z,_=M*V+F*C+A*E,b=M*$+F*H+A*wt,pe=M*ut+F*vt+A*ft,_<0&&(_=-_),b<0&&(b=-b),pe<0&&(pe=-pe),de=_*S+b*U+pe*O,pi=T-fe-de,!(pi>0)&&(T=D*x+P*y+ot*d,le=T>0,le||(T=-T),fe=k,_=D*V+P*C+ot*E,b=D*$+P*H+ot*wt,pe=D*ut+P*vt+ot*ft,_<0&&(_=-_),b<0&&(b=-b),pe<0&&(pe=-pe),de=_*S+b*U+pe*O,si=T-fe-de,!(si>0)&&(T=Mt*x+tt*y+L*d,he=T>0,he||(T=-T),fe=N,_=Mt*V+tt*C+L*E,b=Mt*$+tt*H+L*wt,pe=Mt*ut+tt*vt+L*ft,_<0&&(_=-_),b<0&&(b=-b),pe<0&&(pe=-pe),de=_*S+b*U+pe*O,ni=T-fe-de,!(ni>0)&&(T=V*x+C*y+E*d,ue=T>0,ue||(T=-T),_=V*M+C*F+E*A,b=V*D+C*P+E*ot,pe=V*Mt+C*tt+E*L,_<0&&(_=-_),b<0&&(b=-b),pe<0&&(pe=-pe),fe=_*z+b*k+pe*N,de=S,be=(T-fe-de)*1,!(be>0)&&(T=$*x+H*y+wt*d,Pt=T>0,Pt||(T=-T),_=$*M+H*F+wt*A,b=$*D+H*P+wt*ot,pe=$*Mt+H*tt+wt*L,_<0&&(_=-_),b<0&&(b=-b),pe<0&&(pe=-pe),fe=_*z+b*k+pe*N,de=U,Ee=(T-fe-de)*1,!(Ee>0)&&(T=ut*x+vt*y+ft*d,Re=T>0,Re||(T=-T),_=ut*M+vt*F+ft*A,b=ut*D+vt*P+ft*ot,pe=ut*Mt+vt*tt+ft*L,_<0&&(_=-_),b<0&&(b=-b),pe<0&&(pe=-pe),fe=_*z+b*k+pe*N,de=O,Yi=(T-fe-de)*1,!(Yi>0))))))){if(T=Xt*Xt+Yt*Yt+Le*Le,T>1e-5){if(T=1/j.sqrt(T),Xt*=T,Yt*=T,Le*=T,T=Xt*x+Yt*y+Le*d,Ie=T>0,Ie||(T=-T),_=Xt*D+Yt*P+Le*ot,b=Xt*Mt+Yt*tt+Le*L,_<0&&(_=-_),b<0&&(b=-b),fe=_*k+b*N,_=Xt*$+Yt*H+Le*wt,b=Xt*ut+Yt*vt+Le*ft,_<0&&(_=-_),b<0&&(b=-b),de=_*U+b*O,Ci=T-fe-de,Ci>0)return}else Ie=!1,Ci=0,Ps=!0;if(T=at*at+lt*lt+ht*ht,T>1e-5){if(T=1/j.sqrt(T),at*=T,lt*=T,ht*=T,T=at*x+lt*y+ht*d,Ve=T>0,Ve||(T=-T),_=at*D+lt*P+ht*ot,b=at*Mt+lt*tt+ht*L,_<0&&(_=-_),b<0&&(b=-b),fe=_*k+b*N,_=at*V+lt*C+ht*E,b=at*ut+lt*vt+ht*ft,_<0&&(_=-_),b<0&&(b=-b),de=_*S+b*O,bi=T-fe-de,bi>0)return}else Ve=!1,bi=0,Ls=!0;if(T=Ne*Ne+re*re+oe*oe,T>1e-5){if(T=1/j.sqrt(T),Ne*=T,re*=T,oe*=T,T=Ne*x+re*y+oe*d,At=T>0,At||(T=-T),_=Ne*D+re*P+oe*ot,b=Ne*Mt+re*tt+oe*L,_<0&&(_=-_),b<0&&(b=-b),fe=_*k+b*N,_=Ne*V+re*C+oe*E,b=Ne*$+re*H+oe*wt,_<0&&(_=-_),b<0&&(b=-b),de=_*S+b*U,Ei=T-fe-de,Ei>0)return}else At=!1,Ei=0,nt=!0;if(T=bt*bt+pt*pt+mt*mt,T>1e-5){if(T=1/j.sqrt(T),bt*=T,pt*=T,mt*=T,T=bt*x+pt*y+mt*d,Ot=T>0,Ot||(T=-T),_=bt*M+pt*F+mt*A,b=bt*Mt+pt*tt+mt*L,_<0&&(_=-_),b<0&&(b=-b),fe=_*z+b*N,_=bt*$+pt*H+mt*wt,b=bt*ut+pt*vt+mt*ft,_<0&&(_=-_),b<0&&(b=-b),de=_*U+b*O,Ti=T-fe-de,Ti>0)return}else Ot=!1,Ti=0,mc=!0;if(T=rt*rt+Ht*Ht+ee*ee,T>1e-5){if(T=1/j.sqrt(T),rt*=T,Ht*=T,ee*=T,T=rt*x+Ht*y+ee*d,Ce=T>0,Ce||(T=-T),_=rt*M+Ht*F+ee*A,b=rt*Mt+Ht*tt+ee*L,_<0&&(_=-_),b<0&&(b=-b),fe=_*z+b*N,_=rt*V+Ht*C+ee*E,b=rt*ut+Ht*vt+ee*ft,_<0&&(_=-_),b<0&&(b=-b),de=_*S+b*O,Ai=T-fe-de,Ai>0)return}else Ce=!1,Ai=0,yc=!0;if(T=St*St+J*J+Z*Z,T>1e-5){if(T=1/j.sqrt(T),St*=T,J*=T,Z*=T,T=St*x+J*y+Z*d,Dt=T>0,Dt||(T=-T),_=St*M+J*F+Z*A,b=St*Mt+J*tt+Z*L,_<0&&(_=-_),b<0&&(b=-b),fe=_*z+b*N,_=St*V+J*C+Z*E,b=St*$+J*H+Z*wt,_<0&&(_=-_),b<0&&(b=-b),de=_*S+b*U,Di=T-fe-de,Di>0)return}else Dt=!1,Di=0,vc=!0;if(T=dt*dt+xt*xt+ge*ge,T>1e-5){if(T=1/j.sqrt(T),dt*=T,xt*=T,ge*=T,T=dt*x+xt*y+ge*d,ci=T>0,ci||(T=-T),_=dt*M+xt*F+ge*A,b=dt*D+xt*P+ge*ot,_<0&&(_=-_),b<0&&(b=-b),fe=_*z+b*k,_=dt*$+xt*H+ge*wt,b=dt*ut+xt*vt+ge*ft,_<0&&(_=-_),b<0&&(b=-b),de=_*U+b*O,Oi=T-fe-de,Oi>0)return}else ci=!1,Oi=0,xc=!0;if(T=te*te+Se*Se+ae*ae,T>1e-5){if(T=1/j.sqrt(T),te*=T,Se*=T,ae*=T,T=te*x+Se*y+ae*d,fi=T>0,fi||(T=-T),_=te*M+Se*F+ae*A,b=te*D+Se*P+ae*ot,_<0&&(_=-_),b<0&&(b=-b),fe=_*z+b*k,_=te*V+Se*C+ae*E,b=te*ut+Se*vt+ae*ft,_<0&&(_=-_),b<0&&(b=-b),de=_*S+b*O,Fi=T-fe-de,Fi>0)return}else fi=!1,Fi=0,gc=!0;if(T=li*li+hi*hi+ui*ui,T>1e-5){if(T=1/j.sqrt(T),li*=T,hi*=T,ui*=T,T=li*x+hi*y+ui*d,di=T>0,di||(T=-T),_=li*M+hi*F+ui*A,b=li*D+hi*P+ui*ot,_<0&&(_=-_),b<0&&(b=-b),fe=_*z+b*k,_=li*V+hi*C+ui*E,b=li*$+hi*H+ui*wt,_<0&&(_=-_),b<0&&(b=-b),de=_*S+b*U,Ki=T-fe-de,Ki>0)return}else di=!1,Ki=0,wc=!0;var mi=pi,Me=pi,me=0,Je=ys;si>Me&&(mi=si,Me=si,me=1,Je=le),ni>Me&&(mi=ni,Me=ni,me=2,Je=he),be>Me&&(mi=be,Me=be,me=3,Je=ue),Ee>Me&&(mi=Ee,Me=Ee,me=4,Je=Pt),Yi>Me&&(mi=Yi,Me=Yi,me=5,Je=Re),Ci-.01>Me&&!Ps&&(mi=Ci,Me=Ci-.01,me=6,Je=Ie),bi-.01>Me&&!Ls&&(mi=bi,Me=bi-.01,me=7,Je=Ve),Ei-.01>Me&&!nt&&(mi=Ei,Me=Ei-.01,me=8,Je=At),Ti-.01>Me&&!mc&&(mi=Ti,Me=Ti-.01,me=9,Je=Ot),Ai-.01>Me&&!yc&&(mi=Ai,Me=Ai-.01,me=10,Je=Ce),Di-.01>Me&&!vc&&(mi=Di,Me=Di-.01,me=11,Je=Dt),Oi-.01>Me&&!xc&&(mi=Oi,Me=Oi-.01,me=12,Je=ci),Fi-.01>Me&&!gc&&(mi=Fi,Me=Fi-.01,me=13,Je=fi),Ki-.01>Me&&!wc&&(mi=Ki,me=14,Je=di);var zt=0,kt=0,Nt=0,Ue=0,je=0,Be=0,We=0,qe=0,Ge=0,Te=0,Ae=0,De=0,js=0,Bs=0,$s=0,Hs=0,Ws=0,qs=0,Rr=!1;if(me==0?(Je?(Te=f+q,Ae=p+I,De=g+G,zt=M,kt=F,Nt=A):(Te=f-q,Ae=p-I,De=g-G,zt=-M,kt=-F,Nt=-A),js=W,Bs=Q,$s=yt,Ue=-D,je=-P,Be=-ot,Hs=Tt,Ws=Lt,qs=K,We=-Mt,qe=-tt,Ge=-L):me==1?(Je?(Te=f+W,Ae=p+Q,De=g+yt,zt=D,kt=P,Nt=ot):(Te=f-W,Ae=p-Q,De=g-yt,zt=-D,kt=-P,Nt=-ot),js=q,Bs=I,$s=G,Ue=-M,je=-F,Be=-A,Hs=Tt,Ws=Lt,qs=K,We=-Mt,qe=-tt,Ge=-L):me==2?(Je?(Te=f+Tt,Ae=p+Lt,De=g+K,zt=Mt,kt=tt,Nt=L):(Te=f-Tt,Ae=p-Lt,De=g-K,zt=-Mt,kt=-tt,Nt=-L),js=q,Bs=I,$s=G,Ue=-M,je=-F,Be=-A,Hs=W,Ws=Q,qs=yt,We=-D,qe=-P,Ge=-ot):me==3?(Rr=!0,Je?(Te=v-Qt,Ae=m-ce,De=w-gt,zt=-V,kt=-C,Nt=-E):(Te=v+Qt,Ae=m+ce,De=w+gt,zt=V,kt=C,Nt=E),js=X,Bs=et,$s=st,Ue=-$,je=-H,Be=-wt,Hs=_e,Ws=Wt,qs=jt,We=-ut,qe=-vt,Ge=-ft):me==4?(Rr=!0,Je?(Te=v-X,Ae=m-et,De=w-st,zt=-$,kt=-H,Nt=-wt):(Te=v+X,Ae=m+et,De=w+st,zt=$,kt=H,Nt=wt),js=Qt,Bs=ce,$s=gt,Ue=-V,je=-C,Be=-E,Hs=_e,Ws=Wt,qs=jt,We=-ut,qe=-vt,Ge=-ft):me==5?(Rr=!0,Je?(Te=v-_e,Ae=m-Wt,De=w-jt,zt=-ut,kt=-vt,Nt=-ft):(Te=v+_e,Ae=m+Wt,De=w+jt,zt=ut,kt=vt,Nt=ft),js=Qt,Bs=ce,$s=gt,Ue=-V,je=-C,Be=-E,Hs=X,Ws=et,qs=st,We=-$,qe=-H,Ge=-wt):me==6?(zt=Xt,kt=Yt,Nt=Le,Ue=M,je=F,Be=A,We=V,qe=C,Ge=E):me==7?(zt=at,kt=lt,Nt=ht,Ue=M,je=F,Be=A,We=$,qe=H,Ge=wt):me==8?(zt=Ne,kt=re,Nt=oe,Ue=M,je=F,Be=A,We=ut,qe=vt,Ge=ft):me==9?(zt=bt,kt=pt,Nt=mt,Ue=D,je=P,Be=ot,We=V,qe=C,Ge=E):me==10?(zt=rt,kt=Ht,Nt=ee,Ue=D,je=P,Be=ot,We=$,qe=H,Ge=wt):me==11?(zt=St,kt=J,Nt=Z,Ue=D,je=P,Be=ot,We=ut,qe=vt,Ge=ft):me==12?(zt=dt,kt=xt,Nt=ge,Ue=Mt,je=tt,Be=L,We=V,qe=C,Ge=E):me==13?(zt=te,kt=Se,Nt=ae,Ue=Mt,je=tt,Be=L,We=$,qe=H,Ge=wt):me==14&&(zt=li,kt=hi,Nt=ui,Ue=Mt,je=tt,Be=L,We=ut,qe=vt,Ge=ft),me>5){Je||(zt=-zt,kt=-kt,Nt=-Nt);var Bt,ye,Ft,Rt,Ut,Is,Vs,Cs,Gs,Qs,Xs;Is=o[0],Vs=o[1],Cs=o[2],ye=zt*Is+kt*Vs+Nt*Cs,Ft=o[3],Rt=o[4],Ut=o[5],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt>ye&&(ye=Bt,Is=Ft,Vs=Rt,Cs=Ut),Ft=o[6],Rt=o[7],Ut=o[8],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt>ye&&(ye=Bt,Is=Ft,Vs=Rt,Cs=Ut),Ft=o[9],Rt=o[10],Ut=o[11],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt>ye&&(ye=Bt,Is=Ft,Vs=Rt,Cs=Ut),Ft=o[12],Rt=o[13],Ut=o[14],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt>ye&&(ye=Bt,Is=Ft,Vs=Rt,Cs=Ut),Ft=o[15],Rt=o[16],Ut=o[17],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt>ye&&(ye=Bt,Is=Ft,Vs=Rt,Cs=Ut),Ft=o[18],Rt=o[19],Ut=o[20],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt>ye&&(ye=Bt,Is=Ft,Vs=Rt,Cs=Ut),Ft=o[21],Rt=o[22],Ut=o[23],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt>ye&&(ye=Bt,Is=Ft,Vs=Rt,Cs=Ut),Gs=a[0],Qs=a[1],Xs=a[2],ye=zt*Gs+kt*Qs+Nt*Xs,Ft=a[3],Rt=a[4],Ut=a[5],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt<ye&&(ye=Bt,Gs=Ft,Qs=Rt,Xs=Ut),Ft=a[6],Rt=a[7],Ut=a[8],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt<ye&&(ye=Bt,Gs=Ft,Qs=Rt,Xs=Ut),Ft=a[9],Rt=a[10],Ut=a[11],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt<ye&&(ye=Bt,Gs=Ft,Qs=Rt,Xs=Ut),Ft=a[12],Rt=a[13],Ut=a[14],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt<ye&&(ye=Bt,Gs=Ft,Qs=Rt,Xs=Ut),Ft=a[15],Rt=a[16],Ut=a[17],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt<ye&&(ye=Bt,Gs=Ft,Qs=Rt,Xs=Ut),Ft=a[18],Rt=a[19],Ut=a[20],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt<ye&&(ye=Bt,Gs=Ft,Qs=Rt,Xs=Ut),Ft=a[21],Rt=a[22],Ut=a[23],Bt=zt*Ft+kt*Rt+Nt*Ut,Bt<ye&&(ye=Bt,Gs=Ft,Qs=Rt,Xs=Ut),Ft=Gs-Is,Rt=Qs-Vs,Ut=Xs-Cs,_=Ue*We+je*qe+Be*Ge;var Zt=(Ft*(Ue-We*_)+Rt*(je-qe*_)+Ut*(Be-Ge*_))/(1-_*_);s.addPoint(Is+Ue*Zt+zt*mi*.5,Vs+je*Zt+kt*mi*.5,Cs+Be*Zt+Nt*mi*.5,zt,kt,Nt,mi,!1);return}var Ri,Ui,ji,Bi,$i,Hi,Ji,Zi,ts,es,is,ss,ve=1,_t=0,$e=0;Rr?(_t=M*zt+F*kt+A*Nt,_t<ve&&(ve=_t,$e=0),-_t<ve&&(ve=-_t,$e=1),_t=D*zt+P*kt+ot*Nt,_t<ve&&(ve=_t,$e=2),-_t<ve&&(ve=-_t,$e=3),_t=Mt*zt+tt*kt+L*Nt,_t<ve&&(ve=_t,$e=4),-_t<ve&&(ve=-_t,$e=5),$e==0?(Ri=o[0],Ui=o[1],ji=o[2],Bi=o[6],$i=o[7],Hi=o[8],Ji=o[9],Zi=o[10],ts=o[11],es=o[3],is=o[4],ss=o[5]):$e==1?(Ri=o[15],Ui=o[16],ji=o[17],Bi=o[21],$i=o[22],Hi=o[23],Ji=o[18],Zi=o[19],ts=o[20],es=o[12],is=o[13],ss=o[14]):$e==2?(Ri=o[12],Ui=o[13],ji=o[14],Bi=o[0],$i=o[1],Hi=o[2],Ji=o[3],Zi=o[4],ts=o[5],es=o[15],is=o[16],ss=o[17]):$e==3?(Ri=o[21],Ui=o[22],ji=o[23],Bi=o[9],$i=o[10],Hi=o[11],Ji=o[6],Zi=o[7],ts=o[8],es=o[18],is=o[19],ss=o[20]):$e==4?(Ri=o[12],Ui=o[13],ji=o[14],Bi=o[18],$i=o[19],Hi=o[20],Ji=o[6],Zi=o[7],ts=o[8],es=o[0],is=o[1],ss=o[2]):$e==5&&(Ri=o[3],Ui=o[4],ji=o[5],Bi=a[9],$i=a[10],Hi=a[11],Ji=o[21],Zi=o[22],ts=o[23],es=o[15],is=o[16],ss=o[17])):(_t=V*zt+C*kt+E*Nt,_t<ve&&(ve=_t,$e=0),-_t<ve&&(ve=-_t,$e=1),_t=$*zt+H*kt+wt*Nt,_t<ve&&(ve=_t,$e=2),-_t<ve&&(ve=-_t,$e=3),_t=ut*zt+vt*kt+ft*Nt,_t<ve&&(ve=_t,$e=4),-_t<ve&&(ve=-_t,$e=5),$e==0?(Ri=a[0],Ui=a[1],ji=a[2],Bi=a[6],$i=a[7],Hi=a[8],Ji=a[9],Zi=a[10],ts=a[11],es=a[3],is=a[4],ss=a[5]):$e==1?(Ri=a[15],Ui=a[16],ji=a[17],Bi=a[21],$i=a[22],Hi=a[23],Ji=a[18],Zi=a[19],ts=a[20],es=a[12],is=a[13],ss=a[14]):$e==2?(Ri=a[12],Ui=a[13],ji=a[14],Bi=a[0],$i=a[1],Hi=a[2],Ji=a[3],Zi=a[4],ts=a[5],es=a[15],is=a[16],ss=a[17]):$e==3?(Ri=a[21],Ui=a[22],ji=a[23],Bi=a[9],$i=a[10],Hi=a[11],Ji=a[6],Zi=a[7],ts=a[8],es=a[18],is=a[19],ss=a[20]):$e==4?(Ri=a[12],Ui=a[13],ji=a[14],Bi=a[18],$i=a[19],Hi=a[20],Ji=a[6],Zi=a[7],ts=a[8],es=a[0],is=a[1],ss=a[2]):$e==5&&(Ri=a[3],Ui=a[4],ji=a[5],Bi=a[9],$i=a[10],Hi=a[11],Ji=a[21],Zi=a[22],ts=a[23],es=a[15],is=a[16],ss=a[17]));var yi,qt,B,It,Vt,Ct,we,ze,ke;this.clipVertices1[0]=Ri,this.clipVertices1[1]=Ui,this.clipVertices1[2]=ji,this.clipVertices1[3]=Bi,this.clipVertices1[4]=$i,this.clipVertices1[5]=Hi,this.clipVertices1[6]=Ji,this.clipVertices1[7]=Zi,this.clipVertices1[8]=ts,this.clipVertices1[9]=es,this.clipVertices1[10]=is,this.clipVertices1[11]=ss,qt=0,It=this.clipVertices1[9],Vt=this.clipVertices1[10],Ct=this.clipVertices1[11],_=(It-Te-js)*Ue+(Vt-Ae-Bs)*je+(Ct-De-$s)*Be;for(var ie=0;ie<4;ie++)B=ie*3,we=this.clipVertices1[B],ze=this.clipVertices1[B+1],ke=this.clipVertices1[B+2],b=(we-Te-js)*Ue+(ze-Ae-Bs)*je+(ke-De-$s)*Be,_>0?b>0?(B=qt*3,qt++,this.clipVertices2[B]=we,this.clipVertices2[B+1]=ze,this.clipVertices2[B+2]=ke):(B=qt*3,qt++,Zt=_/(_-b),this.clipVertices2[B]=It+(we-It)*Zt,this.clipVertices2[B+1]=Vt+(ze-Vt)*Zt,this.clipVertices2[B+2]=Ct+(ke-Ct)*Zt):b>0&&(B=qt*3,qt++,Zt=_/(_-b),this.clipVertices2[B]=It+(we-It)*Zt,this.clipVertices2[B+1]=Vt+(ze-Vt)*Zt,this.clipVertices2[B+2]=Ct+(ke-Ct)*Zt,B=qt*3,qt++,this.clipVertices2[B]=we,this.clipVertices2[B+1]=ze,this.clipVertices2[B+2]=ke),It=we,Vt=ze,Ct=ke,_=b;if(yi=qt,yi!=0){for(qt=0,B=(yi-1)*3,It=this.clipVertices2[B],Vt=this.clipVertices2[B+1],Ct=this.clipVertices2[B+2],_=(It-Te-Hs)*We+(Vt-Ae-Ws)*qe+(Ct-De-qs)*Ge,ie=0;ie<yi;ie++)B=ie*3,we=this.clipVertices2[B],ze=this.clipVertices2[B+1],ke=this.clipVertices2[B+2],b=(we-Te-Hs)*We+(ze-Ae-Ws)*qe+(ke-De-qs)*Ge,_>0?b>0?(B=qt*3,qt++,this.clipVertices1[B]=we,this.clipVertices1[B+1]=ze,this.clipVertices1[B+2]=ke):(B=qt*3,qt++,Zt=_/(_-b),this.clipVertices1[B]=It+(we-It)*Zt,this.clipVertices1[B+1]=Vt+(ze-Vt)*Zt,this.clipVertices1[B+2]=Ct+(ke-Ct)*Zt):b>0&&(B=qt*3,qt++,Zt=_/(_-b),this.clipVertices1[B]=It+(we-It)*Zt,this.clipVertices1[B+1]=Vt+(ze-Vt)*Zt,this.clipVertices1[B+2]=Ct+(ke-Ct)*Zt,B=qt*3,qt++,this.clipVertices1[B]=we,this.clipVertices1[B+1]=ze,this.clipVertices1[B+2]=ke),It=we,Vt=ze,Ct=ke,_=b;if(yi=qt,yi!=0){for(qt=0,B=(yi-1)*3,It=this.clipVertices1[B],Vt=this.clipVertices1[B+1],Ct=this.clipVertices1[B+2],_=(It-Te+js)*-Ue+(Vt-Ae+Bs)*-je+(Ct-De+$s)*-Be,ie=0;ie<yi;ie++)B=ie*3,we=this.clipVertices1[B],ze=this.clipVertices1[B+1],ke=this.clipVertices1[B+2],b=(we-Te+js)*-Ue+(ze-Ae+Bs)*-je+(ke-De+$s)*-Be,_>0?b>0?(B=qt*3,qt++,this.clipVertices2[B]=we,this.clipVertices2[B+1]=ze,this.clipVertices2[B+2]=ke):(B=qt*3,qt++,Zt=_/(_-b),this.clipVertices2[B]=It+(we-It)*Zt,this.clipVertices2[B+1]=Vt+(ze-Vt)*Zt,this.clipVertices2[B+2]=Ct+(ke-Ct)*Zt):b>0&&(B=qt*3,qt++,Zt=_/(_-b),this.clipVertices2[B]=It+(we-It)*Zt,this.clipVertices2[B+1]=Vt+(ze-Vt)*Zt,this.clipVertices2[B+2]=Ct+(ke-Ct)*Zt,B=qt*3,qt++,this.clipVertices2[B]=we,this.clipVertices2[B+1]=ze,this.clipVertices2[B+2]=ke),It=we,Vt=ze,Ct=ke,_=b;if(yi=qt,yi!=0){for(qt=0,B=(yi-1)*3,It=this.clipVertices2[B],Vt=this.clipVertices2[B+1],Ct=this.clipVertices2[B+2],_=(It-Te+Hs)*-We+(Vt-Ae+Ws)*-qe+(Ct-De+qs)*-Ge,ie=0;ie<yi;ie++)B=ie*3,we=this.clipVertices2[B],ze=this.clipVertices2[B+1],ke=this.clipVertices2[B+2],b=(we-Te+Hs)*-We+(ze-Ae+Ws)*-qe+(ke-De+qs)*-Ge,_>0?b>0?(B=qt*3,qt++,this.clipVertices1[B]=we,this.clipVertices1[B+1]=ze,this.clipVertices1[B+2]=ke):(B=qt*3,qt++,Zt=_/(_-b),this.clipVertices1[B]=It+(we-It)*Zt,this.clipVertices1[B+1]=Vt+(ze-Vt)*Zt,this.clipVertices1[B+2]=Ct+(ke-Ct)*Zt):b>0&&(B=qt*3,qt++,Zt=_/(_-b),this.clipVertices1[B]=It+(we-It)*Zt,this.clipVertices1[B+1]=Vt+(ze-Vt)*Zt,this.clipVertices1[B+2]=Ct+(ke-Ct)*Zt,B=qt*3,qt++,this.clipVertices1[B]=we,this.clipVertices1[B+1]=ze,this.clipVertices1[B+2]=ke),It=we,Vt=ze,Ct=ke,_=b;if(yi=qt,Rr){var zp=n;n=r,r=zp}if(yi!=0){var Ur=n!=t;if(yi>4){It=(Ri+Bi+Ji+es)*.25,Vt=(Ui+$i+Zi+is)*.25,Ct=(ji+Hi+ts+ss)*.25,Ue=Ri-It,je=Ui-Vt,Be=ji-Ct,We=Bi-It,qe=$i-Vt,Ge=Hi-Ct;var zl=0,zc=0,kl=0,kc=0,jr=-this.INF;for(ve=this.INF,ie=0;ie<yi;ie++)this.used[ie]=!1,B=ie*3,It=this.clipVertices1[B],Vt=this.clipVertices1[B+1],Ct=this.clipVertices1[B+2],_t=It*Ue+Vt*je+Ct*Be,_t<ve&&(ve=_t,zl=ie),_t>jr&&(jr=_t,kl=ie);for(this.used[zl]=!0,this.used[kl]=!0,jr=-this.INF,ve=this.INF,ie=0;ie<yi;ie++)this.used[ie]||(B=ie*3,It=this.clipVertices1[B],Vt=this.clipVertices1[B+1],Ct=this.clipVertices1[B+2],_t=It*We+Vt*qe+Ct*Ge,_t<ve&&(ve=_t,zc=ie),_t>jr&&(jr=_t,kc=ie));B=zl*3,It=this.clipVertices1[B],Vt=this.clipVertices1[B+1],Ct=this.clipVertices1[B+2],_t=(It-Te)*zt+(Vt-Ae)*kt+(Ct-De)*Nt,_t<0&&s.addPoint(It,Vt,Ct,zt,kt,Nt,_t,Ur),B=zc*3,It=this.clipVertices1[B],Vt=this.clipVertices1[B+1],Ct=this.clipVertices1[B+2],_t=(It-Te)*zt+(Vt-Ae)*kt+(Ct-De)*Nt,_t<0&&s.addPoint(It,Vt,Ct,zt,kt,Nt,_t,Ur),B=kl*3,It=this.clipVertices1[B],Vt=this.clipVertices1[B+1],Ct=this.clipVertices1[B+2],_t=(It-Te)*zt+(Vt-Ae)*kt+(Ct-De)*Nt,_t<0&&s.addPoint(It,Vt,Ct,zt,kt,Nt,_t,Ur),B=kc*3,It=this.clipVertices1[B],Vt=this.clipVertices1[B+1],Ct=this.clipVertices1[B+2],_t=(It-Te)*zt+(Vt-Ae)*kt+(Ct-De)*Nt,_t<0&&s.addPoint(It,Vt,Ct,zt,kt,Nt,_t,Ur)}else for(ie=0;ie<yi;ie++)B=ie*3,It=this.clipVertices1[B],Vt=this.clipVertices1[B+1],Ct=this.clipVertices1[B+2],_t=(It-Te)*zt+(Vt-Ae)*kt+(Ct-De)*Nt,_t<0&&s.addPoint(It,Vt,Ct,zt,kt,Nt,_t,Ur)}}}}}}});function Ya(t){_i.call(this),this.flip=t}Ya.prototype=Object.assign(Object.create(_i.prototype),{constructor:Ya,getSep:function(t,e,s,n,r){var o,a,l,h,u,c,f=new R,p,g,v,m,w,x,y,d=t.position.x,z=t.position.y,k=t.position.z,N=e.position.x,S=e.position.y,U=e.position.z,O=N-d,M=S-z,F=U-k;O*O+M*M+F*F==0&&(M=.001);var A=-O,D=-M,P=-F;this.supportPointB(t,-A,-D,-P,f);var ot=f.x,Mt=f.y,tt=f.z;this.supportPointC(e,A,D,P,f);var L=f.x,q=f.y,I=f.z,G=L-ot,W=q-Mt,Q=I-tt;if(G*A+W*D+Q*P<=0)return!1;if(A=W*F-Q*M,D=Q*O-G*F,P=G*M-W*O,A*A+D*D+P*P==0)return s.set(G-O,W-M,Q-F).normalize(),n.set((ot+L)*.5,(Mt+q)*.5,(tt+I)*.5),!0;this.supportPointB(t,-A,-D,-P,f);var yt=f.x,Tt=f.y,Lt=f.z;this.supportPointC(e,A,D,P,f);var K=f.x,V=f.y,C=f.z,E=K-yt,$=V-Tt,H=C-Lt;if(E*A+$*D+H*P<=0)return!1;o=G-O,a=W-M,l=Q-F,h=E-O,u=$-M,c=H-F,A=a*c-l*u,D=l*h-o*c,P=o*u-a*h,A*O+D*M+P*F>0&&(o=G,a=W,l=Q,G=E,W=$,Q=H,E=o,$=a,H=l,o=ot,a=Mt,l=tt,ot=yt,Mt=Tt,tt=Lt,yt=o,Tt=a,Lt=l,o=L,a=q,l=I,L=K,q=V,I=C,K=o,V=a,C=l,A=-A,D=-D,P=-P);for(var wt=0;;){if(++wt>100)return!1;this.supportPointB(t,-A,-D,-P,f);var ut=f.x,vt=f.y,ft=f.z;this.supportPointC(e,A,D,P,f);var Qt=f.x,ce=f.y,gt=f.z,X=Qt-ut,et=ce-vt,st=gt-ft;if(X*A+et*D+st*P<=0)return!1;if((W*st-Q*et)*O+(Q*X-G*st)*M+(G*et-W*X)*F<0){E=X,$=et,H=st,yt=ut,Tt=vt,Lt=ft,K=Qt,V=ce,C=gt,o=G-O,a=W-M,l=Q-F,h=X-O,u=et-M,c=st-F,A=a*c-l*u,D=l*h-o*c,P=o*u-a*h;continue}if((et*H-st*$)*O+(st*E-X*H)*M+(X*$-et*E)*F<0){G=X,W=et,Q=st,ot=ut,Mt=vt,tt=ft,L=Qt,q=ce,I=gt,o=X-O,a=et-M,l=st-F,h=E-O,u=$-M,c=H-F,A=a*c-l*u,D=l*h-o*c,P=o*u-a*h;continue}for(var _e=!1;;){if(o=E-G,a=$-W,l=H-Q,h=X-G,u=et-W,c=st-Q,A=a*c-l*u,D=l*h-o*c,P=o*u-a*h,p=1/j.sqrt(A*A+D*D+P*P),A*=p,D*=p,P*=p,A*G+D*W+P*Q>=0&&!_e){var Wt=(W*H-Q*$)*X+(Q*E-G*H)*et+(G*$-W*E)*st,jt=(et*H-st*$)*O+(st*E-X*H)*M+(X*$-et*E)*F,Xt=(M*Q-F*W)*X+(F*G-O*Q)*et+(O*W-M*G)*st,Yt=($*Q-H*W)*O+(H*G-E*Q)*M+(E*W-$*G)*F,Le=Wt+jt+Xt+Yt;Le<=0&&(Wt=0,jt=($*st-H*et)*A+(H*X-E*st)*D+(E*et-$*X)*P,Xt=(et*H-st*$)*A+(st*E-X*H)*D+(X*$-et*E)*P,Yt=(W*H-Q*$)*A+(Q*E-G*H)*D+(G*$-W*E)*P,Le=jt+Xt+Yt);var at=1/Le;g=(d*Wt+ot*jt+yt*Xt+ut*Yt)*at,v=(z*Wt+Mt*jt+Tt*Xt+vt*Yt)*at,m=(k*Wt+tt*jt+Lt*Xt+ft*Yt)*at,w=(N*Wt+L*jt+K*Xt+Qt*Yt)*at,x=(S*Wt+q*jt+V*Xt+ce*Yt)*at,y=(U*Wt+I*jt+C*Xt+gt*Yt)*at,_e=!0}this.supportPointB(t,-A,-D,-P,f);var lt=f.x,ht=f.y,Ne=f.z;this.supportPointC(e,A,D,P,f);var re=f.x,oe=f.y,bt=f.z,pt=re-lt,mt=oe-ht,rt=bt-Ne,Ht=-(pt*A+mt*D+rt*P);if((pt-X)*A+(mt-et)*D+(rt-st)*P<=.01||Ht>=0)return _e?(s.set(-A,-D,-P),n.set((g+w)*.5,(v+x)*.5,(m+y)*.5),r.x=Ht,!0):!1;(mt*Q-rt*W)*O+(rt*G-pt*Q)*M+(pt*W-mt*G)*F<0?(mt*H-rt*$)*O+(rt*E-pt*H)*M+(pt*$-mt*E)*F<0?(G=pt,W=mt,Q=rt,ot=lt,Mt=ht,tt=Ne,L=re,q=oe,I=bt):(X=pt,et=mt,st=rt,ut=lt,vt=ht,ft=Ne,Qt=re,ce=oe,gt=bt):(mt*st-rt*et)*O+(rt*X-pt*st)*M+(pt*et-mt*X)*F<0?(E=pt,$=mt,H=rt,yt=lt,Tt=ht,Lt=Ne,K=re,V=oe,C=bt):(G=pt,W=mt,Q=rt,ot=lt,Mt=ht,tt=Ne,L=re,q=oe,I=bt)}}},supportPointB:function(t,e,s,n,r){var o=t.rotation.elements,a=o[0]*e+o[3]*s+o[6]*n,l=o[1]*e+o[4]*s+o[7]*n,h=o[2]*e+o[5]*s+o[8]*n,u=t.halfWidth,c=t.halfHeight,f=t.halfDepth,p,g,v;a<0?p=-u:p=u,l<0?g=-c:g=c,h<0?v=-f:v=f,a=o[0]*p+o[1]*g+o[2]*v+t.position.x,l=o[3]*p+o[4]*g+o[5]*v+t.position.y,h=o[6]*p+o[7]*g+o[8]*v+t.position.z,r.set(a,l,h)},supportPointC:function(t,e,s,n,r){var o=t.rotation.elements,a=o[0]*e+o[3]*s+o[6]*n,l=o[1]*e+o[4]*s+o[7]*n,h=o[2]*e+o[5]*s+o[8]*n,u=a,c=h,f=u*u+c*c,p=t.radius,g=t.halfHeight,v,m,w;f==0?l<0?(v=p,m=-g,w=0):(v=p,m=g,w=0):(f=t.radius/j.sqrt(f),l<0?(v=u*f,m=-g,w=c*f):(v=u*f,m=g,w=c*f)),a=o[0]*v+o[1]*m+o[2]*w+t.position.x,l=o[3]*v+o[4]*m+o[5]*w+t.position.y,h=o[6]*v+o[7]*m+o[8]*w+t.position.z,r.set(a,l,h)},detectCollision:function(t,e,s){var n,r;this.flip?(n=e,r=t):(n=t,r=e);var o=new R,a=new R,l=new R;if(this.getSep(n,r,o,a,l)){var h=n.position.x,u=n.position.y,c=n.position.z,f=r.position.x,p=r.position.y,g=r.position.z,v=n.halfWidth,m=n.halfHeight,w=n.halfDepth,x=r.halfHeight,y=r.radius,d=n.dimentions,z=d[0],k=d[1],N=d[2],S=d[3],U=d[4],O=d[5],M=d[6],F=d[7],A=d[8],D=d[9],P=d[10],ot=d[11],Mt=d[12],tt=d[13],L=d[14],q=d[15],I=d[16],G=d[17],W=r.normalDirection.x,Q=r.normalDirection.y,yt=r.normalDirection.z,Tt=r.halfDirection.x,Lt=r.halfDirection.y,K=r.halfDirection.z,V=o.x,C=o.y,E=o.z,$=V*z+C*k+E*N,H=V*S+C*U+E*O,wt=V*M+C*F+E*A,ut=V*W+C*Q+E*yt,vt=$>0,ft=H>0,Qt=wt>0,ce=ut>0;vt||($=-$),ft||(H=-H),Qt||(wt=-wt),ce||(ut=-ut);var gt=0;ut>.999?$>.999?$>ut?gt=1:gt=4:H>.999?H>ut?gt=2:gt=4:wt>.999&&wt>ut?gt=3:gt=4:$>.999?gt=1:H>.999?gt=2:wt>.999&&(gt=3);var X,et,st,_e,Wt,jt,Xt,Yt,Le,at,lt,ht,Ne,re,oe,bt,pt,mt,rt,Ht,ee,St,J,Z,dt,xt,ge,te,Se,ae,li,hi,ui,ys,le,he,ue,Pt,Re,Ie,Ve,At,Ot,Ce,Dt,ci,fi,di,pi,si,ni,be,Ee;if(gt==0)s.addPoint(a.x,a.y,a.z,V,C,E,l.x,this.flip);else if(gt==4){ce?(_e=f-Tt,Wt=p-Lt,jt=g-K,V=-W,C=-Q,E=-yt):(_e=f+Tt,Wt=p+Lt,jt=g+K,V=W,C=Q,E=yt);var Yi,Ci,bi,Ei,Ti,Ai,Di,Oi,Fi,Ki,Ps,Ls;Ht=1,gt=0,Ot=z*V+k*C+N*E,Ot<Ht&&(Ht=Ot,gt=0),-Ot<Ht&&(Ht=-Ot,gt=1),Ot=S*V+U*C+O*E,Ot<Ht&&(Ht=Ot,gt=2),-Ot<Ht&&(Ht=-Ot,gt=3),Ot=M*V+F*C+A*E,Ot<Ht&&(Ht=Ot,gt=4),-Ot<Ht&&(Ht=-Ot,gt=5);var nt=n.elements;switch(gt){case 0:Yi=nt[0],Ci=nt[1],bi=nt[2],Ei=nt[6],Ti=nt[7],Ai=nt[8],Di=nt[9],Oi=nt[10],Fi=nt[11],Ki=nt[3],Ps=nt[4],Ls=nt[5];break;case 1:Yi=nt[15],Ci=nt[16],bi=nt[17],Ei=nt[21],Ti=nt[22],Ai=nt[23],Di=nt[18],Oi=nt[19],Fi=nt[20],Ki=nt[12],Ps=nt[13],Ls=nt[14];break;case 2:Yi=nt[12],Ci=nt[13],bi=nt[14],Ei=nt[0],Ti=nt[1],Ai=nt[2],Di=nt[3],Oi=nt[4],Fi=nt[5],Ki=nt[15],Ps=nt[16],Ls=nt[17];break;case 3:Yi=nt[21],Ci=nt[22],bi=nt[23],Ei=nt[9],Ti=nt[10],Ai=nt[11],Di=nt[6],Oi=nt[7],Fi=nt[8],Ki=nt[18],Ps=nt[19],Ls=nt[20];break;case 4:Yi=nt[12],Ci=nt[13],bi=nt[14],Ei=nt[18],Ti=nt[19],Ai=nt[20],Di=nt[6],Oi=nt[7],Fi=nt[8],Ki=nt[0],Ps=nt[1],Ls=nt[2];break;case 5:Yi=nt[3],Ci=nt[4],bi=nt[5],Ei=nt[9],Ti=nt[10],Ai=nt[11],Di=nt[21],Oi=nt[22],Fi=nt[23],Ki=nt[15],Ps=nt[16],Ls=nt[17];break}rt=V*(Yi-_e)+C*(Ci-Wt)+E*(bi-jt),rt<=0&&s.addPoint(Yi,Ci,bi,-V,-C,-E,rt,this.flip),rt=V*(Ei-_e)+C*(Ti-Wt)+E*(Ai-jt),rt<=0&&s.addPoint(Ei,Ti,Ai,-V,-C,-E,rt,this.flip),rt=V*(Di-_e)+C*(Oi-Wt)+E*(Fi-jt),rt<=0&&s.addPoint(Di,Oi,Fi,-V,-C,-E,rt,this.flip),rt=V*(Ki-_e)+C*(Ps-Wt)+E*(Ls-jt),rt<=0&&s.addPoint(Ki,Ps,Ls,-V,-C,-E,rt,this.flip)}else{switch(gt){case 1:vt?(X=h+D,et=u+P,st=c+ot,V=z,C=k,E=N):(X=h-D,et=u-P,st=c-ot,V=-z,C=-k,E=-N),ci=S,fi=U,di=O,be=m,pi=M,si=F,ni=A,Ee=w;break;case 2:ft?(X=h+Mt,et=u+tt,st=c+L,V=S,C=U,E=O):(X=h-Mt,et=u-tt,st=c-L,V=-S,C=-U,E=-O),ci=z,fi=k,di=N,be=v,pi=M,si=F,ni=A,Ee=w;break;case 3:Qt?(X=h+q,et=u+I,st=c+G,V=M,C=F,E=A):(X=h-q,et=u-I,st=c-G,V=-M,C=-F,E=-A),ci=z,fi=k,di=N,be=v,pi=S,si=U,ni=O,Ee=m;break}if(Ht=V*W+C*Q+E*yt,Ht<0?ee=x:ee=-x,_e=f+ee*W,Wt=p+ee*Q,jt=g+ee*yt,ut>=.999999?(St=-C,J=E,Z=V):(St=V,J=C,Z=E),ee=St*W+J*Q+Z*yt,xt=ee*W-St,ge=ee*Q-J,te=ee*yt-Z,ee=j.sqrt(xt*xt+ge*ge+te*te),ee==0)return;if(ee=y/ee,xt*=ee,ge*=ee,te*=ee,St=_e+xt,J=Wt+ge,Z=jt+te,Ht<-.96||Ht>.96)Xt=W*W*1.5-.5,Yt=W*Q*1.5-yt*.866025403,Le=W*yt*1.5+Q*.866025403,at=Q*W*1.5+yt*.866025403,lt=Q*Q*1.5-.5,ht=Q*yt*1.5-W*.866025403,Ne=yt*W*1.5-Q*.866025403,re=yt*Q*1.5+W*.866025403,oe=yt*yt*1.5-.5,bt=St,pt=J,mt=Z,rt=V*(bt-X)+C*(pt-et)+E*(mt-st),St=bt-rt*V-X,J=pt-rt*C-et,Z=mt-rt*E-st,Pt=ci*St+fi*J+di*Z,At=pi*St+si*J+ni*Z,Pt<-be?Pt=-be:Pt>be&&(Pt=be),At<-Ee?At=-Ee:At>Ee&&(At=Ee),St=Pt*ci+At*pi,J=Pt*fi+At*si,Z=Pt*di+At*ni,bt=X+St,pt=et+J,mt=st+Z,s.addPoint(bt,pt,mt,V,C,E,rt,this.flip),bt=xt*Xt+ge*Yt+te*Le,pt=xt*at+ge*lt+te*ht,mt=xt*Ne+ge*re+te*oe,bt=(xt=bt)+_e,pt=(ge=pt)+Wt,mt=(te=mt)+jt,rt=V*(bt-X)+C*(pt-et)+E*(mt-st),rt<=0&&(St=bt-rt*V-X,J=pt-rt*C-et,Z=mt-rt*E-st,Pt=ci*St+fi*J+di*Z,At=pi*St+si*J+ni*Z,Pt<-be?Pt=-be:Pt>be&&(Pt=be),At<-Ee?At=-Ee:At>Ee&&(At=Ee),St=Pt*ci+At*pi,J=Pt*fi+At*si,Z=Pt*di+At*ni,bt=X+St,pt=et+J,mt=st+Z,s.addPoint(bt,pt,mt,V,C,E,rt,this.flip)),bt=xt*Xt+ge*Yt+te*Le,pt=xt*at+ge*lt+te*ht,mt=xt*Ne+ge*re+te*oe,bt=(xt=bt)+_e,pt=(ge=pt)+Wt,mt=(te=mt)+jt,rt=V*(bt-X)+C*(pt-et)+E*(mt-st),rt<=0&&(St=bt-rt*V-X,J=pt-rt*C-et,Z=mt-rt*E-st,Pt=ci*St+fi*J+di*Z,At=pi*St+si*J+ni*Z,Pt<-be?Pt=-be:Pt>be&&(Pt=be),At<-Ee?At=-Ee:At>Ee&&(At=Ee),St=Pt*ci+At*pi,J=Pt*fi+At*si,Z=Pt*di+At*ni,bt=X+St,pt=et+J,mt=st+Z,s.addPoint(bt,pt,mt,V,C,E,rt,this.flip));else{if(le=St,he=J,ue=Z,Pt=V*(le-X)+C*(he-et)+E*(ue-st),le-=Pt*V,he-=Pt*C,ue-=Pt*E,Ht>0?(Re=St+Tt*2,Ie=J+Lt*2,Ve=Z+K*2):(Re=St-Tt*2,Ie=J-Lt*2,Ve=Z-K*2),At=V*(Re-X)+C*(Ie-et)+E*(Ve-st),Re-=At*V,Ie-=At*C,Ve-=At*E,Se=le-X,ae=he-et,li=ue-st,hi=Re-X,ui=Ie-et,ys=Ve-st,St=Re-le,J=Ie-he,Z=Ve-ue,dt=At-Pt,$=Se*ci+ae*fi+li*di,H=hi*ci+ui*fi+ys*di,Ot=$-be,Ce=H-be,Ot>0){if(Ce>0)return;Dt=Ot/(Ot-Ce),le=le+St*Dt,he=he+J*Dt,ue=ue+Z*Dt,Pt=Pt+dt*Dt,Se=le-X,ae=he-et,li=ue-st,$=Se*ci+ae*fi+li*di,St=Re-le,J=Ie-he,Z=Ve-ue,dt=At-Pt}else Ce>0&&(Dt=Ot/(Ot-Ce),Re=le+St*Dt,Ie=he+J*Dt,Ve=ue+Z*Dt,At=Pt+dt*Dt,hi=Re-X,ui=Ie-et,ys=Ve-st,H=hi*ci+ui*fi+ys*di,St=Re-le,J=Ie-he,Z=Ve-ue,dt=At-Pt);if(Ot=$+be,Ce=H+be,Ot<0){if(Ce<0)return;Dt=Ot/(Ot-Ce),le=le+St*Dt,he=he+J*Dt,ue=ue+Z*Dt,Pt=Pt+dt*Dt,Se=le-X,ae=he-et,li=ue-st,St=Re-le,J=Ie-he,Z=Ve-ue,dt=At-Pt}else Ce<0&&(Dt=Ot/(Ot-Ce),Re=le+St*Dt,Ie=he+J*Dt,Ve=ue+Z*Dt,At=Pt+dt*Dt,hi=Re-X,ui=Ie-et,ys=Ve-st,St=Re-le,J=Ie-he,Z=Ve-ue,dt=At-Pt);if($=Se*pi+ae*si+li*ni,H=hi*pi+ui*si+ys*ni,Ot=$-Ee,Ce=H-Ee,Ot>0){if(Ce>0)return;Dt=Ot/(Ot-Ce),le=le+St*Dt,he=he+J*Dt,ue=ue+Z*Dt,Pt=Pt+dt*Dt,Se=le-X,ae=he-et,li=ue-st,$=Se*pi+ae*si+li*ni,St=Re-le,J=Ie-he,Z=Ve-ue,dt=At-Pt}else Ce>0&&(Dt=Ot/(Ot-Ce),Re=le+St*Dt,Ie=he+J*Dt,Ve=ue+Z*Dt,At=Pt+dt*Dt,hi=Re-X,ui=Ie-et,ys=Ve-st,H=hi*pi+ui*si+ys*ni,St=Re-le,J=Ie-he,Z=Ve-ue,dt=At-Pt);if(Ot=$+Ee,Ce=H+Ee,Ot<0){if(Ce<0)return;Dt=Ot/(Ot-Ce),le=le+St*Dt,he=he+J*Dt,ue=ue+Z*Dt,Pt=Pt+dt*Dt}else Ce<0&&(Dt=Ot/(Ot-Ce),Re=le+St*Dt,Ie=he+J*Dt,Ve=ue+Z*Dt,At=Pt+dt*Dt);Pt<0&&s.addPoint(le,he,ue,V,C,E,Pt,this.flip),At<0&&s.addPoint(Re,Ie,Ve,V,C,E,At,this.flip)}}}}});function du(){_i.call(this)}du.prototype=Object.assign(Object.create(_i.prototype),{constructor:du,getSep:function(t,e,s,n,r){var o,a,l,h,u,c,f=new R,p,g,v,m,w,x,y,d=t.position.x,z=t.position.y,k=t.position.z,N=e.position.x,S=e.position.y,U=e.position.z,O=N-d,M=S-z,F=U-k;O*O+M*M+F*F==0&&(M=.001);var A=-O,D=-M,P=-F;this.supportPoint(t,-A,-D,-P,f);var ot=f.x,Mt=f.y,tt=f.z;this.supportPoint(e,A,D,P,f);var L=f.x,q=f.y,I=f.z,G=L-ot,W=q-Mt,Q=I-tt;if(G*A+W*D+Q*P<=0)return!1;if(A=W*F-Q*M,D=Q*O-G*F,P=G*M-W*O,A*A+D*D+P*P==0)return s.set(G-O,W-M,Q-F).normalize(),n.set((ot+L)*.5,(Mt+q)*.5,(tt+I)*.5),!0;this.supportPoint(t,-A,-D,-P,f);var yt=f.x,Tt=f.y,Lt=f.z;this.supportPoint(e,A,D,P,f);var K=f.x,V=f.y,C=f.z,E=K-yt,$=V-Tt,H=C-Lt;if(E*A+$*D+H*P<=0)return!1;o=G-O,a=W-M,l=Q-F,h=E-O,u=$-M,c=H-F,A=a*c-l*u,D=l*h-o*c,P=o*u-a*h,A*O+D*M+P*F>0&&(o=G,a=W,l=Q,G=E,W=$,Q=H,E=o,$=a,H=l,o=ot,a=Mt,l=tt,ot=yt,Mt=Tt,tt=Lt,yt=o,Tt=a,Lt=l,o=L,a=q,l=I,L=K,q=V,I=C,K=o,V=a,C=l,A=-A,D=-D,P=-P);for(var wt=0;;){if(++wt>100)return!1;this.supportPoint(t,-A,-D,-P,f);var ut=f.x,vt=f.y,ft=f.z;this.supportPoint(e,A,D,P,f);var Qt=f.x,ce=f.y,gt=f.z,X=Qt-ut,et=ce-vt,st=gt-ft;if(X*A+et*D+st*P<=0)return!1;if((W*st-Q*et)*O+(Q*X-G*st)*M+(G*et-W*X)*F<0){E=X,$=et,H=st,yt=ut,Tt=vt,Lt=ft,K=Qt,V=ce,C=gt,o=G-O,a=W-M,l=Q-F,h=X-O,u=et-M,c=st-F,A=a*c-l*u,D=l*h-o*c,P=o*u-a*h;continue}if((et*H-st*$)*O+(st*E-X*H)*M+(X*$-et*E)*F<0){G=X,W=et,Q=st,ot=ut,Mt=vt,tt=ft,L=Qt,q=ce,I=gt,o=X-O,a=et-M,l=st-F,h=E-O,u=$-M,c=H-F,A=a*c-l*u,D=l*h-o*c,P=o*u-a*h;continue}for(var _e=!1;;){if(o=E-G,a=$-W,l=H-Q,h=X-G,u=et-W,c=st-Q,A=a*c-l*u,D=l*h-o*c,P=o*u-a*h,p=1/j.sqrt(A*A+D*D+P*P),A*=p,D*=p,P*=p,A*G+D*W+P*Q>=0&&!_e){var Wt=(W*H-Q*$)*X+(Q*E-G*H)*et+(G*$-W*E)*st,jt=(et*H-st*$)*O+(st*E-X*H)*M+(X*$-et*E)*F,Xt=(M*Q-F*W)*X+(F*G-O*Q)*et+(O*W-M*G)*st,Yt=($*Q-H*W)*O+(H*G-E*Q)*M+(E*W-$*G)*F,Le=Wt+jt+Xt+Yt;Le<=0&&(Wt=0,jt=($*st-H*et)*A+(H*X-E*st)*D+(E*et-$*X)*P,Xt=(et*H-st*$)*A+(st*E-X*H)*D+(X*$-et*E)*P,Yt=(W*H-Q*$)*A+(Q*E-G*H)*D+(G*$-W*E)*P,Le=jt+Xt+Yt);var at=1/Le;g=(d*Wt+ot*jt+yt*Xt+ut*Yt)*at,v=(z*Wt+Mt*jt+Tt*Xt+vt*Yt)*at,m=(k*Wt+tt*jt+Lt*Xt+ft*Yt)*at,w=(N*Wt+L*jt+K*Xt+Qt*Yt)*at,x=(S*Wt+q*jt+V*Xt+ce*Yt)*at,y=(U*Wt+I*jt+C*Xt+gt*Yt)*at,_e=!0}this.supportPoint(t,-A,-D,-P,f);var lt=f.x,ht=f.y,Ne=f.z;this.supportPoint(e,A,D,P,f);var re=f.x,oe=f.y,bt=f.z,pt=re-lt,mt=oe-ht,rt=bt-Ne,Ht=-(pt*A+mt*D+rt*P);if((pt-X)*A+(mt-et)*D+(rt-st)*P<=.01||Ht>=0)return _e?(s.set(-A,-D,-P),n.set((g+w)*.5,(v+x)*.5,(m+y)*.5),r.x=Ht,!0):!1;(mt*Q-rt*W)*O+(rt*G-pt*Q)*M+(pt*W-mt*G)*F<0?(mt*H-rt*$)*O+(rt*E-pt*H)*M+(pt*$-mt*E)*F<0?(G=pt,W=mt,Q=rt,ot=lt,Mt=ht,tt=Ne,L=re,q=oe,I=bt):(X=pt,et=mt,st=rt,ut=lt,vt=ht,ft=Ne,Qt=re,ce=oe,gt=bt):(mt*st-rt*et)*O+(rt*X-pt*st)*M+(pt*et-mt*X)*F<0?(E=pt,$=mt,H=rt,yt=lt,Tt=ht,Lt=Ne,K=re,V=oe,C=bt):(G=pt,W=mt,Q=rt,ot=lt,Mt=ht,tt=Ne,L=re,q=oe,I=bt)}}},supportPoint:function(t,e,s,n,r){var o=t.rotation.elements,a=o[0]*e+o[3]*s+o[6]*n,l=o[1]*e+o[4]*s+o[7]*n,h=o[2]*e+o[5]*s+o[8]*n,u=a,c=h,f=u*u+c*c,p=t.radius,g=t.halfHeight,v,m,w;f==0?l<0?(v=p,m=-g,w=0):(v=p,m=g,w=0):(f=t.radius/j.sqrt(f),l<0?(v=u*f,m=-g,w=c*f):(v=u*f,m=g,w=c*f)),a=o[0]*v+o[1]*m+o[2]*w+t.position.x,l=o[3]*v+o[4]*m+o[5]*w+t.position.y,h=o[6]*v+o[7]*m+o[8]*w+t.position.z,r.set(a,l,h)},detectCollision:function(t,e,s){var n,r;t.id<e.id?(n=t,r=e):(n=e,r=t);var o=n.position,a=r.position,l=o.x,h=o.y,u=o.z,c=a.x,f=a.y,p=a.z,g=n.halfHeight,v=r.halfHeight,m=n.normalDirection,w=r.normalDirection,x=n.halfDirection,y=r.halfDirection,d=n.radius,z=r.radius,k=m.x,N=m.y,S=m.z,U=w.x,O=w.y,M=w.z,F=x.x,A=x.y,D=x.z,P=y.x,ot=y.y,Mt=y.z,tt=l-c,L=h-f,q=u-p,I,G,W,Q,yt,Tt,Lt,K,V,C,E,$,H,wt,ut,vt,ft,Qt,ce,gt,X,et=new R,st=new R,_e=new R;if(this.getSep(n,r,et,st,_e)){var Wt=et.x*k+et.y*N+et.z*S,jt=et.x*U+et.y*O+et.z*M,Xt=Wt>0,Yt=jt>0;Xt||(Wt=-Wt),Yt||(jt=-jt);var Le=0;(Wt>.999||jt>.999)&&(Wt>jt?Le=1:Le=2);var at,lt,ht,Ne=_e.x,re,oe,bt,pt,mt,rt,Ht,ee,St,J,Z,dt,xt,ge,te,Se,ae;switch(at=et.x,lt=et.y,ht=et.z,Le){case 0:s.addPoint(st.x,st.y,st.z,at,lt,ht,Ne,!1);break;case 1:if(Xt?(G=l+F,W=h+A,Q=u+D,at=k,lt=N,ht=S):(G=l-F,W=h-A,Q=u-D,at=-k,lt=-N,ht=-S),ce=at*U+lt*O+ht*M,ce<0?I=v:I=-v,yt=c+I*U,Tt=f+I*O,Lt=p+I*M,jt>=.999999?(K=-lt,V=ht,C=at):(K=at,V=lt,C=ht),I=K*U+V*O+C*M,tt=I*U-K,L=I*O-V,q=I*M-C,I=j.sqrt(tt*tt+L*L+q*q),I==0)break;if(I=z/I,tt*=I,L*=I,q*=I,K=yt+tt,V=Tt+L,C=Lt+q,ce<-.96||ce>.96)re=U*U*1.5-.5,oe=U*O*1.5-M*.866025403,bt=U*M*1.5+O*.866025403,pt=O*U*1.5+M*.866025403,mt=O*O*1.5-.5,rt=O*M*1.5-U*.866025403,Ht=M*U*1.5-O*.866025403,ee=M*O*1.5+U*.866025403,St=M*M*1.5-.5,J=K,Z=V,dt=C,xt=at*(J-G)+lt*(Z-W)+ht*(dt-Q),K=J-xt*at-G,V=Z-xt*lt-W,C=dt-xt*ht-Q,I=K*K+V*V+C*C,I>d*d&&(I=d/j.sqrt(I),K*=I,V*=I,C*=I),J=G+K,Z=W+V,dt=Q+C,s.addPoint(J,Z,dt,at,lt,ht,xt,!1),J=tt*re+L*oe+q*bt,Z=tt*pt+L*mt+q*rt,dt=tt*Ht+L*ee+q*St,J=(tt=J)+yt,Z=(L=Z)+Tt,dt=(q=dt)+Lt,xt=at*(J-G)+lt*(Z-W)+ht*(dt-Q),xt<=0&&(K=J-xt*at-G,V=Z-xt*lt-W,C=dt-xt*ht-Q,I=K*K+V*V+C*C,I>d*d&&(I=d/j.sqrt(I),K*=I,V*=I,C*=I),J=G+K,Z=W+V,dt=Q+C,s.addPoint(J,Z,dt,at,lt,ht,xt,!1)),J=tt*re+L*oe+q*bt,Z=tt*pt+L*mt+q*rt,dt=tt*Ht+L*ee+q*St,J=(tt=J)+yt,Z=(L=Z)+Tt,dt=(q=dt)+Lt,xt=at*(J-G)+lt*(Z-W)+ht*(dt-Q),xt<=0&&(K=J-xt*at-G,V=Z-xt*lt-W,C=dt-xt*ht-Q,I=K*K+V*V+C*C,I>d*d&&(I=d/j.sqrt(I),K*=I,V*=I,C*=I),J=G+K,Z=W+V,dt=Q+C,s.addPoint(J,Z,dt,at,lt,ht,xt,!1));else{if(E=K,$=V,H=C,ft=at*(E-G)+lt*($-W)+ht*(H-Q),E-=ft*at,$-=ft*lt,H-=ft*ht,ce>0?(wt=K+U*v*2,ut=V+O*v*2,vt=C+M*v*2):(wt=K-U*v*2,ut=V-O*v*2,vt=C-M*v*2),Qt=at*(wt-G)+lt*(ut-W)+ht*(vt-Q),wt-=Qt*at,ut-=Qt*lt,vt-=Qt*ht,tt=G-E,L=W-$,q=Q-H,K=wt-E,V=ut-$,C=vt-H,ge=tt*tt+L*L+q*q,te=tt*K+L*V+q*C,Se=K*K+V*V+C*C,ae=te*te-Se*(ge-d*d),ae<0)break;ae=j.sqrt(ae),gt=(te+ae)/Se,X=(te-ae)/Se,X<gt&&(I=gt,gt=X,X=I),X>1&&(X=1),gt<0&&(gt=0),K=E+(wt-E)*gt,V=$+(ut-$)*gt,C=H+(vt-H)*gt,wt=E+(wt-E)*X,ut=$+(ut-$)*X,vt=H+(vt-H)*X,E=K,$=V,H=C,I=ft+(Qt-ft)*gt,Qt=ft+(Qt-ft)*X,ft=I,ft<0&&s.addPoint(E,$,H,at,lt,ht,xt,!1),Qt<0&&s.addPoint(wt,ut,vt,at,lt,ht,xt,!1)}break;case 2:if(Yt?(yt=c-P,Tt=f-ot,Lt=p-Mt,at=-U,lt=-O,ht=-M):(yt=c+P,Tt=f+ot,Lt=p+Mt,at=U,lt=O,ht=M),ce=at*k+lt*N+ht*S,ce<0?I=g:I=-g,G=l+I*k,W=h+I*N,Q=u+I*S,Wt>=.999999?(K=-lt,V=ht,C=at):(K=at,V=lt,C=ht),I=K*k+V*N+C*S,tt=I*k-K,L=I*N-V,q=I*S-C,I=j.sqrt(tt*tt+L*L+q*q),I==0)break;if(I=d/I,tt*=I,L*=I,q*=I,K=G+tt,V=W+L,C=Q+q,ce<-.96||ce>.96)re=k*k*1.5-.5,oe=k*N*1.5-S*.866025403,bt=k*S*1.5+N*.866025403,pt=N*k*1.5+S*.866025403,mt=N*N*1.5-.5,rt=N*S*1.5-k*.866025403,Ht=S*k*1.5-N*.866025403,ee=S*N*1.5+k*.866025403,St=S*S*1.5-.5,J=K,Z=V,dt=C,xt=at*(J-yt)+lt*(Z-Tt)+ht*(dt-Lt),K=J-xt*at-yt,V=Z-xt*lt-Tt,C=dt-xt*ht-Lt,I=K*K+V*V+C*C,I>z*z&&(I=z/j.sqrt(I),K*=I,V*=I,C*=I),J=yt+K,Z=Tt+V,dt=Lt+C,s.addPoint(J,Z,dt,-at,-lt,-ht,xt,!1),J=tt*re+L*oe+q*bt,Z=tt*pt+L*mt+q*rt,dt=tt*Ht+L*ee+q*St,J=(tt=J)+G,Z=(L=Z)+W,dt=(q=dt)+Q,xt=at*(J-yt)+lt*(Z-Tt)+ht*(dt-Lt),xt<=0&&(K=J-xt*at-yt,V=Z-xt*lt-Tt,C=dt-xt*ht-Lt,I=K*K+V*V+C*C,I>z*z&&(I=z/j.sqrt(I),K*=I,V*=I,C*=I),J=yt+K,Z=Tt+V,dt=Lt+C,s.addPoint(J,Z,dt,-at,-lt,-ht,xt,!1)),J=tt*re+L*oe+q*bt,Z=tt*pt+L*mt+q*rt,dt=tt*Ht+L*ee+q*St,J=(tt=J)+G,Z=(L=Z)+W,dt=(q=dt)+Q,xt=at*(J-yt)+lt*(Z-Tt)+ht*(dt-Lt),xt<=0&&(K=J-xt*at-yt,V=Z-xt*lt-Tt,C=dt-xt*ht-Lt,I=K*K+V*V+C*C,I>z*z&&(I=z/j.sqrt(I),K*=I,V*=I,C*=I),J=yt+K,Z=Tt+V,dt=Lt+C,s.addPoint(J,Z,dt,-at,-lt,-ht,xt,!1));else{if(E=K,$=V,H=C,ft=at*(E-yt)+lt*($-Tt)+ht*(H-Lt),E-=ft*at,$-=ft*lt,H-=ft*ht,ce>0?(wt=K+k*g*2,ut=V+N*g*2,vt=C+S*g*2):(wt=K-k*g*2,ut=V-N*g*2,vt=C-S*g*2),Qt=at*(wt-yt)+lt*(ut-Tt)+ht*(vt-Lt),wt-=Qt*at,ut-=Qt*lt,vt-=Qt*ht,tt=yt-E,L=Tt-$,q=Lt-H,K=wt-E,V=ut-$,C=vt-H,ge=tt*tt+L*L+q*q,te=tt*K+L*V+q*C,Se=K*K+V*V+C*C,ae=te*te-Se*(ge-z*z),ae<0)break;ae=j.sqrt(ae),gt=(te+ae)/Se,X=(te-ae)/Se,X<gt&&(I=gt,gt=X,X=I),X>1&&(X=1),gt<0&&(gt=0),K=E+(wt-E)*gt,V=$+(ut-$)*gt,C=H+(vt-H)*gt,wt=E+(wt-E)*X,ut=$+(ut-$)*X,vt=H+(vt-H)*X,E=K,$=V,H=C,I=ft+(Qt-ft)*gt,Qt=ft+(Qt-ft)*X,ft=I,ft<0&&s.addPoint(E,$,H,-at,-lt,-ht,ft,!1),Qt<0&&s.addPoint(wt,ut,vt,-at,-lt,-ht,Qt,!1)}break}}}});function Ka(t){_i.call(this),this.flip=t}Ka.prototype=Object.assign(Object.create(_i.prototype),{constructor:Ka,detectCollision:function(t,e,s){var n,r;this.flip?(n=e,r=t):(n=t,r=e);var o=r.dimentions,a=n.position,l=a.x,h=a.y,u=a.z,c=r.position,f=c.x,p=c.y,g=c.z,v=n.radius,m=r.halfWidth,w=r.halfHeight,x=r.halfDepth,y=l-f,d=h-p,z=u-g,k=o[0]*y+o[1]*d+o[2]*z,N=o[3]*y+o[4]*d+o[5]*z,S=o[6]*y+o[7]*d+o[8]*z,U,O,M,F,A,D=0;k>m?k=m:k<-m?k=-m:D=1,N>w?N=w:N<-w?N=-w:D|=2,S>x?S=x:S<-x?S=-x:D|=4,D==7?(k<0?y=m+k:y=m-k,N<0?d=w+N:d=w-N,S<0?z=x+S:z=x-S,y<d?y<z?(F=y-m,k<0?(k=-m,y=o[0],d=o[1],z=o[2]):(k=m,y=-o[0],d=-o[1],z=-o[2])):(F=z-x,S<0?(S=-x,y=o[6],d=o[7],z=o[8]):(S=x,y=-o[6],d=-o[7],z=-o[8])):d<z?(F=d-w,N<0?(N=-w,y=o[3],d=o[4],z=o[5]):(N=w,y=-o[3],d=-o[4],z=-o[5])):(F=z-x,S<0?(S=-x,y=o[6],d=o[7],z=o[8]):(S=x,y=-o[6],d=-o[7],z=-o[8])),U=f+k*o[0]+N*o[3]+S*o[6],O=p+k*o[1]+N*o[4]+S*o[7],M=g+k*o[2]+N*o[5]+S*o[8],s.addPoint(l+v*y,h+v*d,u+v*z,y,d,z,F-v,this.flip)):(U=f+k*o[0]+N*o[3]+S*o[6],O=p+k*o[1]+N*o[4]+S*o[7],M=g+k*o[2]+N*o[5]+S*o[8],y=U-a.x,d=O-a.y,z=M-a.z,F=y*y+d*d+z*z,F>0&&F<v*v&&(F=j.sqrt(F),A=1/F,y*=A,d*=A,z*=A,s.addPoint(l+v*y,h+v*d,u+v*z,y,d,z,F-v,this.flip)))}});function Ja(t){_i.call(this),this.flip=t}Ja.prototype=Object.assign(Object.create(_i.prototype),{constructor:Ja,detectCollision:function(t,e,s){var n,r;this.flip?(n=e,r=t):(n=t,r=e);var o=n.position,a=o.x,l=o.y,h=o.z,u=r.position,c=u.x,f=u.y,p=u.z,g=r.normalDirection.x,v=r.normalDirection.y,m=r.normalDirection.z,w=n.radius,x=r.radius,y=w+x,d=r.halfHeight,z=a-c,k=l-f,N=h-p,S=z*g+k*v+N*m;if(!(S<-d-w||S>d+w)){var U=c+S*g,O=f+S*v,M=p+S*m,F=a-U,A=l-O,D=h-M,P=F*F+A*A+D*D;if(!(P>y*y)){P>x*x&&(P=x/j.sqrt(P),F*=P,A*=P,D*=P),S<-d?S=-d:S>d&&(S=d),U=c+S*g+F,O=f+S*v+A,M=p+S*m+D,z=U-a,k=O-l,N=M-h,P=z*z+k*k+N*N;var ot;P>0&&P<w*w&&(P=j.sqrt(P),ot=1/P,z*=ot,k*=ot,N*=ot,s.addPoint(a+z*w,l+k*w,h+N*w,z,k,N,P-w,this.flip))}}}});function pu(){_i.call(this)}pu.prototype=Object.assign(Object.create(_i.prototype),{constructor:pu,detectCollision:function(t,e,s){var n=t,r=e,o=n.position,a=r.position,l=a.x-o.x,h=a.y-o.y,u=a.z-o.z,c=l*l+h*h+u*u,f=n.radius,p=r.radius,g=f+p;if(c>0&&c<g*g){c=j.sqrt(c);var v=1/c;l*=v,h*=v,u*=v,s.addPoint(o.x+l*f,o.y+h*f,o.z+u*f,l,h,u,c-g,!1)}}});function Za(t){_i.call(this),this.flip=t,this.n=new R,this.p=new R}Za.prototype=Object.assign(Object.create(_i.prototype),{constructor:Za,detectCollision:function(t,e,s){var n=this.n,r=this.p,o=this.flip?e:t,a=this.flip?t:e,l=o.radius,h;n.sub(o.position,a.position),n.x*=a.normal.x,n.y*=a.normal.y,n.z*=a.normal.z;var h=n.lengthSq();h>0&&h<l*l&&(h=j.sqrt(h),n.copy(a.normal).negate(),r.copy(o.position).addScaledVector(n,l),s.addPointVec(r,n,h-l,this.flip))}});function tl(t){_i.call(this),this.flip=t,this.n=new R,this.p=new R,this.dix=new R,this.diy=new R,this.diz=new R,this.cc=new R,this.cc2=new R}tl.prototype=Object.assign(Object.create(_i.prototype),{constructor:tl,detectCollision:function(t,e,s){var n=this.n,r=this.p,o=this.cc,a=this.flip?e:t,l=this.flip?t:e,h=a.dimentions,u=a.halfWidth,c=a.halfHeight,f=a.halfDepth,p,g=0;this.dix.set(h[0],h[1],h[2]),this.diy.set(h[3],h[4],h[5]),this.diz.set(h[6],h[7],h[8]),n.sub(a.position,l.position),n.x*=l.normal.x,n.y*=l.normal.y,n.z*=l.normal.z,o.set(j.dotVectors(this.dix,n),j.dotVectors(this.diy,n),j.dotVectors(this.diz,n)),o.x>u?o.x=u:o.x<-u?o.x=-u:g=1,o.y>c?o.y=c:o.y<-c?o.y=-c:g|=2,o.z>f?o.z=f:o.z<-f?o.z=-f:g|=4,g===7&&(n.set(o.x<0?u+o.x:u-o.x,o.y<0?c+o.y:c-o.y,o.z<0?f+o.z:f-o.z),n.x<n.y?n.x<n.z?(p=n.x-u,o.x<0?(o.x=-u,n.copy(this.dix)):(o.x=u,n.subEqual(this.dix))):(p=n.z-f,o.z<0?(o.z=-f,n.copy(this.diz)):(o.z=f,n.subEqual(this.diz))):n.y<n.z?(p=n.y-c,o.y<0?(o.y=-c,n.copy(this.diy)):(o.y=c,n.subEqual(this.diy))):(p=n.z-f,o.z<0?(o.z=-f,n.copy(this.diz)):(o.z=f,n.subEqual(this.diz))),r.copy(l.position).addScaledVector(n,1),s.addPointVec(r,n,p,this.flip))}});function wp(t){switch(t instanceof Object||(t={}),this.scale=t.worldscale||1,this.invScale=1/this.scale,this.timeStep=t.timestep||.01666,this.timerate=this.timeStep*1e3,this.timer=null,this.preLoop=null,this.postLoop=null,this.numIterations=t.iterations||8,t.broadphase||2){case 1:this.broadPhase=new au;break;case 2:default:this.broadPhase=new hu;break;case 3:this.broadPhase=new cu;break}this.Btypes=["None","BruteForce","Sweep & Prune","Bounding Volume Tree"],this.broadPhaseType=this.Btypes[t.broadphase||2],this.performance=null,this.isStat=t.info===void 0?!1:t.info,this.isStat&&(this.performance=new pp(this)),this.enableRandomizer=t.random!==void 0?t.random:!0,this.rigidBodies=null,this.numRigidBodies=0,this.contacts=null,this.unusedContacts=null,this.numContacts=0,this.numContactPoints=0,this.joints=null,this.numJoints=0,this.numIslands=0,this.gravity=new R(0,-9.8,0),t.gravity!==void 0&&this.gravity.fromArray(t.gravity);var e=5;this.detectors=[],this.detectors.length=e;for(var s=e;s--;)this.detectors[s]=[],this.detectors[s].length=e;this.detectors[on][on]=new pu,this.detectors[on][an]=new Ka(!1),this.detectors[an][on]=new Ka(!0),this.detectors[an][an]=new fu,this.detectors[Hn][Hn]=new du,this.detectors[Hn][an]=new Ya(!0),this.detectors[an][Hn]=new Ya(!1),this.detectors[Hn][on]=new Ja(!0),this.detectors[on][Hn]=new Ja(!1),this.detectors[ro][on]=new Za(!0),this.detectors[on][ro]=new Za(!1),this.detectors[ro][an]=new tl(!0),this.detectors[an][ro]=new tl(!1),this.randX=65535,this.randA=98765,this.randB=123456789,this.islandRigidBodies=[],this.islandStack=[],this.islandConstraints=[]}Object.assign(wp.prototype,{World:!0,play:function(){if(this.timer===null){var t=this;this.timer=setInterval(function(){t.step()},this.timerate)}},stop:function(){this.timer!==null&&(clearInterval(this.timer),this.timer=null)},setGravity:function(t){this.gravity.fromArray(t)},getInfo:function(){return this.isStat?this.performance.show():""},clear:function(){for(this.stop(),this.preLoop=null,this.postLoop=null,this.randX=65535;this.joints!==null;)this.removeJoint(this.joints);for(;this.contacts!==null;)this.removeContact(this.contacts);for(;this.rigidBodies!==null;)this.removeRigidBody(this.rigidBodies)},addRigidBody:function(t){t.parent&&ki("World","It is not possible to be added to more than one world one of the rigid body"),t.setParent(this);for(var e=t.shapes;e!==null;e=e.next)this.addShape(e);this.rigidBodies!==null&&((this.rigidBodies.prev=t).next=this.rigidBodies),this.rigidBodies=t,this.numRigidBodies++},removeRigidBody:function(t){var e=t;if(e.parent===this){e.awake();for(var s=e.jointLink;s!=null;){var n=s.joint;s=s.next,this.removeJoint(n)}for(var r=t.shapes;r!==null;r=r.next)this.removeShape(r);var o=e.prev,a=e.next;o!==null&&(o.next=a),a!==null&&(a.prev=o),this.rigidBodies==e&&(this.rigidBodies=a),e.prev=null,e.next=null,e.parent=null,this.numRigidBodies--}},getByName:function(t){for(var e=this.rigidBodies;e!==null;){if(e.name===t)return e;e=e.next}for(var s=this.joints;s!==null;){if(s.name===t)return s;s=s.next}return null},addShape:function(t){(!t.parent||!t.parent.parent)&&ki("World","It is not possible to be added alone to shape world"),t.proxy=this.broadPhase.createProxy(t),t.updateProxy(),this.broadPhase.addProxy(t.proxy)},removeShape:function(t){this.broadPhase.removeProxy(t.proxy),t.proxy=null},addJoint:function(t){t.parent&&ki("World","It is not possible to be added to more than one world one of the joint"),this.joints!=null&&((this.joints.prev=t).next=this.joints),this.joints=t,t.setParent(this),this.numJoints++,t.awake(),t.attach()},removeJoint:function(t){var e=t,s=e.prev,n=e.next;s!==null&&(s.next=n),n!==null&&(n.prev=s),this.joints==e&&(this.joints=n),e.prev=null,e.next=null,this.numJoints--,e.awake(),e.detach(),e.parent=null},addContact:function(t,e){var s;this.unusedContacts!==null?(s=this.unusedContacts,this.unusedContacts=this.unusedContacts.next):s=new vp,s.attach(t,e),s.detector=this.detectors[t.type][e.type],this.contacts&&((this.contacts.prev=s).next=this.contacts),this.contacts=s,this.numContacts++},removeContact:function(t){var e=t.prev,s=t.next;s&&(s.prev=e),e&&(e.next=s),this.contacts==t&&(this.contacts=s),t.prev=null,t.next=null,t.detach(),t.next=this.unusedContacts,this.unusedContacts=t,this.numContacts--},getContact:function(t,e){t=t.constructor===hr?t.name:t,e=e.constructor===hr?e.name:e;for(var s,n,r=this.contacts;r!==null;){if(s=r.body1.name,n=r.body2.name,s===t&&n===e||n===t&&s===e)return r.touching?r:null;r=r.next}return null},checkContact:function(t,e){for(var s,n,r=this.contacts;r!==null;){if(s=r.body1.name||" ",n=r.body2.name||" ",s==t&&n==e||n==t&&s==e)return!!r.touching;r=r.next}},callSleep:function(t){return!(!t.allowSleep||t.linearVelocity.lengthSq()>.04||t.angularVelocity.lengthSq()>.25)},step:function(){var t=this.isStat;t&&this.performance.setTime(0);for(var e=this.rigidBodies;e!==null;)e.addedToIsland=!1,e.sleeping&&e.testWakeUp(),e=e.next;t&&this.performance.setTime(1),this.broadPhase.detectPairs();for(var s=this.broadPhase.pairs,n=this.broadPhase.numPairs;n--;){var r=s[n],o,a;r.shape1.id<r.shape2.id?(o=r.shape1,a=r.shape2):(o=r.shape2,a=r.shape1);var l;o.numContacts<a.numContacts?l=o.contactLink:l=a.contactLink;for(var h=!1;l;){var u=l.contact;if(u.shape1==o&&u.shape2==a){u.persisting=!0,h=!0;break}l=l.next}h||this.addContact(o,a)}for(t&&this.performance.calcBroadPhase(),this.numContactPoints=0,u=this.contacts;u!==null;){if(!u.persisting&&u.shape1.aabb.intersectTest(u.shape2.aabb)){var c=u.next;this.removeContact(u),u=c;continue}var f=u.body1,p=u.body2;(f.isDynamic&&!f.sleeping||p.isDynamic&&!p.sleeping)&&u.updateManifold(),this.numContactPoints+=u.manifold.numPoints,u.persisting=!1,u.constraint.addedToIsland=!1,u=u.next}t&&this.performance.calcNarrowPhase();var g=1/this.timeStep,v,m;for(v=this.joints;v!==null;v=v.next)v.addedToIsland=!1;this.islandRigidBodies=[],this.islandConstraints=[],this.islandStack=[],t&&this.performance.setTime(1),this.numIslands=0;for(var w=this.rigidBodies;w!==null;w=w.next)if(!(w.addedToIsland||w.isStatic||w.sleeping)){if(w.isLonely()){w.isDynamic&&w.linearVelocity.addScaledVector(this.gravity,this.timeStep),this.callSleep(w)?(w.sleepTime+=this.timeStep,w.sleepTime>.5?w.sleep():w.updatePosition(this.timeStep)):(w.sleepTime=0,w.updatePosition(this.timeStep)),this.numIslands++;continue}var x=0,y=0,d=1;this.islandStack[0]=w,w.addedToIsland=!0;do if(e=this.islandStack[--d],this.islandStack[d]=null,e.sleeping=!1,this.islandRigidBodies[x++]=e,!e.isStatic){for(var z=e.contactLink;z!==null;z=z.next){var u=z.contact;if(m=u.constraint,!(m.addedToIsland||!u.touching)){this.islandConstraints[y++]=m,m.addedToIsland=!0;var c=z.body;c.addedToIsland||(this.islandStack[d++]=c,c.addedToIsland=!0)}}for(var k=e.jointLink;k!==null;k=k.next)m=k.joint,!m.addedToIsland&&(this.islandConstraints[y++]=m,m.addedToIsland=!0,c=k.body,!(c.addedToIsland||!c.isDynamic)&&(this.islandStack[d++]=c,c.addedToIsland=!0))}while(d!=0);for(var N=new R().addScaledVector(this.gravity,this.timeStep),S=x;S--;)e=this.islandRigidBodies[S],e.isDynamic&&e.linearVelocity.addEqual(N);if(this.enableRandomizer){for(S=y;S--;)if(S!==0){var U=(this.randX=this.randX*this.randA+this.randB&2147483647)/2147483648*S|0;m=this.islandConstraints[S],this.islandConstraints[S]=this.islandConstraints[U],this.islandConstraints[U]=m}}for(S=y;S--;)this.islandConstraints[S].preSolve(this.timeStep,g);for(var O=this.numIterations;O--;)for(S=y;S--;)this.islandConstraints[S].solve();for(S=y;S--;)this.islandConstraints[S].postSolve(),this.islandConstraints[S]=null;var M=10;for(S=x;S--;)if(e=this.islandRigidBodies[S],this.callSleep(e))e.sleepTime+=this.timeStep,e.sleepTime<M&&(M=e.sleepTime);else{e.sleepTime=0,M=0;continue}if(M>.5)for(S=x;S--;)this.islandRigidBodies[S].sleep(),this.islandRigidBodies[S]=null;else for(S=x;S--;)this.islandRigidBodies[S].updatePosition(this.timeStep),this.islandRigidBodies[S]=null;this.numIslands++}t&&this.performance.calcEnd(),this.postLoop!==null&&this.postLoop()},remove:function(t){},add:function(t){t=t||{};var e=t.type||"box";e.constructor===String&&(e=[e]);var s=e[0].substring(0,5)==="joint";return s?this.initJoint(e[0],t):this.initBody(e,t)},initBody:function(t,e){var s=this.invScale,n=e.move||!1,r=e.kinematic||!1,o=e.pos||[0,0,0];o=o.map(function(x){return x*s});var a=e.posShape||[0,0,0];a=a.map(function(x){return x*s});var l=e.rot||[0,0,0];l=l.map(function(x){return x*j.degtorad});var h=e.rotShape||[0,0,0];h=l.map(function(x){return x*j.degtorad});var u=e.size===void 0?[1,1,1]:e.size;u.length===1&&(u[1]=u[0]),u.length===2&&(u[2]=u[0]),u=u.map(function(x){return x*s});var c=new ky;e.density!==void 0&&(c.density=e.density),e.friction!==void 0&&(c.friction=e.friction),e.restitution!==void 0&&(c.restitution=e.restitution),e.belongsTo!==void 0&&(c.belongsTo=e.belongsTo),e.collidesWith!==void 0&&(c.collidesWith=e.collidesWith),e.config!==void 0&&(e.config[0]!==void 0&&(c.density=e.config[0]),e.config[1]!==void 0&&(c.friction=e.config[1]),e.config[2]!==void 0&&(c.restitution=e.config[2]),e.config[3]!==void 0&&(c.belongsTo=e.config[3]),e.config[4]!==void 0&&(c.collidesWith=e.config[4]));for(var f=new R(o[0],o[1],o[2]),p=new Ni().setFromEuler(l[0],l[1],l[2]),g=new hr(f,p),v,m,w=0;w<t.length;w++){switch(m=w*3,a[m]!==void 0&&c.relativePosition.set(a[m],a[m+1],a[m+2]),h[m]!==void 0&&c.relativeRotation.setQuat(new Ni().setFromEuler(h[m],h[m+1],h[m+2])),t[w]){case"sphere":v=new Xh(c,u[m]);break;case"cylinder":v=new Yh(c,u[m],u[m+1]);break;case"box":v=new Qh(c,u[m],u[m+1],u[m+2]);break;case"plane":v=new Kh(c);break}g.addShape(v)}return e.neverSleep||r?g.allowSleep=!1:g.allowSleep=!0,g.isKinematic=r,n?e.massPos||e.massRot?g.setupMass(Xa,!1):g.setupMass(Xa,!0):g.setupMass(no),e.name!==void 0&&(g.name=e.name),this.addRigidBody(g),n&&(e.sleep?g.sleep():g.awake()),g},initJoint:function(t,e){var s=this.invScale,n=e.axe1||[1,0,0],r=e.axe2||[1,0,0],o=e.pos1||[0,0,0],a=e.pos2||[0,0,0];o=o.map(function(w){return w*s}),a=a.map(function(w){return w*s});var l,h;t==="jointDistance"?(l=e.min||0,h=e.max||10,l=l*s,h=h*s):(l=e.min||57.29578,h=e.max||0,l=l*j.degtorad,h=h*j.degtorad);var u=e.limit||null,c=e.spring||null,f=e.motor||null,p=new Ny;p.scale=this.scale,p.invScale=this.invScale,p.allowCollision=e.collision||!1,p.localAxis1.set(n[0],n[1],n[2]),p.localAxis2.set(r[0],r[1],r[2]),p.localAnchorPoint1.set(o[0],o[1],o[2]),p.localAnchorPoint2.set(a[0],a[1],a[2]);var g=null,v=null;if(e.body1===void 0||e.body2===void 0)return ki("World","Can't add joint if attach rigidbodys not define !");if(e.body1.constructor===String?g=this.getByName(e.body1):e.body1.constructor===Number?g=this.getByName(e.body1):e.body1.constructor===hr&&(g=e.body1),e.body2.constructor===String?v=this.getByName(e.body2):e.body2.constructor===Number?v=this.getByName(e.body2):e.body2.constructor===hr&&(v=e.body2),g===null||v===null)return ki("World","Can't add joint attach rigidbodys not find !");p.body1=g,p.body2=v;var m;switch(t){case"jointDistance":m=new tu(p,l,h),c!==null&&m.limitMotor.setSpring(c[0],c[1]),f!==null&&m.limitMotor.setMotor(f[0],f[1]);break;case"jointHinge":case"joint":m=new Jh(p,l,h),c!==null&&m.limitMotor.setSpring(c[0],c[1]),f!==null&&m.limitMotor.setMotor(f[0],f[1]);break;case"jointPrisme":m=new eu(p,l,h);break;case"jointSlide":m=new iu(p,l,h);break;case"jointBall":m=new Zh(p);break;case"jointWheel":m=new su(p),u!==null&&m.rotationalLimitMotor1.setLimit(u[0],u[1]),c!==null&&m.rotationalLimitMotor1.setSpring(c[0],c[1]),f!==null&&m.rotationalLimitMotor1.setMotor(f[0],f[1]);break}return m.name=e.name||"",this.addJoint(m),m}});const Ly=()=>new wp({timestep:1/60,info:!0,worldscale:1,gravity:[0,0,-9.8]}),Iy=(t,e,s,n=1)=>t.add({type:"sphere",size:s.triplet,pos:e.triplet,move:!0,density:2,world:t,restitution:.9}),Vy=(t,e,s,n=1)=>t.add({type:"box",size:s.triplet,pos:e.triplet,move:!0,density:1,world:t,restitution:.3}),Cy=(t,e,s,n=1)=>t.add({type:"cylinder",size:s.triplet,pos:e.triplet,move:!0,density:1,world:t,restitution:.3}),by=(t,e,s)=>t.add({type:"box",size:s.triplet,pos:e.triplet,move:!1,world:t,restitution:.3,density:1,friction:.4}),Ey=(t,e)=>{const s=e.getScene();t.step(),s.forEach(([n,r])=>{const o=n.body;if(o&&o.isDynamic){const a=o.getPosition();a.z<-10&&(t.remove(o),e.removeFromScene(n.id));const l=o.getQuaternion(),h=$t.fromValues(a.x,a.y,a.z),u=gs.fromValues(l.x,l.y,l.z,l.w);n.rotoTranslate(u,h)}})};let Ty=0,Bf=0,Ay=0,Dy=0;const pc=25,Oy=t=>{const s=$t.fromValues(0,0,0),n=$t.fromValues(50,50,.1),r=Z2()(Et.identity(),{id:`ref-xyplane-${Bf++}`,color:[.4,.4,.4,.4],steps:4});r.scale(n),r.translate(s.add($t.fromValues(0,0,-.1/2)));const o=ey()(Et.identity(),{id:`ref-xygrid-${Bf++}`,color:[.6,.6,1,.2],steps:60});o.scale(n),o.translate(s);const a=by(t,s,n);return r.setBody(a),[[r],[o]]},Fy=t=>{const e=[];for(let s=0;s<pc;s++){const n=$t.fromValues(-8+Math.random()*16,-8+Math.random()*16,20+Math.random()*10),r=$t.fromValues(1,1,1),o=K2()(Et.identity(),{id:`sphere-${Ty++}`,steps:3,color:[Math.random(),.6,Math.random(),1]});o.scale(r),o.translate(n);const a=Iy(t,n,r);o.setBody(a),e.push([o])}return e},Ry=t=>{const e=[];for(let s=0;s<pc;s++){const n=$t.fromValues(-8+Math.random()*16,-8+Math.random()*16,20+Math.random()*10),r=$t.fromValues(2,2,2),o=$2()(Et.identity(),{id:`cube-${Ay++}`,color:[.8,Math.random(),Math.random(),1]});o.scale(r),o.translate(n);const a=Vy(t,n,r);o.setBody(a),e.push([o])}return e},Uy=t=>{const e=[];for(let s=0;s<pc;s++){const n=$t.fromValues(-8+Math.random()*16,-8+Math.random()*16,20+Math.random()*10),r=$t.fromValues(2,2,2),o=q2()(Et.rotationX(k2(90)),{id:`cylinder-${Dy++}`,steps:12,color:[Math.random(),Math.random(),.3,1]});o.scale(r),o.translate(n);const a=Cy(t,n,$t.fromValues(1,2,1));o.setBody(a),e.push([o])}return e},jy=(t,e)=>{switch(t){case"plane":return Oy(e);case"sphere":return Fy(e);case"cube":return Ry(e);case"cylinder":return Uy(e);default:throw new Error(`Unknown geoTool: ${t}`)}},By=(t,e,s)=>{const n=jy(s,e);t.addToScene(n)},Zr="border-solid border-[1px] border-slate-800 mt-[-1px]";function $y(){const[t,e]=Zs.useState("Initializing WebGPU..."),[s,n]=Zs.useState(null),[r,o]=Zs.useState(null),a=c=>{e(c.message)},l=c=>{n(c),e("");const f=Ly();o(f),c.onRender(()=>{f&&Ey(f,c)})},h=c=>{if(!s||!r){e("WebGPU not initialized");return}By(s,r,c)},u=()=>{if(!s||!r){e("WebGPU not initialized");return}s.clearScene(),r.clear()};return se.jsxs(se.Fragment,{children:[se.jsx("div",{className:`flex flex-row justify-between items-center ${Zr} h-[40px]  leading-[40px]`,id:"top-bar",children:se.jsx("h1",{className:"mx-2",children:"Demo # 3 - WebGPU and Oimo.js"})}),se.jsxs("div",{id:"app-space",className:`flex-1 flex flex-row overflow-hidden ${Zr} min-h-[600px] bg-gray-800`,children:[se.jsx(ny,{onSelected:h,onClear:u}),se.jsx("div",{className:"flex-1",children:se.jsx(sy,{onError:a,onConnected:l})})]}),se.jsxs("div",{id:"bottom-bar",className:`flex flex-row justify-between items-stretch text-xs ${Zr} h-[30px] leading-[30px]`,children:[se.jsx("h3",{className:"m-0",children:"Bottom bar"}),t.length===0?se.jsx("div",{className:`px-2 ${Zr}`,children:"WebGPU ✅ "}):se.jsx("div",{className:`text-red-500 px-2 ${Zr}`,children:t})]})]})}Kl.createRoot(document.getElementById("main")).render(se.jsx($y,{}));
